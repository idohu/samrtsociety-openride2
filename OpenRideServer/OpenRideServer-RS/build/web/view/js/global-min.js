/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(aR,U){function a3(){if(!ak.isReady){try{ac.documentElement.doScroll("left")}catch(c){setTimeout(a3,1);return}ak.ready()}}function M(w,c){c.src?ak.ajax({url:c.src,async:false,dataType:"script"}):ak.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function at(w,c,L,G,J,A){var F=w.length;if(typeof c==="object"){for(var K in c){at(w,K,c[K],G,J,L)}return w}if(L!==U){G=!A&&G&&ak.isFunction(L);for(K=0;K<F;K++){J(w[K],c,G?L.call(w[K],K,J(w[K],c)):L,A)}return w}return F?J(w[0],c):U}function aI(){return(new Date).getTime()}function ar(){return false}function ap(){return true}function aN(w,c,A){A[0].type=w;return ak.event.handle.apply(c,A)}function aj(P){var O,N=[],K=[],L=arguments,G,J,w,F,A,c;J=ak.data(this,"events");if(!(P.liveFired===this||!J||!J.live||P.button&&P.type==="click")){P.liveFired=this;var Q=J.live.slice(0);for(F=0;F<Q.length;F++){J=Q[F];J.origType.replace(aC,"")===P.type?K.push(J.selector):Q.splice(F--,1)}G=ak(P.target).closest(K,P.currentTarget);A=0;for(c=G.length;A<c;A++){for(F=0;F<Q.length;F++){J=Q[F];if(G[A].selector===J.selector){w=G[A].elem;K=null;if(J.preType==="mouseenter"||J.preType==="mouseleave"){K=ak(P.relatedTarget).closest(J.selector)[0]}if(!K||K!==w){N.push({elem:w,handleObj:J})}}}}A=0;for(c=N.length;A<c;A++){G=N[A];P.currentTarget=G.elem;P.data=G.handleObj.data;P.handleObj=G.handleObj;if(G.handleObj.origHandler.apply(G.elem,L)===false){O=false;break}}return O}}function D(w,c){return"live."+(w&&w!=="*"?w+".":"")+c.replace(/\./g,"`").replace(/ /g,"&")}function n(c){return !c||!c.parentNode||c.parentNode.nodeType===11}function bm(w,c){var A=0;c.each(function(){if(this.nodeName===(w[A]&&w[A].nodeName)){var J=ak.data(w[A++]),K=ak.data(this,J);if(J=J&&J.events){delete K.handle;K.events={};for(var F in J){for(var G in J[F]){ak.event.add(this,F,J[F][G],J[F][G].data)}}}}})}function a6(w,c,J){var F,G,A;c=c&&c[0]?c[0].ownerDocument||c[0]:ac;if(w.length===1&&typeof w[0]==="string"&&w[0].length<512&&c===ac&&!aS.test(w[0])&&(ak.support.checkClone||!an.test(w[0]))){G=true;if(A=ak.fragments[w[0]]){if(A!==1){F=A}}}if(!F){F=c.createDocumentFragment();ak.clean(w,c,F,J)}if(G){ak.fragments[w[0]]=A?F:1}return{fragment:F,cacheable:G}}function aF(w,c){var A={};ak.each(I.concat.apply([],I.slice(0,c)),function(){A[this]=w});return A}function q(c){return"scrollTo" in c&&c.document?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var ak=function(w,c){return new ak.fn.init(w,c)},r=aR.jQuery,d=aR.$,ac=aR.document,aw,bc=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,aW=/^.[^:#\[\.,]*$/,aq=/\S/,S=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,t=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,aA=navigator.userAgent,b=false,ay=[],aE,a4=Object.prototype.toString,aY=Object.prototype.hasOwnProperty,aB=Array.prototype.push,ax=Array.prototype.slice,a9=Array.prototype.indexOf;ak.fn=ak.prototype={init:function(w,c){var F,A;if(!w){return this}if(w.nodeType){this.context=this[0]=w;this.length=1;return this}if(w==="body"&&!c){this.context=ac;this[0]=ac.body;this.selector="body";this.length=1;return this}if(typeof w==="string"){if((F=bc.exec(w))&&(F[1]||!c)){if(F[1]){A=c?c.ownerDocument||c:ac;if(w=t.exec(w)){if(ak.isPlainObject(c)){w=[ac.createElement(w[1])];ak.fn.attr.call(w,c,true)}else{w=[A.createElement(w[1])]}}else{w=a6([F[1]],[A]);w=(w.cacheable?w.fragment.cloneNode(true):w.fragment).childNodes}return ak.merge(this,w)}else{if(c=ac.getElementById(F[2])){if(c.id!==F[2]){return aw.find(w)}this.length=1;this[0]=c}this.context=ac;this.selector=w;return this}}else{if(!c&&/^\w+$/.test(w)){this.selector=w;this.context=ac;w=ac.getElementsByTagName(w);return ak.merge(this,w)}else{return !c||c.jquery?(c||aw).find(w):ak(c).find(w)}}}else{if(ak.isFunction(w)){return aw.ready(w)}}if(w.selector!==U){this.selector=w.selector;this.context=w.context}return ak.makeArray(w,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return ax.call(this,0)},get:function(c){return c==null?this.toArray():c<0?this.slice(c)[0]:this[c]},pushStack:function(w,c,F){var A=ak();ak.isArray(w)?aB.apply(A,w):ak.merge(A,w);A.prevObject=this;A.context=this.context;if(c==="find"){A.selector=this.selector+(this.selector?" ":"")+F}else{if(c){A.selector=this.selector+"."+c+"("+F+")"}}return A},each:function(w,c){return ak.each(this,w,c)},ready:function(c){ak.bindReady();if(ak.isReady){c.call(ac,ak)}else{ay&&ay.push(c)}return this},eq:function(c){return c===-1?this.slice(c):this.slice(c,+c+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ax.apply(this,arguments),"slice",ax.call(arguments).join(","))},map:function(c){return this.pushStack(ak.map(this,function(w,A){return c.call(w,A,w)}))},end:function(){return this.prevObject||ak(null)},push:aB,sort:[].sort,splice:[].splice};ak.fn.init.prototype=ak.fn;ak.extend=ak.fn.extend=function(){var w=arguments[0]||{},c=1,L=arguments.length,G=false,J,A,F,K;if(typeof w==="boolean"){G=w;w=arguments[1]||{};c=2}if(typeof w!=="object"&&!ak.isFunction(w)){w={}}if(L===c){w=this;--c}for(;c<L;c++){if((J=arguments[c])!=null){for(A in J){F=w[A];K=J[A];if(w!==K){if(G&&K&&(ak.isPlainObject(K)||ak.isArray(K))){F=F&&(ak.isPlainObject(F)||ak.isArray(F))?F:ak.isArray(K)?[]:{};w[A]=ak.extend(G,F,K)}else{if(K!==U){w[A]=K}}}}}}return w};ak.extend({noConflict:function(c){aR.$=d;if(c){aR.jQuery=r}return ak},isReady:false,ready:function(){if(!ak.isReady){if(!ac.body){return setTimeout(ak.ready,13)}ak.isReady=true;if(ay){for(var w,c=0;w=ay[c++];){w.call(ac,ak)}ay=null}ak.fn.triggerHandler&&ak(ac).triggerHandler("ready")}},bindReady:function(){if(!b){b=true;if(ac.readyState==="complete"){return ak.ready()}if(ac.addEventListener){ac.addEventListener("DOMContentLoaded",aE,false);aR.addEventListener("load",ak.ready,false)}else{if(ac.attachEvent){ac.attachEvent("onreadystatechange",aE);aR.attachEvent("onload",ak.ready);var w=false;try{w=aR.frameElement==null}catch(c){}ac.documentElement.doScroll&&w&&a3()}}}},isFunction:function(c){return a4.call(c)==="[object Function]"},isArray:function(c){return a4.call(c)==="[object Array]"},isPlainObject:function(w){if(!w||a4.call(w)!=="[object Object]"||w.nodeType||w.setInterval){return false}if(w.constructor&&!aY.call(w,"constructor")&&!aY.call(w.constructor.prototype,"isPrototypeOf")){return false}var c;for(c in w){}return c===U||aY.call(w,c)},isEmptyObject:function(w){for(var c in w){return false}return true},error:function(c){throw c},parseJSON:function(c){if(typeof c!=="string"||!c){return null}c=ak.trim(c);if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return aR.JSON&&aR.JSON.parse?aR.JSON.parse(c):(new Function("return "+c))()}else{ak.error("Invalid JSON: "+c)}},noop:function(){},globalEval:function(w){if(w&&aq.test(w)){var c=ac.getElementsByTagName("head")[0]||ac.documentElement,A=ac.createElement("script");A.type="text/javascript";if(ak.support.scriptEval){A.appendChild(ac.createTextNode(w))}else{A.text=w}c.insertBefore(A,c.firstChild);c.removeChild(A)}},nodeName:function(w,c){return w.nodeName&&w.nodeName.toUpperCase()===c.toUpperCase()},each:function(w,c,K){var G,J=0,A=w.length,F=A===U||ak.isFunction(w);if(K){if(F){for(G in w){if(c.apply(w[G],K)===false){break}}}else{for(;J<A;){if(c.apply(w[J++],K)===false){break}}}}else{if(F){for(G in w){if(c.call(w[G],G,w[G])===false){break}}}else{for(K=w[0];J<A&&c.call(K,J,K)!==false;K=w[++J]){}}}return w},trim:function(c){return(c||"").replace(S,"")},makeArray:function(w,c){c=c||[];if(w!=null){w.length==null||typeof w==="string"||ak.isFunction(w)||typeof w!=="function"&&w.setInterval?aB.call(c,w):ak.merge(c,w)}return c},inArray:function(w,c){if(c.indexOf){return c.indexOf(w)}for(var F=0,A=c.length;F<A;F++){if(c[F]===w){return F}}return -1},merge:function(w,c){var G=w.length,A=0;if(typeof c.length==="number"){for(var F=c.length;A<F;A++){w[G++]=c[A]}}else{for(;c[A]!==U;){w[G++]=c[A++]}}w.length=G;return w},grep:function(w,c,J){for(var F=[],G=0,A=w.length;G<A;G++){!J!==!c(w[G],G)&&F.push(w[G])}return F},map:function(w,c,K){for(var G=[],J,A=0,F=w.length;A<F;A++){J=c(w[A],A,K);if(J!=null){G[G.length]=J}}return G.concat.apply([],G)},guid:1,proxy:function(w,c,A){if(arguments.length===2){if(typeof c==="string"){A=w;w=A[c];c=U}else{if(c&&!ak.isFunction(c)){A=c;c=U}}}if(!c&&w){c=function(){return w.apply(A||this,arguments)}}if(w){c.guid=w.guid=w.guid||c.guid||ak.guid++}return c},uaMatch:function(c){c=c.toLowerCase();c=/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||!/compatible/.test(c)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(c)||[];return{browser:c[1]||"",version:c[2]||"0"}},browser:{}});aA=ak.uaMatch(aA);if(aA.browser){ak.browser[aA.browser]=true;ak.browser.version=aA.version}if(ak.browser.webkit){ak.browser.safari=true}if(a9){ak.inArray=function(w,c){return a9.call(c,w)}}aw=ak(ac);if(ac.addEventListener){aE=function(){ac.removeEventListener("DOMContentLoaded",aE,false);ak.ready()}}else{if(ac.attachEvent){aE=function(){if(ac.readyState==="complete"){ac.detachEvent("onreadystatechange",aE);ak.ready()}}}}(function(){ak.support={};var N=ac.documentElement,L=ac.createElement("script"),K=ac.createElement("div"),G="script"+aI();K.style.display="none";K.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var J=K.getElementsByTagName("*"),A=K.getElementsByTagName("a")[0];if(!(!J||!J.length||!A)){ak.support={leadingWhitespace:K.firstChild.nodeType===3,tbody:!K.getElementsByTagName("tbody").length,htmlSerialize:!!K.getElementsByTagName("link").length,style:/red/.test(A.getAttribute("style")),hrefNormalized:A.getAttribute("href")==="/a",opacity:/^0.55$/.test(A.style.opacity),cssFloat:!!A.style.cssFloat,checkOn:K.getElementsByTagName("input")[0].value==="on",optSelected:ac.createElement("select").appendChild(ac.createElement("option")).selected,parentNode:K.removeChild(K.appendChild(ac.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};L.type="text/javascript";try{L.appendChild(ac.createTextNode("window."+G+"=1;"))}catch(F){}N.insertBefore(L,N.firstChild);if(aR[G]){ak.support.scriptEval=true;delete aR[G]}try{delete L.test}catch(c){ak.support.deleteExpando=false}N.removeChild(L);if(K.attachEvent&&K.fireEvent){K.attachEvent("onclick",function w(){ak.support.noCloneEvent=false;K.detachEvent("onclick",w)});K.cloneNode(true).fireEvent("onclick")}K=ac.createElement("div");K.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";N=ac.createDocumentFragment();N.appendChild(K.firstChild);ak.support.checkClone=N.cloneNode(true).cloneNode(true).lastChild.checked;ak(function(){var O=ac.createElement("div");O.style.width=O.style.paddingLeft="1px";ac.body.appendChild(O);ak.boxModel=ak.support.boxModel=O.offsetWidth===2;ac.body.removeChild(O).style.display="none"});N=function(O){var Q=ac.createElement("div");O="on"+O;var P=O in Q;if(!P){Q.setAttribute(O,"return;");P=typeof Q[O]==="function"}return P};ak.support.submitBubbles=N("submit");ak.support.changeBubbles=N("change");N=L=K=J=A=null}})();ak.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var aK="jQuery"+aI(),f=0,aV={};ak.extend({cache:{},expando:aK,noData:{embed:true,object:true,applet:true},data:function(w,c,G){if(!(w.nodeName&&ak.noData[w.nodeName.toLowerCase()])){w=w==aR?aV:w;var A=w[aK],F=ak.cache;if(!A&&typeof c==="string"&&G===U){return null}A||(A=++f);if(typeof c==="object"){w[aK]=A;F[A]=ak.extend(true,{},c)}else{if(!F[A]){w[aK]=A;F[A]={}}}w=F[A];if(G!==U){w[c]=G}return typeof c==="string"?w[c]:w}},removeData:function(w,c){if(!(w.nodeName&&ak.noData[w.nodeName.toLowerCase()])){w=w==aR?aV:w;var G=w[aK],A=ak.cache,F=A[G];if(c){if(F){delete F[c];ak.isEmptyObject(F)&&ak.removeData(w)}}else{if(ak.support.deleteExpando){delete w[ak.expando]}else{w.removeAttribute&&w.removeAttribute(ak.expando)}delete A[G]}}}});ak.fn.extend({data:function(w,c){if(typeof w==="undefined"&&this.length){return ak.data(this[0])}else{if(typeof w==="object"){return this.each(function(){ak.data(this,w)})}}var F=w.split(".");F[1]=F[1]?"."+F[1]:"";if(c===U){var A=this.triggerHandler("getData"+F[1]+"!",[F[0]]);if(A===U&&this.length){A=ak.data(this[0],w)}return A===U&&F[1]?this.data(F[0]):A}else{return this.trigger("setData"+F[1]+"!",[F[0],c]).each(function(){ak.data(this,w,c)})}},removeData:function(c){return this.each(function(){ak.removeData(this,c)})}});ak.extend({queue:function(w,c,F){if(w){c=(c||"fx")+"queue";var A=ak.data(w,c);if(!F){return A||[]}if(!A||ak.isArray(F)){A=ak.data(w,c,ak.makeArray(F))}else{A.push(F)}return A}},dequeue:function(w,c){c=c||"fx";var F=ak.queue(w,c),A=F.shift();if(A==="inprogress"){A=F.shift()}if(A){c==="fx"&&F.unshift("inprogress");A.call(w,function(){ak.dequeue(w,c)})}}});ak.fn.extend({queue:function(w,c){if(typeof w!=="string"){c=w;w="fx"}if(c===U){return ak.queue(this[0],w)}return this.each(function(){var A=ak.queue(this,w,c);w==="fx"&&A[0]!=="inprogress"&&ak.dequeue(this,w)})},dequeue:function(c){return this.each(function(){ak.dequeue(this,c)})},delay:function(w,c){w=ak.fx?ak.fx.speeds[w]||w:w;c=c||"fx";return this.queue(c,function(){var A=this;setTimeout(function(){ak.dequeue(A,c)},w)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var bh=/[\n\t]/g,ae=/\s+/,bd=/\r/g,aP=/href|src|style/,aX=/(button|input)/i,az=/(button|input|object|select|textarea)/i,ad=/^(a|area)$/i,a1=/radio|checkbox/;ak.fn.extend({attr:function(w,c){return at(this,w,c,true,ak.attr)},removeAttr:function(c){return this.each(function(){ak.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(N){if(ak.isFunction(N)){return this.each(function(P){var O=ak(this);O.addClass(N.call(this,P,O.attr("class")))})}if(N&&typeof N==="string"){for(var L=(N||"").split(ae),K=0,G=this.length;K<G;K++){var J=this[K];if(J.nodeType===1){if(J.className){for(var A=" "+J.className+" ",F=J.className,c=0,w=L.length;c<w;c++){if(A.indexOf(" "+L[c]+" ")<0){F+=" "+L[c]}}J.className=ak.trim(F)}else{J.className=N}}}}return this},removeClass:function(w){if(ak.isFunction(w)){return this.each(function(N){var O=ak(this);O.removeClass(w.call(this,N,O.attr("class")))})}if(w&&typeof w==="string"||w===U){for(var c=(w||"").split(ae),L=0,G=this.length;L<G;L++){var J=this[L];if(J.nodeType===1&&J.className){if(w){for(var A=(" "+J.className+" ").replace(bh," "),F=0,K=c.length;F<K;F++){A=A.replace(" "+c[F]+" "," ")}J.className=ak.trim(A)}else{J.className=""}}}}return this},toggleClass:function(w,c){var F=typeof w,A=typeof c==="boolean";if(ak.isFunction(w)){return this.each(function(J){var G=ak(this);G.toggleClass(w.call(this,J,G.attr("class"),c),c)})}return this.each(function(){if(F==="string"){for(var L,J=0,K=ak(this),N=c,G=w.split(ae);L=G[J++];){N=A?N:!K.hasClass(L);K[N?"addClass":"removeClass"](L)}}else{if(F==="undefined"||F==="boolean"){this.className&&ak.data(this,"__className__",this.className);this.className=this.className||w===false?"":ak.data(this,"__className__")||""}}})},hasClass:function(w){w=" "+w+" ";for(var c=0,A=this.length;c<A;c++){if((" "+this[c].className+" ").replace(bh," ").indexOf(w)>-1){return true}}return false},val:function(w){if(w===U){var c=this[0];if(c){if(ak.nodeName(c,"option")){return(c.attributes.value||{}).specified?c.value:c.text}if(ak.nodeName(c,"select")){var L=c.selectedIndex,G=[],J=c.options;c=c.type==="select-one";if(L<0){return null}var A=c?L:0;for(L=c?L+1:J.length;A<L;A++){var F=J[A];if(F.selected){w=ak(F).val();if(c){return w}G.push(w)}}return G}if(a1.test(c.type)&&!ak.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(bd,"")}return U}var K=ak.isFunction(w);return this.each(function(N){var Q=ak(this),P=w;if(this.nodeType===1){if(K){P=w.call(this,N,Q.val())}if(typeof P==="number"){P+=""}if(ak.isArray(P)&&a1.test(this.type)){this.checked=ak.inArray(Q.val(),P)>=0}else{if(ak.nodeName(this,"select")){var O=ak.makeArray(P);ak("option",this).each(function(){this.selected=ak.inArray(ak(this).val(),O)>=0});if(!O.length){this.selectedIndex=-1}}else{this.value=P}}}})}});ak.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(w,c,J,F){if(!w||w.nodeType===3||w.nodeType===8){return U}if(F&&c in ak.attrFn){return ak(w)[c](J)}F=w.nodeType!==1||!ak.isXMLDoc(w);var G=J!==U;c=F&&ak.props[c]||c;if(w.nodeType===1){var A=aP.test(c);if(c in w&&F&&!A){if(G){c==="type"&&aX.test(w.nodeName)&&w.parentNode&&ak.error("type property can't be changed");w[c]=J}if(ak.nodeName(w,"form")&&w.getAttributeNode(c)){return w.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=w.getAttributeNode("tabIndex"))&&c.specified?c.value:az.test(w.nodeName)||ad.test(w.nodeName)&&w.href?0:U}return w[c]}if(!ak.support.style&&F&&c==="style"){if(G){w.style.cssText=""+J}return w.style.cssText}G&&w.setAttribute(c,""+J);w=!ak.support.hrefNormalized&&F&&A?w.getAttribute(c,2):w.getAttribute(c);return w===null?U:w}return ak.style(w,c,J)}});var aC=/\.(.*)$/,u=function(c){return c.replace(/[^\w\s\.\|`]/g,function(w){return"\\"+w})};ak.event={add:function(Q,P,N,K){if(!(Q.nodeType===3||Q.nodeType===8)){if(Q.setInterval&&Q!==aR&&!Q.frameElement){Q=aR}var L,G;if(N.handler){L=N;N=L.handler}if(!N.guid){N.guid=ak.guid++}if(G=ak.data(Q)){var J=G.events=G.events||{},w=G.handle;if(!w){G.handle=w=function(){return typeof ak!=="undefined"&&!ak.event.triggered?ak.event.handle.apply(w.elem,arguments):U}}w.elem=Q;P=P.split(" ");for(var F,A=0,c;F=P[A++];){G=L?ak.extend({},L):{handler:N,data:K};if(F.indexOf(".")>-1){c=F.split(".");F=c.shift();G.namespace=c.slice(0).sort().join(".")}else{c=[];G.namespace=""}G.type=F;G.guid=N.guid;var R=J[F],O=ak.event.special[F]||{};if(!R){R=J[F]=[];if(!O.setup||O.setup.call(Q,K,c,w)===false){if(Q.addEventListener){Q.addEventListener(F,w,false)}else{Q.attachEvent&&Q.attachEvent("on"+F,w)}}}if(O.add){O.add.call(Q,G);if(!G.handler.guid){G.handler.guid=N.guid}}R.push(G);ak.event.global[F]=true}Q=null}}},global:{},remove:function(T,R,P,N){if(!(T.nodeType===3||T.nodeType===8)){var O,K=0,L,F,J,G,c,V,Q=ak.data(T),w=Q&&Q.events;if(Q&&w){if(R&&R.type){P=R.handler;R=R.type}if(!R||typeof R==="string"&&R.charAt(0)==="."){R=R||"";for(O in w){ak.event.remove(T,O+R)}}else{for(R=R.split(" ");O=R[K++];){G=O;L=O.indexOf(".")<0;F=[];if(!L){F=O.split(".");O=F.shift();J=new RegExp("(^|\\.)"+ak.map(F.slice(0).sort(),u).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(c=w[O]){if(P){G=ak.event.special[O]||{};for(A=N||0;A<c.length;A++){V=c[A];if(P.guid===V.guid){if(L||J.test(V.namespace)){N==null&&c.splice(A--,1);G.remove&&G.remove.call(T,V)}if(N!=null){break}}}if(c.length===0||N!=null&&c.length===1){if(!G.teardown||G.teardown.call(T,F)===false){aJ(T,O,Q.handle)}delete w[O]}}else{for(var A=0;A<c.length;A++){V=c[A];if(L||J.test(V.namespace)){ak.event.remove(T,G,V.handler,A);c.splice(A--,1)}}}}}if(ak.isEmptyObject(w)){if(R=Q.handle){R.elem=null}delete Q.events;delete Q.handle;ak.isEmptyObject(Q)&&ak.removeData(T)}}}}},trigger:function(O,N,L,J){var K=O.type||O;if(!J){O=typeof O==="object"?O[aK]?O:ak.extend(ak.Event(K),O):ak.Event(K);if(K.indexOf("!")>=0){O.type=K=K.slice(0,-1);O.exclusive=true}if(!L){O.stopPropagation();ak.event.global[K]&&ak.each(ak.cache,function(){this.events&&this.events[K]&&ak.event.trigger(O,N,this.handle.elem)})}if(!L||L.nodeType===3||L.nodeType===8){return U}O.result=U;O.target=L;N=ak.makeArray(N);N.unshift(O)}O.currentTarget=L;(J=ak.data(L,"handle"))&&J.apply(L,N);J=L.parentNode||L.ownerDocument;try{if(!(L&&L.nodeName&&ak.noData[L.nodeName.toLowerCase()])){if(L["on"+K]&&L["on"+K].apply(L,N)===false){O.result=false}}}catch(F){}if(!O.isPropagationStopped()&&J){ak.event.trigger(O,N,J,true)}else{if(!O.isDefaultPrevented()){J=O.target;var G,c=ak.nodeName(J,"a")&&K==="click",A=ak.event.special[K]||{};if((!A._default||A._default.call(L,O)===false)&&!c&&!(J&&J.nodeName&&ak.noData[J.nodeName.toLowerCase()])){try{if(J[K]){if(G=J["on"+K]){J["on"+K]=null}ak.event.triggered=true;J[K]()}}catch(w){}if(G){J["on"+K]=G}ak.event.triggered=false}}}},handle:function(w){var c,K,G,J;w=arguments[0]=ak.event.fix(w||aR.event);w.currentTarget=this;c=w.type.indexOf(".")<0&&!w.exclusive;if(!c){K=w.type.split(".");w.type=K.shift();G=new RegExp("(^|\\.)"+K.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}J=ak.data(this,"events");K=J[w.type];if(J&&K){K=K.slice(0);J=0;for(var A=K.length;J<A;J++){var F=K[J];if(c||G.test(F.namespace)){w.handler=F.handler;w.data=F.data;w.handleObj=F;F=F.handler.apply(this,arguments);if(F!==U){w.result=F;if(F===false){w.preventDefault();w.stopPropagation()}}if(w.isImmediatePropagationStopped()){break}}}}return w.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(w){if(w[aK]){return w}var c=w;w=ak.Event(c);for(var F=this.props.length,A;F;){A=this.props[--F];w[A]=c[A]}if(!w.target){w.target=w.srcElement||ac}if(w.target.nodeType===3){w.target=w.target.parentNode}if(!w.relatedTarget&&w.fromElement){w.relatedTarget=w.fromElement===w.target?w.toElement:w.fromElement}if(w.pageX==null&&w.clientX!=null){c=ac.documentElement;F=ac.body;w.pageX=w.clientX+(c&&c.scrollLeft||F&&F.scrollLeft||0)-(c&&c.clientLeft||F&&F.clientLeft||0);w.pageY=w.clientY+(c&&c.scrollTop||F&&F.scrollTop||0)-(c&&c.clientTop||F&&F.clientTop||0)}if(!w.which&&(w.charCode||w.charCode===0?w.charCode:w.keyCode)){w.which=w.charCode||w.keyCode}if(!w.metaKey&&w.ctrlKey){w.metaKey=w.ctrlKey}if(!w.which&&w.button!==U){w.which=w.button&1?1:w.button&2?3:w.button&4?2:0}return w},guid:100000000,proxy:ak.proxy,special:{ready:{setup:ak.bindReady,teardown:ak.noop},live:{add:function(c){ak.event.add(this,c.origType,ak.extend({},c,{handler:aj}))},remove:function(w){var c=true,A=w.origType.replace(aC,"");ak.each(ak.data(this,"events").live||[],function(){if(A===this.origType.replace(aC,"")){return c=false}});c&&ak.event.remove(this,w.origType,aj)}},beforeunload:{setup:function(w,c,A){if(this.setInterval){this.onbeforeunload=A}return false},teardown:function(w,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};var aJ=ac.removeEventListener?function(w,c,A){w.removeEventListener(c,A,false)}:function(w,c,A){w.detachEvent("on"+c,A)};ak.Event=function(c){if(!this.preventDefault){return new ak.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=aI();this[aK]=true};ak.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ap;var c=this.originalEvent;if(c){c.preventDefault&&c.preventDefault();c.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=ap;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ap;this.stopPropagation()},isDefaultPrevented:ar,isPropagationStopped:ar,isImmediatePropagationStopped:ar};var ah=function(w){var c=w.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){w.type=w.data;ak.event.handle.apply(this,arguments)}}catch(A){}},B=function(c){c.type=c.data;ak.event.handle.apply(this,arguments)};ak.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(w,c){ak.event.special[w]={setup:function(A){ak.event.add(this,c,A&&A.selector?B:ah,w)},teardown:function(A){ak.event.remove(this,c,A&&A.selector?B:ah)}}});if(!ak.support.submitBubbles){ak.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){ak.event.add(this,"click.specialSubmit",function(w){var c=w.target,A=c.type;if((A==="submit"||A==="image")&&ak(c).closest("form").length){return aN("submit",this,arguments)}});ak.event.add(this,"keypress.specialSubmit",function(w){var c=w.target,A=c.type;if((A==="text"||A==="password")&&ak(c).closest("form").length&&w.keyCode===13){return aN("submit",this,arguments)}})}else{return false}},teardown:function(){ak.event.remove(this,".specialSubmit")}}}if(!ak.support.changeBubbles){var v=/textarea|input|select/i,h,l=function(w){var c=w.type,A=w.value;if(c==="radio"||c==="checkbox"){A=w.checked}else{if(c==="select-multiple"){A=w.selectedIndex>-1?ak.map(w.options,function(F){return F.selected}).join("-"):""}else{if(w.nodeName.toLowerCase()==="select"){A=w.selectedIndex}}}return A},bg=function(w,c){var G=w.target,A,F;if(!(!v.test(G.nodeName)||G.readOnly)){A=ak.data(G,"_change_data");F=l(G);if(w.type!=="focusout"||G.type!=="radio"){ak.data(G,"_change_data",F)}if(!(A===U||F===A)){if(A!=null||F){w.type="change";return ak.event.trigger(w,c,G)}}}};ak.event.special.change={filters:{focusout:bg,click:function(w){var c=w.target,A=c.type;if(A==="radio"||A==="checkbox"||c.nodeName.toLowerCase()==="select"){return bg.call(this,w)}},keydown:function(w){var c=w.target,A=c.type;if(w.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||w.keyCode===32&&(A==="checkbox"||A==="radio")||A==="select-multiple"){return bg.call(this,w)}},beforeactivate:function(c){c=c.target;ak.data(c,"_change_data",l(c))}},setup:function(){if(this.type==="file"){return false}for(var c in h){ak.event.add(this,c+".specialChange",h[c])}return v.test(this.nodeName)},teardown:function(){ak.event.remove(this,".specialChange");return v.test(this.nodeName)}};h=ak.event.special.change.filters}ac.addEventListener&&ak.each({focus:"focusin",blur:"focusout"},function(w,c){function A(F){F=ak.event.fix(F);F.type=c;return ak.event.handle.call(this,F)}ak.event.special[c]={setup:function(){this.addEventListener(w,A,true)},teardown:function(){this.removeEventListener(w,A,true)}}});ak.each(["bind","one"],function(w,c){ak.fn[c]=function(L,G,J){if(typeof L==="object"){for(var A in L){this[c](A,G,L[A],J)}return this}if(ak.isFunction(G)){J=G;G=U}var F=c==="one"?ak.proxy(J,function(N){ak(this).unbind(N,F);return J.apply(this,arguments)}):J;if(L==="unload"&&c!=="one"){this.one(L,G,J)}else{A=0;for(var K=this.length;A<K;A++){ak.event.add(this[A],L,F,G)}}return this}});ak.fn.extend({unbind:function(w,c){if(typeof w==="object"&&!w.preventDefault){for(var F in w){this.unbind(F,w[F])}}else{F=0;for(var A=this.length;F<A;F++){ak.event.remove(this[F],w,c)}}return this},delegate:function(w,c,F,A){return this.live(c,F,A,w)},undelegate:function(w,c,A){return arguments.length===0?this.unbind("live"):this.die(c,null,A,w)},trigger:function(w,c){return this.each(function(){ak.event.trigger(w,c,this)})},triggerHandler:function(w,c){if(this[0]){w=ak.Event(w);w.preventDefault();w.stopPropagation();ak.event.trigger(w,c,this[0]);return w.result}},toggle:function(w){for(var c=arguments,A=1;A<c.length;){ak.proxy(w,c[A++])}return this.click(ak.proxy(w,function(F){var G=(ak.data(this,"lastToggle"+w.guid)||0)%A;ak.data(this,"lastToggle"+w.guid,G+1);F.preventDefault();return c[G].apply(this,arguments)||false}))},hover:function(w,c){return this.mouseenter(w).mouseleave(c||w)}});var bk={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};ak.each(["live","die"],function(w,c){ak.fn[c]=function(P,N,O,K){var L,F=0,J,G,A=K||this.selector,Q=K?this:ak(this.context);if(ak.isFunction(N)){O=N;N=U}for(P=(P||"").split(" ");(L=P[F++])!=null;){K=aC.exec(L);J="";if(K){J=K[0];L=L.replace(aC,"")}if(L==="hover"){P.push("mouseenter"+J,"mouseleave"+J)}else{G=L;if(L==="focus"||L==="blur"){P.push(bk[L]+J);L+=J}else{L=(bk[L]||L)+J}c==="live"?Q.each(function(){ak.event.add(this,D(L,A),{data:N,selector:A,handler:O,origType:L,origHandler:O,preType:G})}):Q.unbind(D(L,A),O)}}return this}});ak.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(w,c){ak.fn[c]=function(A){return A?this.bind(c,A):this.trigger(c)};if(ak.attrFn){ak.attrFn[c]=true}});aR.attachEvent&&!aR.addEventListener&&aR.attachEvent("onunload",function(){for(var w in ak.cache){if(ak.cache[w].handle){try{ak.event.remove(ak.cache[w].handle.elem)}catch(c){}}}});(function(){function X(ba){for(var ab="",aa,Z=0;ba[Z];Z++){aa=ba[Z];if(aa.nodeType===3||aa.nodeType===4){ab+=aa.nodeValue}else{if(aa.nodeType!==8){ab+=X(aa.childNodes)}}}return ab}function W(bo,bb,ba,ab,Z,aa){Z=0;for(var bq=ab.length;Z<bq;Z++){var br=ab[Z];if(br){br=br[bo];for(var bp=false;br;){if(br.sizcache===ba){bp=ab[br.sizset];break}if(br.nodeType===1&&!aa){br.sizcache=ba;br.sizset=Z}if(br.nodeName.toLowerCase()===bb){bp=br;break}br=br[bo]}ab[Z]=bp}}}function V(bo,bb,ba,ab,Z,aa){Z=0;for(var bq=ab.length;Z<bq;Z++){var br=ab[Z];if(br){br=br[bo];for(var bp=false;br;){if(br.sizcache===ba){bp=ab[br.sizset];break}if(br.nodeType===1){if(!aa){br.sizcache=ba;br.sizset=Z}if(typeof bb!=="string"){if(br===bb){bp=true;break}}else{if(O.filter(bb,[br]).length>0){bp=br;break}}}br=br[bo]}ab[Z]=bp}}}var R=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,T=0,P=Object.prototype.toString,Q=false,L=true;[0,0].sort(function(){L=false;return 0});var O=function(bq,bp,bb,ba){bb=bb||[];var aa=bp=bp||ac;if(bp.nodeType!==1&&bp.nodeType!==9){return[]}if(!bq||typeof bq!=="string"){return bb}for(var ab=[],bv,bw,bs,bo,bu=true,br=w(bp),bt=bq;(R.exec(""),bv=R.exec(bt))!==null;){bt=bv[3];ab.push(bv[1]);if(bv[2]){bo=bv[3];break}}if(ab.length>1&&J.exec(bq)){if(ab.length===2&&N.relative[ab[0]]){bw=Y(ab[0]+ab[1],bp)}else{for(bw=N.relative[ab[0]]?[bp]:O(ab.shift(),bp);ab.length;){bq=ab.shift();if(N.relative[bq]){bq+=ab.shift()}bw=Y(bq,bw)}}}else{if(!ba&&ab.length>1&&bp.nodeType===9&&!br&&N.match.ID.test(ab[0])&&!N.match.ID.test(ab[ab.length-1])){bv=O.find(ab.shift(),bp,br);bp=bv.expr?O.filter(bv.expr,bv.set)[0]:bv.set[0]}if(bp){bv=ba?{expr:ab.pop(),set:c(ba)}:O.find(ab.pop(),ab.length===1&&(ab[0]==="~"||ab[0]==="+")&&bp.parentNode?bp.parentNode:bp,br);bw=bv.expr?O.filter(bv.expr,bv.set):bv.set;if(ab.length>0){bs=c(bw)}else{bu=false}for(;ab.length;){var Z=ab.pop();bv=Z;if(N.relative[Z]){bv=ab.pop()}else{Z=""}if(bv==null){bv=bp}N.relative[Z](bs,bv,br)}}else{bs=[]}}bs||(bs=bw);bs||O.error(Z||bq);if(P.call(bs)==="[object Array]"){if(bu){if(bp&&bp.nodeType===1){for(bq=0;bs[bq]!=null;bq++){if(bs[bq]&&(bs[bq]===true||bs[bq].nodeType===1&&F(bp,bs[bq]))){bb.push(bw[bq])}}}else{for(bq=0;bs[bq]!=null;bq++){bs[bq]&&bs[bq].nodeType===1&&bb.push(bw[bq])}}}else{bb.push.apply(bb,bs)}}else{c(bs,bb)}if(bo){O(bo,aa,bb,ba);O.uniqueSort(bb)}return bb};O.uniqueSort=function(aa){if(K){Q=L;aa.sort(K);if(Q){for(var Z=1;Z<aa.length;Z++){aa[Z]===aa[Z-1]&&aa.splice(Z--,1)}}}return aa};O.matches=function(aa,Z){return O(aa,null,null,Z)};O.find=function(bo,bb,ba){var ab,Z;if(!bo){return[]}for(var aa=0,bq=N.order.length;aa<bq;aa++){var br=N.order[aa];if(Z=N.leftMatch[br].exec(bo)){var bp=Z[1];Z.splice(1,1);if(bp.substr(bp.length-1)!=="\\"){Z[1]=(Z[1]||"").replace(/\\/g,"");ab=N.find[br](Z,bb,ba);if(ab!=null){bo=bo.replace(N.match[br],"");break}}}}ab||(ab=bb.getElementsByTagName("*"));return{set:ab,expr:bo}};O.filter=function(br,bq,bo,ba){for(var aa=br,ab=[],bx=bq,by,bu,bp=bq&&bq[0]&&w(bq[0]);br&&bq.length;){for(var bw in N.filter){if((by=N.leftMatch[bw].exec(br))!=null&&by[2]){var bs=N.filter[bw],bv,Z;Z=by[1];bu=false;by.splice(1,1);if(Z.substr(Z.length-1)!=="\\"){if(bx===ab){ab=[]}if(N.preFilter[bw]){if(by=N.preFilter[bw](by,bx,bo,ab,ba,bp)){if(by===true){continue}}else{bu=bv=true}}if(by){for(var bb=0;(Z=bx[bb])!=null;bb++){if(Z){bv=bs(Z,by,bb,bx);var bt=ba^!!bv;if(bo&&bv!=null){if(bt){bu=true}else{bx[bb]=false}}else{if(bt){ab.push(Z);bu=true}}}}}if(bv!==U){bo||(bx=ab);br=br.replace(N.match[bw],"");if(!bu){return[]}break}}}}if(br===aa){if(bu==null){O.error(br)}else{break}}aa=br}return bx};O.error=function(Z){throw"Syntax error, unrecognized expression: "+Z};var N=O.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(Z){return Z.getAttribute("href")}},relative:{"+":function(ba,ab){var aa=typeof ab==="string",Z=aa&&!/\W/.test(ab);aa=aa&&!Z;if(Z){ab=ab.toLowerCase()}Z=0;for(var bb=ba.length,bo;Z<bb;Z++){if(bo=ba[Z]){for(;(bo=bo.previousSibling)&&bo.nodeType!==1;){}ba[Z]=aa||bo&&bo.nodeName.toLowerCase()===ab?bo||false:bo===ab}}aa&&O.filter(ab,ba,true)},">":function(ba,ab){var aa=typeof ab==="string";if(aa&&!/\W/.test(ab)){ab=ab.toLowerCase();for(var Z=0,bb=ba.length;Z<bb;Z++){var bo=ba[Z];if(bo){aa=bo.parentNode;ba[Z]=aa.nodeName.toLowerCase()===ab?aa:false}}}else{Z=0;for(bb=ba.length;Z<bb;Z++){if(bo=ba[Z]){ba[Z]=aa?bo.parentNode:bo.parentNode===ab}}aa&&O.filter(ab,ba,true)}},"":function(ba,ab,aa){var Z=T++,bb=V;if(typeof ab==="string"&&!/\W/.test(ab)){var bo=ab=ab.toLowerCase();bb=W}bb("parentNode",ab,Z,ba,bo,aa)},"~":function(ba,ab,aa){var Z=T++,bb=V;if(typeof ab==="string"&&!/\W/.test(ab)){var bo=ab=ab.toLowerCase();bb=W}bb("previousSibling",ab,Z,ba,bo,aa)}},find:{ID:function(ab,aa,Z){if(typeof aa.getElementById!=="undefined"&&!Z){return(ab=aa.getElementById(ab[1]))?[ab]:[]}},NAME:function(ba,ab){if(typeof ab.getElementsByName!=="undefined"){var aa=[];ab=ab.getElementsByName(ba[1]);for(var Z=0,bb=ab.length;Z<bb;Z++){ab[Z].getAttribute("name")===ba[1]&&aa.push(ab[Z])}return aa.length===0?null:aa}},TAG:function(aa,Z){return Z.getElementsByTagName(aa[1])}},preFilter:{CLASS:function(bb,ba,aa,Z,bo,bp){bb=" "+bb[1].replace(/\\/g,"")+" ";if(bp){return bb}bp=0;for(var ab;(ab=ba[bp])!=null;bp++){if(ab){if(bo^(ab.className&&(" "+ab.className+" ").replace(/[\t\n]/g," ").indexOf(bb)>=0)){aa||Z.push(ab)}else{if(aa){ba[bp]=false}}}}return false},ID:function(Z){return Z[1].replace(/\\/g,"")},TAG:function(Z){return Z[1].toLowerCase()},CHILD:function(aa){if(aa[1]==="nth"){var Z=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(aa[2]==="even"&&"2n"||aa[2]==="odd"&&"2n+1"||!/\D/.test(aa[2])&&"0n+"+aa[2]||aa[2]);aa[2]=Z[1]+(Z[2]||1)-0;aa[3]=Z[3]-0}aa[0]=T++;return aa},ATTR:function(ba,ab,aa,Z,bb,bo){ab=ba[1].replace(/\\/g,"");if(!bo&&N.attrMap[ab]){ba[1]=N.attrMap[ab]}if(ba[2]==="~="){ba[4]=" "+ba[4]+" "}return ba},PSEUDO:function(ba,ab,aa,Z,bb){if(ba[1]==="not"){if((R.exec(ba[3])||"").length>1||/^\w/.test(ba[3])){ba[3]=O(ba[3],null,null,ab)}else{ba=O.filter(ba[3],ab,aa,true^bb);aa||Z.push.apply(Z,ba);return false}}else{if(N.match.POS.test(ba[0])||N.match.CHILD.test(ba[0])){return true}}return ba},POS:function(Z){Z.unshift(true);return Z}},filters:{enabled:function(Z){return Z.disabled===false&&Z.type!=="hidden"},disabled:function(Z){return Z.disabled===true},checked:function(Z){return Z.checked===true},selected:function(Z){return Z.selected===true},parent:function(Z){return !!Z.firstChild},empty:function(Z){return !Z.firstChild},has:function(ab,aa,Z){return !!O(Z[3],ab).length},header:function(Z){return/h\d/i.test(Z.nodeName)},text:function(Z){return"text"===Z.type},radio:function(Z){return"radio"===Z.type},checkbox:function(Z){return"checkbox"===Z.type},file:function(Z){return"file"===Z.type},password:function(Z){return"password"===Z.type},submit:function(Z){return"submit"===Z.type},image:function(Z){return"image"===Z.type},reset:function(Z){return"reset"===Z.type},button:function(Z){return"button"===Z.type||Z.nodeName.toLowerCase()==="button"},input:function(Z){return/input|select|textarea|button/i.test(Z.nodeName)}},setFilters:{first:function(aa,Z){return Z===0},last:function(ba,ab,aa,Z){return ab===Z.length-1},even:function(aa,Z){return Z%2===0},odd:function(aa,Z){return Z%2===1},lt:function(ab,aa,Z){return aa<Z[3]-0},gt:function(ab,aa,Z){return aa>Z[3]-0},nth:function(ab,aa,Z){return Z[3]-0===aa},eq:function(ab,aa,Z){return Z[3]-0===aa}},filter:{PSEUDO:function(ba,ab,aa,Z){var bb=ab[1],bo=N.filters[bb];if(bo){return bo(ba,aa,ab,Z)}else{if(bb==="contains"){return(ba.textContent||ba.innerText||X([ba])||"").indexOf(ab[3])>=0}else{if(bb==="not"){ab=ab[3];aa=0;for(Z=ab.length;aa<Z;aa++){if(ab[aa]===ba){return false}}return true}else{O.error("Syntax error, unrecognized expression: "+bb)}}}},CHILD:function(bb,ba){var aa=ba[1],Z=bb;switch(aa){case"only":case"first":for(;Z=Z.previousSibling;){if(Z.nodeType===1){return false}}if(aa==="first"){return true}Z=bb;case"last":for(;Z=Z.nextSibling;){if(Z.nodeType===1){return false}}return true;case"nth":aa=ba[2];var bo=ba[3];if(aa===1&&bo===0){return true}ba=ba[0];var bp=bb.parentNode;if(bp&&(bp.sizcache!==ba||!bb.nodeIndex)){var ab=0;for(Z=bp.firstChild;Z;Z=Z.nextSibling){if(Z.nodeType===1){Z.nodeIndex=++ab}}bp.sizcache=ba}bb=bb.nodeIndex-bo;return aa===0?bb===0:bb%aa===0&&bb/aa>=0}},ID:function(aa,Z){return aa.nodeType===1&&aa.getAttribute("id")===Z},TAG:function(aa,Z){return Z==="*"&&aa.nodeType===1||aa.nodeName.toLowerCase()===Z},CLASS:function(aa,Z){return(" "+(aa.className||aa.getAttribute("class"))+" ").indexOf(Z)>-1},ATTR:function(ba,ab){var aa=ab[1];ba=N.attrHandle[aa]?N.attrHandle[aa](ba):ba[aa]!=null?ba[aa]:ba.getAttribute(aa);aa=ba+"";var Z=ab[2];ab=ab[4];return ba==null?Z==="!=":Z==="="?aa===ab:Z==="*="?aa.indexOf(ab)>=0:Z==="~="?(" "+aa+" ").indexOf(ab)>=0:!ab?aa&&ba!==false:Z==="!="?aa!==ab:Z==="^="?aa.indexOf(ab)===0:Z==="$="?aa.substr(aa.length-ab.length)===ab:Z==="|="?aa===ab||aa.substr(0,ab.length+1)===ab+"-":false},POS:function(ba,ab,aa,Z){var bb=N.setFilters[ab[2]];if(bb){return bb(ba,aa,ab,Z)}}}},J=N.match.POS;for(var A in N.match){N.match[A]=new RegExp(N.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source);N.leftMatch[A]=new RegExp(/(^(?:.|\r|\n)*?)/.source+N.match[A].source.replace(/\\(\d+)/g,function(aa,Z){return"\\"+(Z-0+1)}))}var c=function(aa,Z){aa=Array.prototype.slice.call(aa,0);if(Z){Z.push.apply(Z,aa);return Z}return aa};try{Array.prototype.slice.call(ac.documentElement.childNodes,0)}catch(G){c=function(ba,ab){ab=ab||[];if(P.call(ba)==="[object Array]"){Array.prototype.push.apply(ab,ba)}else{if(typeof ba.length==="number"){for(var aa=0,Z=ba.length;aa<Z;aa++){ab.push(ba[aa])}}else{for(aa=0;ba[aa];aa++){ab.push(ba[aa])}}}return ab}}var K;if(ac.documentElement.compareDocumentPosition){K=function(aa,Z){if(!aa.compareDocumentPosition||!Z.compareDocumentPosition){if(aa==Z){Q=true}return aa.compareDocumentPosition?-1:1}aa=aa.compareDocumentPosition(Z)&4?-1:aa===Z?0:1;if(aa===0){Q=true}return aa}}else{if("sourceIndex" in ac.documentElement){K=function(aa,Z){if(!aa.sourceIndex||!Z.sourceIndex){if(aa==Z){Q=true}return aa.sourceIndex?-1:1}aa=aa.sourceIndex-Z.sourceIndex;if(aa===0){Q=true}return aa}}else{if(ac.createRange){K=function(ba,ab){if(!ba.ownerDocument||!ab.ownerDocument){if(ba==ab){Q=true}return ba.ownerDocument?-1:1}var aa=ba.ownerDocument.createRange(),Z=ab.ownerDocument.createRange();aa.setStart(ba,0);aa.setEnd(ba,0);Z.setStart(ab,0);Z.setEnd(ab,0);ba=aa.compareBoundaryPoints(Range.START_TO_END,Z);if(ba===0){Q=true}return ba}}}}(function(){var ab=ac.createElement("div"),aa="script"+(new Date).getTime();ab.innerHTML="<a name='"+aa+"'/>";var Z=ac.documentElement;Z.insertBefore(ab,Z.firstChild);if(ac.getElementById(aa)){N.find.ID=function(ba,bb,bo){if(typeof bb.getElementById!=="undefined"&&!bo){return(bb=bb.getElementById(ba[1]))?bb.id===ba[1]||typeof bb.getAttributeNode!=="undefined"&&bb.getAttributeNode("id").nodeValue===ba[1]?[bb]:U:[]}};N.filter.ID=function(ba,bb){var bo=typeof ba.getAttributeNode!=="undefined"&&ba.getAttributeNode("id");return ba.nodeType===1&&bo&&bo.nodeValue===bb}}Z.removeChild(ab);Z=ab=null})();(function(){var Z=ac.createElement("div");Z.appendChild(ac.createComment(""));if(Z.getElementsByTagName("*").length>0){N.find.TAG=function(ba,ab){ab=ab.getElementsByTagName(ba[1]);if(ba[1]==="*"){ba=[];for(var aa=0;ab[aa];aa++){ab[aa].nodeType===1&&ba.push(ab[aa])}ab=ba}return ab}}Z.innerHTML="<a href='#'></a>";if(Z.firstChild&&typeof Z.firstChild.getAttribute!=="undefined"&&Z.firstChild.getAttribute("href")!=="#"){N.attrHandle.href=function(aa){return aa.getAttribute("href",2)}}Z=null})();ac.querySelectorAll&&function(){var ab=O,aa=ac.createElement("div");aa.innerHTML="<p class='TEST'></p>";if(!(aa.querySelectorAll&&aa.querySelectorAll(".TEST").length===0)){O=function(ba,bp,bq,bb){bp=bp||ac;if(!bb&&bp.nodeType===9&&!w(bp)){try{return c(bp.querySelectorAll(ba),bq)}catch(bo){}}return ab(ba,bp,bq,bb)};for(var Z in ab){O[Z]=ab[Z]}aa=null}}();(function(){var Z=ac.createElement("div");Z.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!Z.getElementsByClassName||Z.getElementsByClassName("e").length===0)){Z.lastChild.className="e";if(Z.getElementsByClassName("e").length!==1){N.order.splice(1,0,"CLASS");N.find.CLASS=function(ba,ab,aa){if(typeof ab.getElementsByClassName!=="undefined"&&!aa){return ab.getElementsByClassName(ba[1])}};Z=null}}})();var F=ac.compareDocumentPosition?function(aa,Z){return !!(aa.compareDocumentPosition(Z)&16)}:function(aa,Z){return aa!==Z&&(aa.contains?aa.contains(Z):true)},w=function(Z){return(Z=(Z?Z.ownerDocument||Z:0).documentElement)?Z.nodeName!=="HTML":false},Y=function(ba,ab){var aa=[],Z="",bb;for(ab=ab.nodeType?[ab]:ab;bb=N.match.PSEUDO.exec(ba);){Z+=bb[0];ba=ba.replace(N.match.PSEUDO,"")}ba=N.relative[ba]?ba+"*":ba;bb=0;for(var bo=ab.length;bb<bo;bb++){O(ba,ab[bb],aa)}return O.filter(Z,aa)};ak.find=O;ak.expr=O.selectors;ak.expr[":"]=ak.expr.filters;ak.unique=O.uniqueSort;ak.text=X;ak.isXMLDoc=w;ak.contains=F})();var g=/Until$/,be=/^(?:parents|prevUntil|prevAll)/,aZ=/,/;ax=Array.prototype.slice;var aO=function(w,c,F){if(ak.isFunction(c)){return ak.grep(w,function(J,G){return !!c.call(J,G,J)===F})}else{if(c.nodeType){return ak.grep(w,function(G){return G===c===F})}else{if(typeof c==="string"){var A=ak.grep(w,function(G){return G.nodeType===1});if(aW.test(c)){return ak.filter(c,A,!F)}else{c=ak.filter(c,A)}}}}return ak.grep(w,function(G){return ak.inArray(G,c)>=0===F})};ak.fn.extend({find:function(w){for(var c=this.pushStack("","find",w),K=0,G=0,J=this.length;G<J;G++){K=c.length;ak.find(w,this[G],c);if(G>0){for(var A=K;A<c.length;A++){for(var F=0;F<K;F++){if(c[F]===c[A]){c.splice(A--,1);break}}}}}return c},has:function(w){var c=ak(w);return this.filter(function(){for(var F=0,A=c.length;F<A;F++){if(ak.contains(this,c[F])){return true}}})},not:function(c){return this.pushStack(aO(this,c,false),"not",c)},filter:function(c){return this.pushStack(aO(this,c,true),"filter",c)},is:function(c){return !!c&&ak.filter(c,this).length>0},closest:function(N,L){if(ak.isArray(N)){var K=[],G=this[0],J,A={},F;if(G&&N.length){J=0;for(var c=N.length;J<c;J++){F=N[J];A[F]||(A[F]=ak.expr.match.POS.test(F)?ak(F,L||this.context):F)}for(;G&&G.ownerDocument&&G!==L;){for(F in A){J=A[F];if(J.jquery?J.index(G)>-1:ak(G).is(J)){K.push({selector:F,elem:G});delete A[F]}}G=G.parentNode}}return K}var w=ak.expr.match.POS.test(N)?ak(N,L||this.context):null;return this.map(function(P,O){for(;O&&O.ownerDocument&&O!==L;){if(w?w.index(O)>-1:ak(O).is(N)){return O}O=O.parentNode}return null})},index:function(c){if(!c||typeof c==="string"){return ak.inArray(this[0],c?ak(c):this.parent().children())}return ak.inArray(c.jquery?c[0]:c,this)},add:function(w,c){w=typeof w==="string"?ak(w,c||this.context):ak.makeArray(w);c=ak.merge(this.get(),w);return this.pushStack(n(w[0])||n(c[0])?c:ak.unique(c))},andSelf:function(){return this.add(this.prevObject)}});ak.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return ak.dir(c,"parentNode")},parentsUntil:function(w,c,A){return ak.dir(w,"parentNode",A)},next:function(c){return ak.nth(c,2,"nextSibling")},prev:function(c){return ak.nth(c,2,"previousSibling")},nextAll:function(c){return ak.dir(c,"nextSibling")},prevAll:function(c){return ak.dir(c,"previousSibling")},nextUntil:function(w,c,A){return ak.dir(w,"nextSibling",A)},prevUntil:function(w,c,A){return ak.dir(w,"previousSibling",A)},siblings:function(c){return ak.sibling(c.parentNode.firstChild,c)},children:function(c){return ak.sibling(c.firstChild)},contents:function(c){return ak.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:ak.makeArray(c.childNodes)}},function(w,c){ak.fn[w]=function(G,A){var F=ak.map(this,c,G);g.test(w)||(A=G);if(A&&typeof A==="string"){F=ak.filter(A,F)}F=this.length>1?ak.unique(F):F;if((this.length>1||aZ.test(A))&&be.test(w)){F=F.reverse()}return this.pushStack(F,w,ax.call(arguments).join(","))}});ak.extend({filter:function(w,c,A){if(A){w=":not("+w+")"}return ak.find.matches(w,c)},dir:function(w,c,F){var A=[];for(w=w[c];w&&w.nodeType!==9&&(F===U||w.nodeType!==1||!ak(w).is(F));){w.nodeType===1&&A.push(w);w=w[c]}return A},nth:function(w,c,F){c=c||1;for(var A=0;w;w=w[F]){if(w.nodeType===1&&++A===c){break}}return w},sibling:function(w,c){for(var A=[];w;w=w.nextSibling){w.nodeType===1&&w!==c&&A.push(w)}return A}});var al=/ jQuery\d+="(?:\d+|null)"/g,av=/^\s+/,E=/(<([\w:]+)[^>]*?)\/>/g,aG=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,o=/<([\w:]+)/,af=/<tbody/i,y=/<|&#?\w+;/,aS=/<script|<object|<embed|<option|<style/i,an=/checked\s*(?:[^=]|=\s*.checked.)/i,bn=function(w,c,A){return aG.test(A)?w:c+"></"+A+">"},aM={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aM.optgroup=aM.option;aM.tbody=aM.tfoot=aM.colgroup=aM.caption=aM.thead;aM.th=aM.td;if(!ak.support.htmlSerialize){aM._default=[1,"div<div>","</div>"]}ak.fn.extend({text:function(c){if(ak.isFunction(c)){return this.each(function(w){var A=ak(this);A.text(c.call(this,w,A.text()))})}if(typeof c!=="object"&&c!==U){return this.empty().append((this[0]&&this[0].ownerDocument||ac).createTextNode(c))}return ak.text(this)},wrapAll:function(w){if(ak.isFunction(w)){return this.each(function(A){ak(this).wrapAll(w.call(this,A))})}if(this[0]){var c=ak(w,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var A=this;A.firstChild&&A.firstChild.nodeType===1;){A=A.firstChild}return A}).append(this)}return this},wrapInner:function(c){if(ak.isFunction(c)){return this.each(function(w){ak(this).wrapInner(c.call(this,w))})}return this.each(function(){var w=ak(this),A=w.contents();A.length?A.wrapAll(c):w.append(c)})},wrap:function(c){return this.each(function(){ak(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){ak.nodeName(this,"body")||ak(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(w){this.parentNode.insertBefore(w,this)})}else{if(arguments.length){var c=ak(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(w){this.parentNode.insertBefore(w,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,ak(arguments[0]).toArray());return c}}},remove:function(w,c){for(var F=0,A;(A=this[F])!=null;F++){if(!w||ak.filter(w,[A]).length){if(!c&&A.nodeType===1){ak.cleanData(A.getElementsByTagName("*"));ak.cleanData([A])}A.parentNode&&A.parentNode.removeChild(A)}}return this},empty:function(){for(var w=0,c;(c=this[w])!=null;w++){for(c.nodeType===1&&ak.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(w){var c=this.map(function(){if(!ak.support.noCloneEvent&&!ak.isXMLDoc(this)){var F=this.outerHTML,A=this.ownerDocument;if(!F){F=A.createElement("div");F.appendChild(this.cloneNode(true));F=F.innerHTML}return ak.clean([F.replace(al,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(av,"")],A)[0]}else{return this.cloneNode(true)}});if(w===true){bm(this,c);bm(this.find("*"),c.find("*"))}return c},html:function(w){if(w===U){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(al,""):null}else{if(typeof w==="string"&&!aS.test(w)&&(ak.support.leadingWhitespace||!av.test(w))&&!aM[(o.exec(w)||["",""])[1].toLowerCase()]){w=w.replace(E,bn);try{for(var c=0,F=this.length;c<F;c++){if(this[c].nodeType===1){ak.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=w}}}catch(A){this.empty().append(w)}}else{ak.isFunction(w)?this.each(function(K){var G=ak(this),J=G.html();G.empty().append(function(){return w.call(this,K,J)})}):this.empty().append(w)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(ak.isFunction(c)){return this.each(function(w){var F=ak(this),A=F.html();F.replaceWith(c.call(this,w,A))})}if(typeof c!=="string"){c=ak(c).detach()}return this.each(function(){var w=this.nextSibling,A=this.parentNode;ak(this).remove();w?ak(w).before(c):ak(A).append(c)})}else{return this.pushStack(ak(ak.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(P,O,N){function K(Q){return ak.nodeName(Q,"table")?Q.getElementsByTagName("tbody")[0]||Q.appendChild(Q.ownerDocument.createElement("tbody")):Q}var L,G,J=P[0],w=[],F;if(!ak.support.checkClone&&arguments.length===3&&typeof J==="string"&&an.test(J)){return this.each(function(){ak(this).domManip(P,O,N,true)})}if(ak.isFunction(J)){return this.each(function(Q){var R=ak(this);P[0]=J.call(this,Q,O?R.html():U);R.domManip(P,O,N)})}if(this[0]){L=J&&J.parentNode;L=ak.support.parentNode&&L&&L.nodeType===11&&L.childNodes.length===this.length?{fragment:L}:a6(P,this,w);F=L.fragment;if(G=F.childNodes.length===1?(F=F.firstChild):F.firstChild){O=O&&ak.nodeName(G,"tr");for(var A=0,c=this.length;A<c;A++){N.call(O?K(this[A],G):this[A],A>0||L.cacheable||this.length>1?F.cloneNode(true):F)}}w.length&&ak.each(w,M)}return this}});ak.fragments={};ak.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,c){ak.fn[w]=function(K){var G=[];K=ak(K);var J=this.length===1&&this[0].parentNode;if(J&&J.nodeType===11&&J.childNodes.length===1&&K.length===1){K[c](this[0]);return this}else{J=0;for(var A=K.length;J<A;J++){var F=(J>0?this.clone(true):this).get();ak.fn[c].apply(ak(K[J]),F);G=G.concat(F)}return this.pushStack(G,w,K.selector)}}});ak.extend({clean:function(P,O,N,K){O=O||ac;if(typeof O.createElement==="undefined"){O=O.ownerDocument||O[0]&&O[0].ownerDocument||ac}for(var L=[],G=0,J;(J=P[G])!=null;G++){if(typeof J==="number"){J+=""}if(J){if(typeof J==="string"&&!y.test(J)){J=O.createTextNode(J)}else{if(typeof J==="string"){J=J.replace(E,bn);var w=(o.exec(J)||["",""])[1].toLowerCase(),F=aM[w]||aM._default,A=F[0],c=O.createElement("div");for(c.innerHTML=F[1]+J+F[2];A--;){c=c.lastChild}if(!ak.support.tbody){A=af.test(J);w=w==="table"&&!A?c.firstChild&&c.firstChild.childNodes:F[1]==="<table>"&&!A?c.childNodes:[];for(F=w.length-1;F>=0;--F){ak.nodeName(w[F],"tbody")&&!w[F].childNodes.length&&w[F].parentNode.removeChild(w[F])}}!ak.support.leadingWhitespace&&av.test(J)&&c.insertBefore(O.createTextNode(av.exec(J)[0]),c.firstChild);J=c.childNodes}}if(J.nodeType){L.push(J)}else{L=ak.merge(L,J)}}}if(N){for(G=0;L[G];G++){if(K&&ak.nodeName(L[G],"script")&&(!L[G].type||L[G].type.toLowerCase()==="text/javascript")){K.push(L[G].parentNode?L[G].parentNode.removeChild(L[G]):L[G])}else{L[G].nodeType===1&&L.splice.apply(L,[G+1,0].concat(ak.makeArray(L[G].getElementsByTagName("script"))));N.appendChild(L[G])}}}return L},cleanData:function(N){for(var L,K,G=ak.cache,J=ak.event.special,A=ak.support.deleteExpando,F=0,c;(c=N[F])!=null;F++){if(K=c[ak.expando]){L=G[K];if(L.events){for(var w in L.events){J[w]?ak.event.remove(c,w):aJ(c,w,L.handle)}}if(A){delete c[ak.expando]}else{c.removeAttribute&&c.removeAttribute(ak.expando)}delete G[K]}}}});var j=/z-?index|font-?weight|opacity|zoom|line-?height/i,a7=/alpha\([^)]*\)/,aT=/opacity=([^)]*)/,aH=/float/i,ag=/-([a-z])/ig,bi=/([A-Z])/g,a2=/^-?\d+(?:px)?$/i,aL=/^-?\d/,ai={position:"absolute",visibility:"hidden",display:"block"},C=["Left","Right"],m=["Top","Bottom"],bl=ac.defaultView&&ac.defaultView.getComputedStyle,ao=ak.support.cssFloat?"cssFloat":"styleFloat",z=function(w,c){return c.toUpperCase()};ak.fn.css=function(w,c){return at(this,w,c,true,function(G,A,F){if(F===U){return ak.curCSS(G,A)}if(typeof F==="number"&&!j.test(A)){F+="px"}ak.style(G,A,F)})};ak.extend({style:function(w,c,G){if(!w||w.nodeType===3||w.nodeType===8){return U}if((c==="width"||c==="height")&&parseFloat(G)<0){G=U}var A=w.style||w,F=G!==U;if(!ak.support.opacity&&c==="opacity"){if(F){A.zoom=1;c=parseInt(G,10)+""==="NaN"?"":"alpha(opacity="+G*100+")";w=A.filter||ak.curCSS(w,"filter")||"";A.filter=a7.test(w)?w.replace(a7,c):c}return A.filter&&A.filter.indexOf("opacity=")>=0?parseFloat(aT.exec(A.filter)[1])/100+"":""}if(aH.test(c)){c=ao}c=c.replace(ag,z);if(F){A[c]=G}return A[c]},css:function(w,c,K,G){if(c==="width"||c==="height"){var J,A=c==="width"?C:m;function F(){J=c==="width"?w.offsetWidth:w.offsetHeight;G!=="border"&&ak.each(A,function(){G||(J-=parseFloat(ak.curCSS(w,"padding"+this,true))||0);if(G==="margin"){J+=parseFloat(ak.curCSS(w,"margin"+this,true))||0}else{J-=parseFloat(ak.curCSS(w,"border"+this+"Width",true))||0}})}w.offsetWidth!==0?F():ak.swap(w,ai,F);return Math.max(0,Math.round(J))}return ak.curCSS(w,c,K)},curCSS:function(w,c,J){var F,G=w.style;if(!ak.support.opacity&&c==="opacity"&&w.currentStyle){F=aT.test(w.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return F===""?"1":F}if(aH.test(c)){c=ao}if(!J&&G&&G[c]){F=G[c]}else{if(bl){if(aH.test(c)){c="float"}c=c.replace(bi,"-$1").toLowerCase();G=w.ownerDocument.defaultView;if(!G){return null}if(w=G.getComputedStyle(w,null)){F=w.getPropertyValue(c)}if(c==="opacity"&&F===""){F="1"}}else{if(w.currentStyle){J=c.replace(ag,z);F=w.currentStyle[c]||w.currentStyle[J];if(!a2.test(F)&&aL.test(F)){c=G.left;var A=w.runtimeStyle.left;w.runtimeStyle.left=w.currentStyle.left;G.left=J==="fontSize"?"1em":F||0;F=G.pixelLeft+"px";G.left=c;w.runtimeStyle.left=A}}}}return F},swap:function(w,c,G){var A={};for(var F in c){A[F]=w.style[F];w.style[F]=c[F]}G.call(w);for(F in c){w.style[F]=A[F]}}});if(ak.expr&&ak.expr.filters){ak.expr.filters.hidden=function(w){var c=w.offsetWidth,F=w.offsetHeight,A=w.nodeName.toLowerCase()==="tr";return c===0&&F===0&&!A?true:c>0&&F>0&&!A?false:ak.curCSS(w,"display")==="none"};ak.expr.filters.visible=function(c){return !ak.expr.filters.hidden(c)}}var a5=aI(),aQ=/<script(.|\s)*?\/script>/gi,am=/select|textarea/i,H=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,aD=/=\?(&|$)/,k=/\?/,p=/(\?|&)_=.*?(&|$)/,a=/^(\w+:)?\/\/([^\/?#]+)/,a8=/%20/g,aU=ak.fn.load;ak.fn.extend({load:function(w,c,J){if(typeof w!=="string"){return aU.call(this,w)}else{if(!this.length){return this}}var F=w.indexOf(" ");if(F>=0){var G=w.slice(F,w.length);w=w.slice(0,F)}F="GET";if(c){if(ak.isFunction(c)){J=c;c=null}else{if(typeof c==="object"){c=ak.param(c,ak.ajaxSettings.traditional);F="POST"}}}var A=this;ak.ajax({url:w,type:F,dataType:"html",data:c,complete:function(K,L){if(L==="success"||L==="notmodified"){A.html(G?ak("<div />").append(K.responseText.replace(aQ,"")).find(G):K.responseText)}J&&A.each(J,[K.responseText,L,K])}});return this},serialize:function(){return ak.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ak.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||am.test(this.nodeName)||H.test(this.type))}).map(function(w,c){w=ak(this).val();return w==null?null:ak.isArray(w)?ak.map(w,function(A){return{name:c.name,value:A}}):{name:c.name,value:w}}).get()}});ak.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(w,c){ak.fn[c]=function(A){return this.bind(c,A)}});ak.extend({get:function(w,c,F,A){if(ak.isFunction(c)){A=A||F;F=c;c=null}return ak.ajax({type:"GET",url:w,data:c,success:F,dataType:A})},getScript:function(w,c){return ak.get(w,null,c,"script")},getJSON:function(w,c,A){return ak.get(w,c,A,"json")},post:function(w,c,F,A){if(ak.isFunction(c)){A=A||F;F=c;c={}}return ak.ajax({type:"POST",url:w,data:c,success:F,dataType:A})},ajaxSetup:function(c){ak.extend(ak.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:aR.XMLHttpRequest&&(aR.location.protocol!=="file:"||!aR.ActiveXObject)?function(){return new aR.XMLHttpRequest}:function(){try{return new aR.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(ab){function aa(){Y.success&&Y.success.call(Q,L,T,w);Y.global&&X("ajaxSuccess",[w,Y])}function Z(){Y.complete&&Y.complete.call(Q,w,T);Y.global&&X("ajaxComplete",[w,Y]);Y.global&&!--ak.active&&ak.event.trigger("ajaxStop")}function X(bb,bo){(Y.context?ak(Y.context):ak.event).trigger(bb,bo)}var Y=ak.extend(true,{},ak.ajaxSettings,ab),R,T,L,Q=ab&&ab.context||Y,N=Y.type.toUpperCase();if(Y.data&&Y.processData&&typeof Y.data!=="string"){Y.data=ak.param(Y.data,Y.traditional)}if(Y.dataType==="jsonp"){if(N==="GET"){aD.test(Y.url)||(Y.url+=(k.test(Y.url)?"&":"?")+(Y.jsonp||"callback")+"=?")}else{if(!Y.data||!aD.test(Y.data)){Y.data=(Y.data?Y.data+"&":"")+(Y.jsonp||"callback")+"=?"}}Y.dataType="json"}if(Y.dataType==="json"&&(Y.data&&aD.test(Y.data)||aD.test(Y.url))){R=Y.jsonpCallback||"jsonp"+a5++;if(Y.data){Y.data=(Y.data+"").replace(aD,"="+R+"$1")}Y.url=Y.url.replace(aD,"="+R+"$1");Y.dataType="script";aR[R]=aR[R]||function(bb){L=bb;aa();Z();aR[R]=U;try{delete aR[R]}catch(bo){}c&&c.removeChild(G)}}if(Y.dataType==="script"&&Y.cache===null){Y.cache=false}if(Y.cache===false&&N==="GET"){var J=aI(),A=Y.url.replace(p,"$1_="+J+"$2");Y.url=A+(A===Y.url?(k.test(Y.url)?"&":"?")+"_="+J:"")}if(Y.data&&N==="GET"){Y.url+=(k.test(Y.url)?"&":"?")+Y.data}Y.global&&!ak.active++&&ak.event.trigger("ajaxStart");J=(J=a.exec(Y.url))&&(J[1]&&J[1]!==location.protocol||J[2]!==location.host);if(Y.dataType==="script"&&N==="GET"&&J){var c=ac.getElementsByTagName("head")[0]||ac.documentElement,G=ac.createElement("script");G.src=Y.url;if(Y.scriptCharset){G.charset=Y.scriptCharset}if(!R){var K=false;G.onload=G.onreadystatechange=function(){if(!K&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){K=true;aa();Z();G.onload=G.onreadystatechange=null;c&&G.parentNode&&c.removeChild(G)}}}c.insertBefore(G,c.firstChild);return U}var F=false,w=Y.xhr();if(w){Y.username?w.open(N,Y.url,Y.async,Y.username,Y.password):w.open(N,Y.url,Y.async);try{if(Y.data||ab&&ab.contentType){w.setRequestHeader("Content-Type",Y.contentType)}if(Y.ifModified){ak.lastModified[Y.url]&&w.setRequestHeader("If-Modified-Since",ak.lastModified[Y.url]);ak.etag[Y.url]&&w.setRequestHeader("If-None-Match",ak.etag[Y.url])}J||w.setRequestHeader("X-Requested-With","XMLHttpRequest");w.setRequestHeader("Accept",Y.dataType&&Y.accepts[Y.dataType]?Y.accepts[Y.dataType]+", */*":Y.accepts._default)}catch(ba){}if(Y.beforeSend&&Y.beforeSend.call(Q,w,Y)===false){Y.global&&!--ak.active&&ak.event.trigger("ajaxStop");w.abort();return false}Y.global&&X("ajaxSend",[w,Y]);var W=w.onreadystatechange=function(bo){if(!w||w.readyState===0||bo==="abort"){F||Z();F=true;if(w){w.onreadystatechange=ak.noop}}else{if(!F&&w&&(w.readyState===4||bo==="timeout")){F=true;w.onreadystatechange=ak.noop;T=bo==="timeout"?"timeout":!ak.httpSuccess(w)?"error":Y.ifModified&&ak.httpNotModified(w,Y.url)?"notmodified":"success";var bp;if(T==="success"){try{L=ak.httpData(w,Y.dataType,Y)}catch(bb){T="parsererror";bp=bb}}if(T==="success"||T==="notmodified"){R||aa()}else{ak.handleError(Y,w,T,bp)}Z();bo==="timeout"&&w.abort();if(Y.async){w=null}}}};try{var V=w.abort;w.abort=function(){w&&V.call(w);W("abort")}}catch(P){}Y.async&&Y.timeout>0&&setTimeout(function(){w&&!F&&W("timeout")},Y.timeout);try{w.send(N==="POST"||N==="PUT"||N==="DELETE"?Y.data:null)}catch(O){ak.handleError(Y,w,null,O);Z()}Y.async||W();return w}},handleError:function(w,c,F,A){if(w.error){w.error.call(w.context||w,c,F,A)}if(w.global){(w.context?ak(w.context):ak.event).trigger("ajaxError",[c,w,A])}},active:0,httpSuccess:function(w){try{return !w.status&&location.protocol==="file:"||w.status>=200&&w.status<300||w.status===304||w.status===1223||w.status===0}catch(c){}return false},httpNotModified:function(w,c){var F=w.getResponseHeader("Last-Modified"),A=w.getResponseHeader("Etag");if(F){ak.lastModified[c]=F}if(A){ak.etag[c]=A}return w.status===304||w.status===0},httpData:function(w,c,G){var A=w.getResponseHeader("content-type")||"",F=c==="xml"||!c&&A.indexOf("xml")>=0;w=F?w.responseXML:w.responseText;F&&w.documentElement.nodeName==="parsererror"&&ak.error("parsererror");if(G&&G.dataFilter){w=G.dataFilter(w,c)}if(typeof w==="string"){if(c==="json"||!c&&A.indexOf("json")>=0){w=ak.parseJSON(w)}else{if(c==="script"||!c&&A.indexOf("javascript")>=0){ak.globalEval(w)}}}return w},param:function(w,c){function J(K,L){if(ak.isArray(L)){ak.each(L,function(N,O){c||/\[\]$/.test(K)?F(K,O):J(K+"["+(typeof O==="object"||ak.isArray(O)?N:"")+"]",O)})}else{!c&&L!=null&&typeof L==="object"?ak.each(L,function(N,O){J(K+"["+N+"]",O)}):F(K,L)}}function F(K,L){L=ak.isFunction(L)?L():L;G[G.length]=encodeURIComponent(K)+"="+encodeURIComponent(L)}var G=[];if(c===U){c=ak.ajaxSettings.traditional}if(ak.isArray(w)||w.jquery){ak.each(w,function(){F(this.name,this.value)})}else{for(var A in w){J(A,w[A])}}return G.join("&").replace(a8,"+")}});var bj={},bf=/toggle|show|hide/,a0=/^([+-]=)?([\d+-.]+)(.*)$/,au,I=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];ak.fn.extend({show:function(w,c){if(w||w===0){return this.animate(aF("show",3),w,c)}else{w=0;for(c=this.length;w<c;w++){var G=ak.data(this[w],"olddisplay");this[w].style.display=G||"";if(ak.css(this[w],"display")==="none"){G=this[w].nodeName;var A;if(bj[G]){A=bj[G]}else{var F=ak("<"+G+" />").appendTo("body");A=F.css("display");if(A==="none"){A="block"}F.remove();bj[G]=A}ak.data(this[w],"olddisplay",A)}}w=0;for(c=this.length;w<c;w++){this[w].style.display=ak.data(this[w],"olddisplay")||""}return this}},hide:function(w,c){if(w||w===0){return this.animate(aF("hide",3),w,c)}else{w=0;for(c=this.length;w<c;w++){var A=ak.data(this[w],"olddisplay");!A&&A!=="none"&&ak.data(this[w],"olddisplay",ak.css(this[w],"display"))}w=0;for(c=this.length;w<c;w++){this[w].style.display="none"}return this}},_toggle:ak.fn.toggle,toggle:function(w,c){var A=typeof w==="boolean";if(ak.isFunction(w)&&ak.isFunction(c)){this._toggle.apply(this,arguments)}else{w==null||A?this.each(function(){var F=A?w:ak(this).is(":hidden");ak(this)[F?"show":"hide"]()}):this.animate(aF("toggle",3),w,c)}return this},fadeTo:function(w,c,A){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},w,A)},animate:function(w,c,G,A){var F=ak.speed(c,G,A);if(ak.isEmptyObject(w)){return this.each(F.complete)}return this[F.queue===false?"each":"queue"](function(){var K=ak.extend({},F),L,N=this.nodeType===1&&ak(this).is(":hidden"),J=this;for(L in w){var O=L.replace(ag,z);if(L!==O){w[O]=w[L];delete w[L];L=O}if(w[L]==="hide"&&N||w[L]==="show"&&!N){return K.complete.call(this)}if((L==="height"||L==="width")&&this.style){K.display=ak.css(this,"display");K.overflow=this.style.overflow}if(ak.isArray(w[L])){(K.specialEasing=K.specialEasing||{})[L]=w[L][1];w[L]=w[L][0]}}if(K.overflow!=null){this.style.overflow="hidden"}K.curAnim=ak.extend({},w);ak.each(w,function(Q,P){var V=new ak.fx(J,K,Q);if(bf.test(P)){V[P==="toggle"?N?"show":"hide":P](w)}else{var T=a0.exec(P),W=V.cur(true)||0;if(T){P=parseFloat(T[2]);var R=T[3]||"px";if(R!=="px"){J.style[Q]=(P||1)+R;W=(P||1)/V.cur(true)*W;J.style[Q]=W+R}if(T[1]){P=(T[1]==="-="?-1:1)*P+W}V.custom(W,P,R)}else{V.custom(W,P,"")}}});return true})},stop:function(w,c){var A=ak.timers;w&&this.queue([]);this.each(function(){for(var F=A.length-1;F>=0;F--){if(A[F].elem===this){c&&A[F](true);A.splice(F,1)}}});c||this.dequeue();return this}});ak.each({slideDown:aF("show",1),slideUp:aF("hide",1),slideToggle:aF("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(w,c){ak.fn[w]=function(F,A){return this.animate(c,F,A)}});ak.extend({speed:function(w,c,F){var A=w&&typeof w==="object"?w:{complete:F||!F&&c||ak.isFunction(w)&&w,duration:w,easing:F&&c||c&&!ak.isFunction(c)&&c};A.duration=ak.fx.off?0:typeof A.duration==="number"?A.duration:ak.fx.speeds[A.duration]||ak.fx.speeds._default;A.old=A.complete;A.complete=function(){A.queue!==false&&ak(this).dequeue();ak.isFunction(A.old)&&A.old.call(this)};return A},easing:{linear:function(w,c,F,A){return F+A*w},swing:function(w,c,F,A){return(-Math.cos(w*Math.PI)/2+0.5)*A+F}},timers:[],fx:function(w,c,A){this.options=c;this.elem=w;this.prop=A;if(!c.orig){c.orig={}}}});ak.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(ak.fx.step[this.prop]||ak.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(c){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}return(c=parseFloat(ak.css(this.elem,this.prop,c)))&&c>-10000?c:parseFloat(ak.curCSS(this.elem,this.prop))||0},custom:function(w,c,G){function A(J){return F.step(J)}this.startTime=aI();this.start=w;this.end=c;this.unit=G||this.unit||"px";this.now=this.start;this.pos=this.state=0;var F=this;A.elem=this.elem;if(A()&&ak.timers.push(A)&&!au){au=setInterval(ak.fx.tick,13)}},show:function(){this.options.orig[this.prop]=ak.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());ak(this.elem).show()},hide:function(){this.options.orig[this.prop]=ak.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(w){var c=aI(),G=true;if(w||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var A in this.options.curAnim){if(this.options.curAnim[A]!==true){G=false}}if(G){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;w=ak.data(this.elem,"olddisplay");this.elem.style.display=w?w:this.options.display;if(ak.css(this.elem,"display")==="none"){this.elem.style.display="block"}}this.options.hide&&ak(this.elem).hide();if(this.options.hide||this.options.show){for(var F in this.options.curAnim){ak.style(this.elem,F,this.options.orig[F])}}this.options.complete.call(this.elem)}return false}else{F=c-this.startTime;this.state=F/this.options.duration;w=this.options.easing||(ak.easing.swing?"swing":"linear");this.pos=ak.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||w](this.state,F,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};ak.extend(ak.fx,{tick:function(){for(var w=ak.timers,c=0;c<w.length;c++){w[c]()||w.splice(c--,1)}w.length||ak.fx.stop()},stop:function(){clearInterval(au);au=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){ak.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(ak.expr&&ak.expr.filters){ak.expr.filters.animated=function(c){return ak.grep(ak.timers,function(w){return c===w.elem}).length}}ak.fn.offset="getBoundingClientRect" in ac.documentElement?function(w){var c=this[0];if(w){return this.each(function(G){ak.offset.setOffset(this,w,G)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return ak.offset.bodyOffset(c)}var F=c.getBoundingClientRect(),A=c.ownerDocument;c=A.body;A=A.documentElement;return{top:F.top+(self.pageYOffset||ak.support.boxModel&&A.scrollTop||c.scrollTop)-(A.clientTop||c.clientTop||0),left:F.left+(self.pageXOffset||ak.support.boxModel&&A.scrollLeft||c.scrollLeft)-(A.clientLeft||c.clientLeft||0)}}:function(O){var N=this[0];if(O){return this.each(function(P){ak.offset.setOffset(this,O,P)})}if(!N||!N.ownerDocument){return null}if(N===N.ownerDocument.body){return ak.offset.bodyOffset(N)}ak.offset.initialize();var L=N.offsetParent,J=N,K=N.ownerDocument,F,G=K.documentElement,c=K.body;J=(K=K.defaultView)?K.getComputedStyle(N,null):N.currentStyle;for(var A=N.offsetTop,w=N.offsetLeft;(N=N.parentNode)&&N!==c&&N!==G;){if(ak.offset.supportsFixedPosition&&J.position==="fixed"){break}F=K?K.getComputedStyle(N,null):N.currentStyle;A-=N.scrollTop;w-=N.scrollLeft;if(N===L){A+=N.offsetTop;w+=N.offsetLeft;if(ak.offset.doesNotAddBorder&&!(ak.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(N.nodeName))){A+=parseFloat(F.borderTopWidth)||0;w+=parseFloat(F.borderLeftWidth)||0}J=L;L=N.offsetParent}if(ak.offset.subtractsBorderForOverflowNotVisible&&F.overflow!=="visible"){A+=parseFloat(F.borderTopWidth)||0;w+=parseFloat(F.borderLeftWidth)||0}J=F}if(J.position==="relative"||J.position==="static"){A+=c.offsetTop;w+=c.offsetLeft}if(ak.offset.supportsFixedPosition&&J.position==="fixed"){A+=Math.max(G.scrollTop,c.scrollTop);w+=Math.max(G.scrollLeft,c.scrollLeft)}return{top:A,left:w}};ak.offset={initialize:function(){var w=ac.body,c=ac.createElement("div"),J,F,G,A=parseFloat(ak.curCSS(w,"marginTop",true))||0;ak.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";w.insertBefore(c,w.firstChild);J=c.firstChild;F=J.firstChild;G=J.nextSibling.firstChild.firstChild;this.doesNotAddBorder=F.offsetTop!==5;this.doesAddBorderForTableAndCells=G.offsetTop===5;F.style.position="fixed";F.style.top="20px";this.supportsFixedPosition=F.offsetTop===20||F.offsetTop===15;F.style.position=F.style.top="";J.style.overflow="hidden";J.style.position="relative";this.subtractsBorderForOverflowNotVisible=F.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=w.offsetTop!==A;w.removeChild(c);ak.offset.initialize=ak.noop},bodyOffset:function(w){var c=w.offsetTop,A=w.offsetLeft;ak.offset.initialize();if(ak.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(ak.curCSS(w,"marginTop",true))||0;A+=parseFloat(ak.curCSS(w,"marginLeft",true))||0}return{top:c,left:A}},setOffset:function(w,c,K){if(/static/.test(ak.curCSS(w,"position"))){w.style.position="relative"}var G=ak(w),J=G.offset(),A=parseInt(ak.curCSS(w,"top",true),10)||0,F=parseInt(ak.curCSS(w,"left",true),10)||0;if(ak.isFunction(c)){c=c.call(w,K,J)}K={top:c.top-J.top+A,left:c.left-J.left+F};"using" in c?c.using.call(w,K):G.css(K)}};ak.fn.extend({position:function(){if(!this[0]){return null}var w=this[0],c=this.offsetParent(),F=this.offset(),A=/^body|html$/i.test(c[0].nodeName)?{top:0,left:0}:c.offset();F.top-=parseFloat(ak.curCSS(w,"marginTop",true))||0;F.left-=parseFloat(ak.curCSS(w,"marginLeft",true))||0;A.top+=parseFloat(ak.curCSS(c[0],"borderTopWidth",true))||0;A.left+=parseFloat(ak.curCSS(c[0],"borderLeftWidth",true))||0;return{top:F.top-A.top,left:F.left-A.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||ac.body;c&&!/^body|html$/i.test(c.nodeName)&&ak.css(c,"position")==="static";){c=c.offsetParent}return c})}});ak.each(["Left","Top"],function(w,c){var A="scroll"+c;ak.fn[A]=function(G){var J=this[0],F;if(!J){return null}if(G!==U){return this.each(function(){if(F=q(this)){F.scrollTo(!w?G:ak(F).scrollLeft(),w?G:ak(F).scrollTop())}else{this[A]=G}})}else{return(F=q(J))?"pageXOffset" in F?F[w?"pageYOffset":"pageXOffset"]:ak.support.boxModel&&F.document.documentElement[A]||F.document.body[A]:J[A]}}});ak.each(["Height","Width"],function(w,c){var A=c.toLowerCase();ak.fn["inner"+c]=function(){return this[0]?ak.css(this[0],A,false,"padding"):null};ak.fn["outer"+c]=function(F){return this[0]?ak.css(this[0],A,false,F?"margin":"border"):null};ak.fn[A]=function(F){var G=this[0];if(!G){return F==null?null:this}if(ak.isFunction(F)){return this.each(function(J){var K=ak(this);K[A](F.call(this,J,K[A]()))})}return"scrollTo" in G&&G.document?G.document.compatMode==="CSS1Compat"&&G.document.documentElement["client"+c]||G.document.body["client"+c]:G.nodeType===9?Math.max(G.documentElement["client"+c],G.body["scroll"+c],G.documentElement["scroll"+c],G.body["offset"+c],G.documentElement["offset"+c]):F===U?ak.css(G,A):this.css(A,typeof F==="string"?F:F+"px")}});aR.jQuery=aR.$=ak})(window);(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();var tabListActiveRideId;var tabListActiveRefreshTimer;var updateCountRefreshTimer;var ridePlan;var rideRequests=[];var ridePlans=[];var rides=[];var unratedRidePlans=[];var submitted_rides=[];var parseOffer;var parseSearch;var parseUnmatchedOffer;var parseUnmatchedSearch;var user;var pass;var DimitrisLocal="localhost:3000";var DimitrisRemote="168.144.202.152:3000";var PeerMenager="168.144.202.152:3002";var usermode=0;var username="";var password="";var DRIVERMODE=0;var RIDERMODE=1;var offerAccessCounter=0;function slidingUITabListClick(a){clearInterval(tabListActiveRefreshTimer);var b=$(a).next(".slide_0");$(a).toggleClass("active");$(a).removeClass("previous");if($(".previous").is(".active")){$(".previous").next(".slide_0").slideToggle("slow");$(".previous").toggleClass("active");$(".previous").removeClass("previous")}if($(a).is(".active")){$(a).addClass("previous");fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches(a.id,b);tabListActiveRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('"+a.id+"', false)",15000);tabListActiveRideId=a.id;b.slideToggle("slow",function(){heightWindowDiffBottom=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop()+$("#"+tabListActiveRideId).parent().height()-window.innerHeight;heightWindowDiffTop=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop();scrollDiff=0;if(heightWindowDiffTop<0){scrollDiff=heightWindowDiffTop}else{if(heightWindowDiffBottom>0){scrollDiff=heightWindowDiffBottom}}scrollTop=0;if($("html,body").scrollTop()+scrollDiff>$("#"+tabListActiveRideId).offset().top){scrollTop=$("#"+tabListActiveRideId).offset().top}else{scrollTop=$("html,body").scrollTop()+scrollDiff}if(scrollDiff!=0){$("html,body").animate({scrollTop:scrollTop},"slow")}})}else{b.slideToggle("slow")}return false}function slidingUIComplTripsTabListClick(a){clearInterval(tabListActiveRefreshTimer);var b=$(a).next(".slide_0");$(a).toggleClass("active");$(a).removeClass("previous");if($(".previous").is(".active")){$(".previous").next(".slide_0").slideToggle("slow");$(".previous").toggleClass("active");$(".previous").removeClass("previous")}if($(a).is(".active")){$(a).addClass("previous");fokus.openride.mobclient.controller.modules.modulemanager.receiveInactiveMatches(a.id,b);tabListActiveRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('"+a.id+"', false)",20000);tabListActiveRideId=a.id;b.slideToggle("slow",function(){heightWindowDiffBottom=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop()+$("#"+tabListActiveRideId).parent().height()-window.innerHeight;heightWindowDiffTop=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop();scrollDiff=0;if(heightWindowDiffTop<0){scrollDiff=heightWindowDiffTop}else{if(heightWindowDiffBottom>0){scrollDiff=heightWindowDiffBottom}}if(scrollDiff!=0){$("html,body").animate({scrollTop:$("html,body").scrollTop()+scrollDiff},"slow")}})}else{b.slideToggle("slow")}return false}function setupUITabList(){$(".linkslide_0").click(function(){slidingUITabListClick(this)})}function setupCompletedTripUITabList(){$(".linkslide_0").click(function(){slidingUIComplTripsTabListClick(this)})}function StringBuilder(a){this.strings=new Array("");this.append(a)}StringBuilder.prototype.append=function(a){if(a){this.strings.push(a)}};StringBuilder.prototype.clear=function(){this.strings.length=1};StringBuilder.prototype.toString=function(){return this.strings.join("")};(function(d){d.keyCode={BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38};var b=d.fn.remove;var c=d.browser.mozilla&&(parseFloat(d.browser.version)<1.9);d.ui={version:"@VERSION",plugin:{add:function(g,h,k){var j=d.ui[g].prototype;for(var f in k){j.plugins[f]=j.plugins[f]||[];j.plugins[f].push([h,k[f]])}},call:function(f,h,g){var k=f.plugins[h];if(!k){return}for(var j=0;j<k.length;j++){if(f.options[k[j][0]]){k[j][1].apply(f.element,g)}}}},cssCache:{},css:function(f){if(d.ui.cssCache[f]){return d.ui.cssCache[f]}var g=d('<div class="ui-gen">').addClass(f).css({position:"absolute",top:"-5000px",left:"-5000px",display:"block"}).appendTo("body");d.ui.cssCache[f]=!!((!(/auto|default/).test(g.css("cursor"))||(/^[1-9]/).test(g.css("height"))||(/^[1-9]/).test(g.css("width"))||!(/none/).test(g.css("backgroundImage"))||!(/transparent|rgba\(0, 0, 0, 0\)/).test(g.css("backgroundColor"))));try{d("body").get(0).removeChild(g.get(0))}catch(h){}return d.ui.cssCache[f]},hasScroll:function(j,g){if(d(j).css("overflow")=="hidden"){return false}var f=(g&&g=="left")?"scrollLeft":"scrollTop",h=false;if(j[f]>0){return true}j[f]=1;h=(j[f]>0);j[f]=0;return h}};d.fn.extend({remove:function(){d("*",this).add(this).each(function(){d(this).triggerHandler("remove")});return b.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},ariaRole:function(f){return(f!==undefined?this.attr("role",c?"wairole:"+f:f):(this.attr("role")||"").replace(/^wairole:/,""))},ariaState:function(g,f){return(f!==undefined?this.each(function(h,j){(c?j.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+g,f):d(j).attr("aria-"+g,f))}):this.attr(c?"aaa:"+g:"aria-"+g))}});d.extend(d.expr[":"],{data:function(g,h,f){return d.data(g,f[3])},tabbable:function(h,j,g){var k=h.nodeName.toLowerCase();var f=function(l){function n(o){var p=o.style;return(p.display!="none"&&p.visibility!="hidden")}var m=n(l);(m&&d.each(d.dir(l,"parentNode"),function(){return(m=n(this))}));return m};return(h.tabIndex>=0&&(("a"==k&&h.href)||(/input|select|textarea|button/.test(k)&&"hidden"!=h.type&&!h.disabled))&&f(h))}});function a(j,k,l,h){function g(n){var m=d[j][k][n]||[];return(typeof m=="string"?m.split(/,?\s+/):m)}var f=g("getter");if(h.length==1&&typeof h[0]=="string"){f=f.concat(g("getterSetter"))}return(d.inArray(l,f)!=-1)}d.widget=function(g,f){var h=g.split(".")[0];g=g.split(".")[1];d.fn[g]=function(m){var k=(typeof m=="string"),l=Array.prototype.slice.call(arguments,1);if(k&&m.substring(0,1)=="_"){return this}if(k&&a(h,g,m,l)){var j=d.data(this[0],g);return(j?j[m].apply(j,l):undefined)}return this.each(function(){var n=d.data(this,g);(!n&&!k&&d.data(this,g,new d[h][g](this,m)));(n&&k&&d.isFunction(n[m])&&n[m].apply(n,l))})};d[h]=d[h]||{};d[h][g]=function(l,k){var j=this;this.widgetName=g;this.widgetEventPrefix=d[h][g].eventPrefix||g;this.widgetBaseClass=h+"-"+g;this.options=d.extend({},d.widget.defaults,d[h][g].defaults,d.metadata&&d.metadata.get(l)[g],k);this.element=d(l).bind("setData."+g,function(o,m,n){return j._setData(m,n)}).bind("getData."+g,function(n,m){return j._getData(m)}).bind("remove",function(){return j.destroy()});this._init()};d[h][g].prototype=d.extend({},d.widget.prototype,f);d[h][g].getterSetter="option"};d.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName)},option:function(h,j){var g=h,f=this;if(typeof h=="string"){if(j===undefined){return this._getData(h)}g={};g[h]=j}d.each(g,function(k,l){f._setData(k,l)})},_getData:function(f){return this.options[f]},_setData:function(f,g){this.options[f]=g;if(f=="disabled"){this.element[g?"addClass":"removeClass"](this.widgetBaseClass+"-disabled")}},enable:function(){this._setData("disabled",false)},disable:function(){this._setData("disabled",true)},_trigger:function(g,j,h){var f=(g==this.widgetEventPrefix?g:this.widgetEventPrefix+g);j=j||d.event.fix({type:f,target:this.element[0]});return this.element.triggerHandler(f,[j,h],this.options[g])}};d.widget.defaults={disabled:false};d.ui.mouse={_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(g){return f._mouseDown(g)}).bind("click."+this.widgetName,function(g){if(f._preventClickEvent){f._preventClickEvent=false;return false}});if(d.browser.msie){this._mouseUnselectable=this.element.attr("unselectable");this.element.attr("unselectable","on")}this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);(d.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable))},_mouseDown:function(h){(this._mouseStarted&&this._mouseUp(h));this._mouseDownEvent=h;var g=this,j=(h.which==1),f=(typeof this.options.cancel=="string"?d(h.target).parents().add(h.target).filter(this.options.cancel).length:false);if(!j||f||!this._mouseCapture(h)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)){this._mouseStarted=(this._mouseStart(h)!==false);if(!this._mouseStarted){h.preventDefault();return true}}this._mouseMoveDelegate=function(k){return g._mouseMove(k)};this._mouseUpDelegate=function(k){return g._mouseUp(k)};d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);return false},_mouseMove:function(f){if(d.browser.msie&&!f.button){return this._mouseUp(f)}if(this._mouseStarted){this._mouseDrag(f);return false}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,f)!==false);(this._mouseStarted?this._mouseDrag(f):this._mouseUp(f))}return !this._mouseStarted},_mouseUp:function(f){d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=true;this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return(Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance)},_mouseDelayMet:function(f){return this.mouseDelayMet},_mouseStart:function(f){},_mouseDrag:function(f){},_mouseStop:function(f){},_mouseCapture:function(f){return true}};d.ui.mouse.defaults={cancel:null,distance:1,delay:0}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(a){a.widget("ui.tabs",{_init:function(){this._tabify(true)},_setData:function(b,c){if((/^selected/).test(b)){this.select(c)}else{this.options[b]=c;this._tabify()}},length:function(){return this.$tabs.length},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+a.data(b)},ui:function(c,b){return{options:this.options,tab:c,panel:b,index:this.$tabs.index(c)}},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie="ui-tabs-"+a.data(this.element[0]));return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_tabify:function(q){this.$lis=a("li:has(a[href])",this.element);this.$tabs=this.$lis.map(function(){return a("a",this)[0]});this.$panels=a([]);var r=this,c=this.options;this.$tabs.each(function(t,o){if(o.hash&&o.hash.replace("#","")){r.$panels=r.$panels.add(r._sanitizeSelector(o.hash))}else{if(a(o).attr("href")!="#"){a.data(o,"href.tabs",o.href);a.data(o,"load.tabs",o.href);var v=r._tabId(o);o.href="#"+v;var u=a("#"+v);if(!u.length){u=a(c.panelTemplate).attr("id",v).addClass(c.panelClass).insertAfter(r.$panels[t-1]||r.element);u.data("destroy.tabs",true)}r.$panels=r.$panels.add(u)}else{c.disabled.push(t+1)}}});if(q){this.element.addClass(c.navClass);this.$panels.addClass(c.panelClass);if(c.selected===undefined){if(location.hash){this.$tabs.each(function(t,o){if(o.hash==location.hash){c.selected=t;return false}})}else{if(c.cookie){var k=parseInt(r._cookie(),10);if(k&&r.$tabs[k]){c.selected=k}}else{if(r.$lis.filter("."+c.selectedClass).length){c.selected=r.$lis.index(r.$lis.filter("."+c.selectedClass)[0])}}}}c.selected=c.selected===null||c.selected!==undefined?c.selected:0;c.disabled=a.unique(c.disabled.concat(a.map(this.$lis.filter("."+c.disabledClass),function(t,o){return r.$lis.index(t)}))).sort();if(a.inArray(c.selected,c.disabled)!=-1){c.disabled.splice(a.inArray(c.selected,c.disabled),1)}this.$panels.addClass(c.hideClass);this.$lis.removeClass(c.selectedClass);if(c.selected!==null){this.$panels.eq(c.selected).removeClass(c.hideClass);var f=[c.selectedClass];if(c.deselectable){f.push(c.deselectableClass)}this.$lis.eq(c.selected).addClass(f.join(" "));var l=function(){r._trigger("show",null,r.ui(r.$tabs[c.selected],r.$panels[c.selected]))};if(a.data(this.$tabs[c.selected],"load.tabs")){this.load(c.selected,l)}else{l()}}a(window).bind("unload",function(){r.$tabs.unbind(".tabs");r.$lis=r.$tabs=r.$panels=null})}else{c.selected=this.$lis.index(this.$lis.filter("."+c.selectedClass)[0])}if(c.cookie){this._cookie(c.selected,c.cookie)}for(var h=0,p;p=this.$lis[h];h++){a(p)[a.inArray(h,c.disabled)!=-1&&!a(p).hasClass(c.selectedClass)?"addClass":"removeClass"](c.disabledClass)}if(c.cache===false){this.$tabs.removeData("cache.tabs")}var b,j;if(c.fx){if(c.fx.constructor==Array){b=c.fx[0];j=c.fx[1]}else{b=j=c.fx}}function d(o,t){o.css({display:""});if(a.browser.msie&&t.opacity){o[0].style.removeAttribute("filter")}}var m=j?function(o,t){t.animate(j,j.duration||"normal",function(){t.removeClass(c.hideClass);d(t,j);r._trigger("show",null,r.ui(o,t[0]))})}:function(o,t){t.removeClass(c.hideClass);r._trigger("show",null,r.ui(o,t[0]))};var n=b?function(t,o,u){o.animate(b,b.duration||"normal",function(){o.addClass(c.hideClass);d(o,b);if(u){m(t,u,o)}})}:function(t,o,u){o.addClass(c.hideClass);if(u){m(t,u)}};function g(u,w,o,v){var t=[c.selectedClass];if(c.deselectable){t.push(c.deselectableClass)}w.addClass(t.join(" ")).siblings().removeClass(t.join(" "));n(u,o,v)}this.$tabs.unbind(".tabs").bind(c.event+".tabs",function(){var v=a(this).parents("li:eq(0)"),o=r.$panels.filter(":visible"),u=a(r._sanitizeSelector(this.hash));if((v.hasClass(c.selectedClass)&&!c.deselectable)||v.hasClass(c.disabledClass)||a(this).hasClass(c.loadingClass)||r._trigger("select",null,r.ui(this,u[0]))===false){this.blur();return false}c.selected=r.$tabs.index(this);if(c.deselectable){if(v.hasClass(c.selectedClass)){r.options.selected=null;v.removeClass([c.selectedClass,c.deselectableClass].join(" "));r.$panels.stop();n(this,o);this.blur();return false}else{if(!o.length){r.$panels.stop();var t=this;r.load(r.$tabs.index(this),function(){v.addClass([c.selectedClass,c.deselectableClass].join(" "));m(t,u)});this.blur();return false}}}if(c.cookie){r._cookie(c.selected,c.cookie)}r.$panels.stop();if(u.length){var t=this;r.load(r.$tabs.index(this),o.length?function(){g(t,v,o,u)}:function(){v.addClass(c.selectedClass);m(t,u)})}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(a.browser.msie){this.blur()}return false});if(c.event!="click"){this.$tabs.bind("click.tabs",function(){return false})}},add:function(f,d,c){if(c==undefined){c=this.$tabs.length}var h=this.options;var k=a(h.tabTemplate.replace(/#\{href\}/g,f).replace(/#\{label\}/g,d));k.data("destroy.tabs",true);var j=f.indexOf("#")==0?f.replace("#",""):this._tabId(a("a:first-child",k)[0]);var g=a("#"+j);if(!g.length){g=a(h.panelTemplate).attr("id",j).addClass(h.hideClass).data("destroy.tabs",true)}g.addClass(h.panelClass);if(c>=this.$lis.length){k.appendTo(this.element);g.appendTo(this.element[0].parentNode)}else{k.insertBefore(this.$lis[c]);g.insertBefore(this.$panels[c])}h.disabled=a.map(h.disabled,function(m,l){return m>=c?++m:m});this._tabify();if(this.$tabs.length==1){k.addClass(h.selectedClass);g.removeClass(h.hideClass);var b=a.data(this.$tabs[0],"load.tabs");if(b){this.load(c,b)}}this._trigger("add",null,this.ui(this.$tabs[c],this.$panels[c]))},remove:function(b){var d=this.options,f=this.$lis.eq(b).remove(),c=this.$panels.eq(b).remove();if(f.hasClass(d.selectedClass)&&this.$tabs.length>1){this.select(b+(b+1<this.$tabs.length?1:-1))}d.disabled=a.map(a.grep(d.disabled,function(h,g){return h!=b}),function(h,g){return h>=b?--h:h});this._tabify();this._trigger("remove",null,this.ui(f.find("a")[0],c[0]))},enable:function(b){var c=this.options;if(a.inArray(b,c.disabled)==-1){return}var d=this.$lis.eq(b).removeClass(c.disabledClass);if(a.browser.safari){d.css("display","inline-block");setTimeout(function(){d.css("display","block")},0)}c.disabled=a.grep(c.disabled,function(g,f){return g!=b});this._trigger("enable",null,this.ui(this.$tabs[b],this.$panels[b]))},disable:function(c){var b=this,d=this.options;if(c!=d.selected){this.$lis.eq(c).addClass(d.disabledClass);d.disabled.push(c);d.disabled.sort();this._trigger("disable",null,this.ui(this.$tabs[c],this.$panels[c]))}},select:function(b){if(typeof b=="string"){b=this.$tabs.index(this.$tabs.filter("[href$="+b+"]")[0])}this.$tabs.eq(b).trigger(this.options.event+".tabs")},load:function(h,m){var n=this,d=this.options,f=this.$tabs.eq(h),l=f[0],j=m==undefined||m===false,b=f.data("load.tabs");m=m||function(){};if(!b||!j&&a.data(l,"cache.tabs")){m();return}var p=function(o){var q=a(o),r=q.find("*:last");return r.length&&r.is(":not(img)")&&r||q};var c=function(){n.$tabs.filter("."+d.loadingClass).removeClass(d.loadingClass).each(function(){if(d.spinner){p(this).parent().html(p(this).data("label.tabs"))}});n.xhr=null};if(d.spinner){var k=p(l).html();p(l).wrapInner("<em></em>").find("em").data("label.tabs",k).html(d.spinner)}var g=a.extend({},d.ajaxOptions,{url:b,success:function(q,o){a(n._sanitizeSelector(l.hash)).html(q);c();if(d.cache){a.data(l,"cache.tabs",true)}n._trigger("load",null,n.ui(n.$tabs[h],n.$panels[h]));try{d.ajaxOptions.success(q,o)}catch(t){}m()}});if(this.xhr){this.xhr.abort();c()}f.addClass(d.loadingClass);n.xhr=a.ajax(g)},url:function(c,b){this.$tabs.eq(c).removeData("cache.tabs").data("load.tabs",b)},destroy:function(){var b=this.options;this.element.unbind(".tabs").removeClass(b.navClass).removeData("tabs");this.$tabs.each(function(){var c=a.data(this,"href.tabs");if(c){this.href=c}var d=a(this).unbind(".tabs");a.each(["href","load","cache"],function(f,g){d.removeData(g+".tabs")})});this.$lis.add(this.$panels).each(function(){if(a.data(this,"destroy.tabs")){a(this).remove()}else{a(this).removeClass([b.selectedClass,b.deselectableClass,b.disabledClass,b.panelClass,b.hideClass].join(" "))}});if(b.cookie){this._cookie(null,b.cookie)}}});a.extend(a.ui.tabs,{version:"@VERSION",getter:"length",defaults:{deselectable:false,event:"click",disabled:[],cookie:null,spinner:"Loading&#8230;",cache:false,idPrefix:"ui-tabs-",ajaxOptions:null,fx:null,tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>',panelTemplate:"<div></div>",navClass:"ui-tabs-nav",selectedClass:"ui-tabs-selected",deselectableClass:"ui-tabs-deselectable",disabledClass:"ui-tabs-disabled",panelClass:"ui-tabs-panel",hideClass:"ui-tabs-hide",loadingClass:"ui-tabs-loading"}});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(c,g){g=g||false;var b=this,f=this.options.selected;function h(){b.rotation=setInterval(function(){f=++f<b.$tabs.length?f:0;b.select(f)},c)}function d(j){if(!j||j.clientX){clearInterval(b.rotation)}}if(c){h();if(!g){this.$tabs.bind(this.options.event+".tabs",d)}else{this.$tabs.bind(this.options.event+".tabs",function(){d();f=b.options.selected;h()})}}else{d();this.$tabs.unbind(this.options.event+".tabs",d)}}})})(jQuery);if(typeof Namespace=="undefined"){var Namespace={}}if(!Namespace.Manager){Namespace.Manager={}}Namespace.Manager={Register:function(namespace){namespace=namespace.split(".");if(!window[namespace[0]]){window[namespace[0]]={}}var strFullNamespace=namespace[0];for(var i=1;i<namespace.length;i++){strFullNamespace+="."+namespace[i];eval("if(!window."+strFullNamespace+")window."+strFullNamespace+"={};")}}};Namespace.Manager.Register("fokus.openride.mobclient.controller");Namespace.Manager.Register("fokus.openride.mobclient.controller.modules");fokus.openride.mobclient.controller.serverconnector=function(){callbackWrapper=function(a,b){if(typeof a=="string"&&a.indexOf("loginForm")!=-1){location.href="./"}else{if(typeof b=="function"){b(a,"error")}}};return{baseURI:"",POST:function(b,c,d,f,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,data:JSON.stringify(d),success:function(g){callbackWrapper(g,f)},error:function(g){callbackWrapper(g,a)},type:"POST"})},GET:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(f){callbackWrapper(f,d)},error:function(f){callbackWrapper(f,a)},type:"GET"})},PUT:function(b,c,d,f,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,data:JSON.stringify(d),success:function(g){callbackWrapper(g,f)},error:function(g){callbackWrapper(g,a)},type:"PUT"})},PUTaction:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(f){callbackWrapper(f,d)},error:function(f){callbackWrapper(f,a)},type:"PUT"})},DELETE:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(f){callbackWrapper(f,d)},error:function(f){callbackWrapper(f,a)},type:"DELETE"})}}}();fokus.openride.mobclient.controller.modules.nativemodule=function(){var a;function d(f){a=f}function b(f){a=new Object();a.coords={};a.coords.latitude=f.latitude;a.coords.longitude=f.longitude}function c(){return null}return{getUserLocation:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(d,c)}else{if(window.google&&google.gears){try{var f=google.gears.factory.create("beta.geolocation");f.getCurrentPosition(b,c,{enableHighAccuracy:true,gearsRequestAddress:true})}catch(g){return null}}else{return null}}return a}}}();fokus.openride.mobclient.controller.modules.mapmanager=function(){var J=fokus.openride.mobclient.controller.serverconnector;var F;var r;var ad;var V;var a;var W;var f;var K=17;var Y="../img/defaultpinicon.png";var D=40;var B=40;var X="../img/thumbshadow.png";var ag="../img/startred.png";var af=40;var ac=40;var b="../img/zielred.png";var m=40;var k=40;var y="../img/mapicon2.png";var A=21;var z=30;var S="../img/flagrdicon.png";var Q=20;var P=15;var v="../img/waypoint.png";var o=28;var n=40;var N=21;var M=30;var w=23;var u=17;var L=["../img/thumbcol1.png","../img/thumbcol2.png","../img/thumbcol3.png","../img/thumbcol4.png","../img/thumbcol5.png","../img/thumbcol6.png"];var H=["../img/flagcol1.png","../img/flagcol2.png","../img/flagcol3.png","../img/flagcol4.png","../img/flagcol5.png","../img/flagcol6.png"];var aa=new Array();var U=0;var ae=0;var O=1;var l=2;var C;var Z;var q;var h;var p;var G;var t="";var I="";var c="";var E=false;var j=1;var T=new google.maps.LatLng(47.66029,9.432982);return{username:"user",currentFormattedAddress:"1",revgeocodedAddr:"",updateAddressInfo:function(ai){var ah=this;var aj=document.getElementById(ai);if(r){r.geocode({latLng:W},function(al,ak){if(ak==google.maps.GeocoderStatus.OK){if(al[0]){aj.value=al[0].formatted_address;ah.currentFormattedAddress=al[0].formatted_address}else{aj.value="No address Found!   "}}else{aj.value="No address Found!   "}})}},initialize:function(ai,ak,ah){f=ak;var al=this;r=new google.maps.Geocoder();W=ah;var aj={zoom:13,center:W,disableDefaultUI:true,mapTypeControl:false,navigationControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDoubleClickZoom:true};F=new google.maps.Map(document.getElementById(ai),aj);if(U==ae){al.updateAddressInfo(ak);g("default",W);google.maps.event.addListener(ad,"dragstart",function(){});google.maps.event.addListener(ad,"dragend",function(){R(ad.getPosition());al.updateAddressInfo(ak)});google.maps.event.addListener(ad,"click",function(){F.setZoom(15)});google.maps.event.addListener(F,"click",function(am){R(am.latLng);al.updateAddressInfo(ak)})}if(U==O){this.drawSimpleRoute()}else{if(U==l){this.drawRouteWithViaPts()}}},setMapMode:function(ah){if(ah>=0){U=ah}else{}},setRoutePath:function(ah){C=ah},setViaStartPoints:function(ah){h=ah},resetViaStartPoints:function(){h=""},setViaDestPoints:function(ah){p=ah},resetViaDestPoints:function(){p=""},getRoutePath:function(){return C},getViaStartPoints:function(){return viaptstartlatlns},getViaDestPoints:function(){return p},fitToBounds:function(ah){F.fitBounds(ah)},parsesimpleroutecoords:function(ai){var ah=new Array();var aj=$(ai).find("hasroute").text();if(aj!=null&&aj!="undefined"&&typeof aj!="undefined"){if(aj=="true"){$(ai).find("coordinates").each(function(){var ap=$(this).text();var au=ap.split(" ");for(var ao=0;ao<au.length-1;ao++){var ak=au[ao];var am=ak.indexOf(",");var al=ak.substr(0,am);var aq=ak.substr(am+1,ak.length-am+1);var at=parseFloat(al);var ar=parseFloat(aq);var an=new google.maps.LatLng(at,ar);ah.push(an)}});return ah}else{fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"There was no route found.");return false}}},getPartialRoutes:function(){c=new Array();E=true;if(I.length&&I.length>0){for(var ah=0;ah<I.length;ah++){var aj="";var ai="";var ao="";var ak="";var an="";if(ah==0){an=I[ah].getPosition();aj=C[0].lat();ai=C[0].lng();ao=an.lat();ak=an.lng()}else{if(ah!=0&&ah==I.length-1){an=I[ah].getPosition();aj=an.lat();ai=an.lng();ao=C[C.length-1].lat();ak=C[C.length-1].lng()}else{var am=I[ah-1].getPosition();aj=am.lat();ai=am.lng();an=I[ah].getPosition();ao=an.lat();ak=an.lng()}}var al=this;J.GET("/OpenRideServer-RS/resources/users/"+this.username+"/routes/new,"+aj+","+ai+","+ao+","+ak,false,function(aq){var ap=al.parsesimpleroutecoords(aq);if(ap!=false){c.push(ap)}},function(){E=false;alert("The route could not be generated with this waypoint!")})}if(I.length==1){an=I[0].getPosition();aj=an.lat();ai=an.lng();ao=C[C.length-1].lat();ak=C[C.length-1].lng()}var al=this;J.GET("/OpenRideServer-RS/resources/users/"+this.username+"/routes/new,"+aj+","+ai+","+ao+","+ak,false,function(aq){var ap=al.parsesimpleroutecoords(aq);if(ap!=false){c.push(ap)}},function(){E=false;alert("The route could not be generated with this waypoint!")})}},drawPartialRoutes:function(an){if(E){G=new Array();for(var al=0;al<an.length;al++){var am=an[al];for(var ak=0;ak<am.length;ak++){G.push(am[ak])}}t.setMap(null);t.setPath(G);t.setMap(F);var ai=new google.maps.LatLngBounds();var ah=G.length;for(var aj=0;aj<ah;aj++){ai.extend(G[aj])}F.fitBounds(ai)}else{}},addCorrectionPoint:function(){var am="";am=C[C.length-2];var aj=new google.maps.MarkerImage(v,new google.maps.Size(o,n),new google.maps.Point(0,0),new google.maps.Point(o/2+2,(n)));var al=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var ai=new google.maps.Marker({position:am,map:F,shadow:al,icon:aj,draggable:true,clickable:false});var ah=ai.getPosition();google.maps.event.addListener(ai,"dragstart",function(){ah=ai.getPosition()});var ak=this;google.maps.event.addListener(ai,"dragend",function(){ak.getPartialRoutes();if(E){R(ai.getPosition());ak.drawPartialRoutes(c)}else{ai.setPosition(ah)}});if(I==""){I=new Array()}I.push(ai)},drawSimpleRoute:function(){if(C!="undefined"&&typeof C!="undefined"){if(C.length>=2){t=new google.maps.Polyline({path:C,strokeColor:"#96bd0d",strokeOpacity:1,strokeWeight:2});g("mainstart",C[0]);g("maindst",C[C.length-1]);var aj=new google.maps.LatLngBounds();var ah=C.length;for(var ai=0;ai<ah;ai++){aj.extend(C[ai])}F.fitBounds(aj);t.setMap(F)}}else{fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"no route (in draw)")}},drawRouteWithViaPts:function(){this.drawSimpleRoute();if(h!="undefined"&&typeof h!="undefined"){for(var am=0;am<h.length;am++){var ai=new google.maps.MarkerImage(L[(am%L.length)],new google.maps.Size(N,M),new google.maps.Point(0,0),new google.maps.Point(5,M));var ah=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var al=new google.maps.Marker({position:h[am],map:F,shadow:ah,icon:ai,draggable:false,clickable:false,zIndex:am});aa.push(al)}}else{}if(p!="undefined"&&typeof p!="undefined"){for(var am=0;am<p.length;am++){var aj=new google.maps.MarkerImage(H[(am%H.length)],new google.maps.Size(w,u),new google.maps.Point(0,0),new google.maps.Point(5,u));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var an=new google.maps.Marker({position:p[am],map:F,shadow:ak,icon:aj,draggable:false,clickable:false,zIndex:am});aa.push(an)}}else{}},resetRiderMarkers:function(){for(var ah=0;ah<aa.length;ah++){aa[ah].setMap(null)}this.resetViaStartPoints();this.resetViaDestPoints();aa.length=0},geocodeAddressFromInput:function(ai){var aj=this;var ah=document.getElementById(ai).value;if(!r){r=new google.maps.Geocoder()}if(r){r.geocode({address:ah},function(al,ak){if(ak==google.maps.GeocoderStatus.OK){W=al[0].geometry.location;R(W);aj.updateAddressInfo(ai)}else{ah="Geocode was not successful for the following reason: "+ak}})}},insertRevGeocodedAddr:function(ah,ai){var aj=new google.maps.LatLng(ah.coords.latitude,ah.coords.longitude);r=new google.maps.Geocoder();if(r){r.geocode({latLng:aj},function(al,ak){if(ak==google.maps.GeocoderStatus.OK){if(al[0]){document.getElementById(ai).innerHTML="Location:"+al[0].formatted_address;document.getElementById(ai).latln=al[0].geometry.location.lat()+","+al[0].geometry.location.lng()}}else{document.getElementById(ai).innerHTML="Location: undetermined!";document.getElementById(ai).latln="none"}})}document.getElementById(ai).innerHTML="Location: undetermined!";document.getElementById(ai).latln="none"},setRevGeocodedAddr:function(ak,ai){var aj=this;var ah=new google.maps.LatLng(ak,ai);if(!r){r=new google.maps.Geocoder()}if(r){r.geocode({latLng:ah},function(am,al){if(al==google.maps.GeocoderStatus.OK){if(am[0]){aj.revgeocodedAddr=am[0].formatted_address}}else{aj.revgeocodedAddr="Location: undetermined!"}})}aj.revgeocodedAddr="Location: undetermined!"},getLocationFromString:function(ah){if(!r){r=new google.maps.Geocoder()}if(r){r.geocode({address:ah},function(aj,ai){if(ai==google.maps.GeocoderStatus.OK){return aj[0].geometry.location}else{return T}})}},getCenterPosition:function(){return W},getLocationLatFromString:function(ah){this.getLocationFromString(ah).lat()},getLocationLonFromString:function(ah){this.getLocationFromString(ah).lng()},setMapToLocation:function(ah){R(ah);this.updateAddressInfo(f)},zoomIn:function(){var ah=F.getZoom();if(ah<K){F.setZoom(ah+1)}},zoomOut:function(){var ah=F.getZoom();if(ah>0){F.setZoom(ah-1)}}};function d(aj){var ai=T;try{J.GET("/OpenRideServer-RS/resources/users/"+fokus.openride.mobclient.controller.modules.mapmanager.username+"/routes/validate/"+aj.lat()+","+aj.lng(),false,function(an){var ao=aj.lat();var am=aj.lng();ai=new google.maps.LatLng(ao,am)},function(am,an,ao){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(am,an,ao,"The coordinates were able to validate unfortunately not be delivered. Error: "+an)})}catch(al){}finally{var ak=aj.lat();var ah=aj.lng();ai=new google.maps.LatLng(ak,ah);return ai}}function g(ai,ah){if(ai=="default"){var aj=new google.maps.MarkerImage(Y,new google.maps.Size(D,B),new google.maps.Point(0,0),new google.maps.Point(0,(B)));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));ad=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,draggable:true,clickable:true,zIndex:5})}else{if(ai=="mainstart"){var aj=new google.maps.MarkerImage(ag,new google.maps.Size(af,ac),new google.maps.Point(0,0),new google.maps.Point(af/2,ac));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(5,35));V=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,draggable:false,clickable:false,zIndex:100});ad=V}else{if(ai=="maindst"){var aj=new google.maps.MarkerImage(b,new google.maps.Size(m,k),new google.maps.Point(0,0),new google.maps.Point((m/2),k));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));a=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,draggable:false,clickable:false,zIndex:100})}else{if(ai=="viastart"){var aj=new google.maps.MarkerImage(y,new google.maps.Size(A,z),new google.maps.Point(0,0),new google.maps.Point(0,(z)));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));V=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,title:"test_username",draggable:false,clickable:false,zIndex:10});ad=V}else{if(ai=="viadst"){var aj=new google.maps.MarkerImage(S,new google.maps.Size(Q,P),new google.maps.Point(0,0),new google.maps.Point(0,(P)));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));a=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,draggable:false,clickable:false,zIndex:10})}}}}}}function ab(ah){var ai;var aj=new google.maps.MarkerImage(y,new google.maps.Size(A,z),new google.maps.Point(0,0),new google.maps.Point(0,(z)));var ak=new google.maps.MarkerImage(X,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));ai=new google.maps.Marker({position:ah,map:F,shadow:ak,icon:aj,draggable:true,clickable:false});return ai}function R(ah){W=ah;F.setCenter(W);ad.setPosition(W)}}();fokus.openride.mobclient.controller.modules.offer=function(){var a={Offer:[{rideId:-1,ridestartPtLat:52.525798,ridestartPtLon:13.314266,rideendPtLat:52.5225,rideendPtLon:13.4123,ridestartTime:new Date().getMilliseconds(),rideprice:8.2,rideComment:"Das Fahrtkommentar.",acceptableDetourInMin:10,acceptableDetourInKm:10,acceptableDetourInPercent:10,offeredSeatsNo:4,startptAddress:"Weg 1, 10001 Berlin",endptAddress:"Weg 900, 10002 Berlin"}]};return{validateOfferRequest:function(){return a},setStartLat:function(b){a.Offer[0].ridestartPtLat=b},setStartLon:function(b){a.Offer[0].ridestartPtLon=b},setStartLatLn:function(b){if(b.indexOf(",")!=-1){a.Offer[0].ridestartPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Offer[0].ridestartPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Offer[0].ridestartPtLat=52.525798;a.Offer[0].ridestartPtLon=13.314266}},getStartLat:function(){return a.Offer[0].ridestartPtLat},getStartLon:function(){return a.Offer[0].ridestartPtLon},setStartAddr:function(b){a.Offer[0].startptAddress=b},getStartAddr:function(){return a.Offer[0].startptAddress},setDestLat:function(b){a.Offer[0].rideendPtLat=b},setDestLon:function(b){a.Offer[0].rideendPtLon=b},setDestLatLn:function(b){if(b.indexOf(",")!=-1){a.Offer[0].rideendPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Offer[0].rideendPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Offer[0].rideendPtLat=52.525798;a.Offer[0].rideendPtLon=13.314266}},getDestLat:function(){return a.Offer[0].rideendPtLat},getDestLon:function(){return a.Offer[0].rideendPtLon},setDestAddr:function(b){a.Offer[0].endptAddress=b},getDestAddr:function(){return a.Offer[0].endptAddress},setStartTime:function(b){a.Offer[0].ridestartTime=b.getTime()},getStartTime:function(){return a.Offer[0].ridestartTime},setPrice:function(b){a.Offer[0].rideprice=b},getPrice:function(){return a.Offer[0].rideprice},setComment:function(b){a.Offer[0].rideComment=b},getComment:function(){return a.Offer[0].rideComment},setDetour:function(b){a.Offer[0].acceptableDetourInKm=b},getDetour:function(){return a.Offer[0].acceptableDetourInMin},setCurrency:function(b){a.Offer[0].offeredCurrency=b},getCurrency:function(){return a.Offer[0].offeredCurrency},setOfferedSeatsNo:function(b){a.Offer[0].offeredSeatsNo=b},getOfferedSeatsNo:function(){return a.Offer[0].offeredSeatsNo},setSaveTemplate:function(b){a.Offer[0].savetemplate=b},getSaveTemplate:function(){return a.Offer[0].savetemplate}}}();fokus.openride.mobclient.controller.modules.search=function(){var a={Search:[{ridestartPtLat:52.525798,ridestartPtLon:13.314266,rideendPtLat:52.525798,rideendPtLon:13.314266,ridestartTimeLatest:new Date().getTime(),rideComment:"My dear Comment!",maxwaitingtime:20,searchedSeatsNo:1,savetemplate:false,ridestartTimeEarliest:new Date().getTime(),price:5.12,startptAddress:"Weg 1, 10001 Berlin",endptAddress:"Weg 900, 10002 Berlin"}]};return{validateSearchRequest:function(){return a},setTripName:function(b){a.Search[0].rideName=b},getTripName:function(){return a.Search[0].rideName},setStartLat:function(b){a.Search[0].ridestartPtLat=b},setStartLon:function(b){a.Search[0].ridestartPtLon=b},setStartLatLn:function(b){if(b.indexOf(",")!=-1){a.Search[0].ridestartPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Search[0].ridestartPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Search[0].ridestartPtLat=52.525798;a.Search[0].ridestartPtLon=13.314266}},getStartLat:function(){return a.Search[0].ridestartPtLat},getStartLon:function(){return a.Search[0].ridestartPtLon},setStartAddr:function(b){a.Search[0].startptAddress=b},getStartAddr:function(){return a.Search[0].startptAddress},setDestLat:function(b){a.Search[0].rideendPtLat=b},setDestLon:function(b){a.Search[0].rideendPtLon=b},setDestLatLn:function(b){if(b.indexOf(",")!=-1){a.Search[0].rideendPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Search[0].rideendPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Search[0].rideendPtLat=52.525798;a.Search[0].rideendPtLon=13.314266}},getDestLat:function(){return a.Search[0].rideendPtLat},getDestLon:function(){return a.Search[0].rideendPtLon},setDestAddr:function(b){a.Search[0].endptAddress=b},getDestAddr:function(){return a.Search[0].endptAddress},setStartTime:function(b){a.Search[0].ridestartTimeEarliest=b.getTime()},getStartTime:function(){return a.Search[0].ridestartTimeEarliest},setPrice:function(b){a.Search[0].rideprice=b},getPrice:function(){return a.Search[0].rideprice},setMaxWaitingTime:function(b){a.Search[0].maxwaitingtime=b;var c=b*60*1000;a.Search[0].ridestartTimeLatest=a.Search[0].ridestartTimeEarliest+c},getMaxWaitingTime:function(){return a.Search[0].maxwaitingtime},setComment:function(b){a.Search[0].rideComment=b},getComment:function(){return a.Search[0].rideComment},setSearchedSeatsNo:function(b){a.Search[0].searchedSeatsNo=b},getSearchedSeatsNo:function(){return a.Search[0].searchedSeatsNo},setSaveTemplate:function(b){a.Search[0].savetemplate=b},getSaveTemplate:function(){return a.Search[0].savetemplate}}}();fokus.openride.mobclient.controller.modules.favorites=function(){var a={FavoritePointRequest:[{favptAddress:"Bitte Strasse eingben!",favptGeoCoords:"0,0",favptDisplayName:"Bitte Namen eingeben"}]};return{setAddress:function(b){a.FavoritePointRequest[0].favptAddress=b},getAdress:function(){return a.FavoritePointRequest[0].favptAddress},setGeoCoordStr:function(b){a.FavoritePointRequest[0].favptGeoCoords=b},getGeoCoordStr:function(){return a.FavoritePointRequest[0].favptGeoCoords},setGeoCoords:function(c,b){a.FavoritePointRequest[0].favptGeoCoords=c+","+b},setDisplayName:function(b){a.FavoritePointRequest[0].favptDisplayName=b},getDisplayName:function(){return a.FavoritePointRequest[0].favptDisplayName},getFavPt:function(){return a}}}();fokus.openride.mobclient.controller.modules.ratings=function(){var a={GivenRatingRequest:[{riderRouteId:"",givenRating:"",givenRatingComment:""}]};return{setRiderRouteId:function(b){a.GivenRatingRequest[0].riderRouteId=b},getRiderRouteId:function(){return a.GivenRatingRequest[0].riderRouteId},setGivenRating:function(b){a.GivenRatingRequest[0].givenRating=b},getGivenRating:function(){return a.GivenRatingRequest[0].givenRating},setGivenRatingComment:function(b){a.GivenRatingRequest[0].givenRatingComment=b},getGivenRatingComment:function(){return a.GivenRatingRequest[0].givenRatingComment},getGivenRatingRequest:function(){return a}}}();fokus.openride.mobclient.controller.modules.profile=function(){var b={ProfileRequest:[{_id:"",preferences:"",pictures:"",favouritesList:"",firstName:"",lastName:"",dateOfBirth:"",email:"",mobilePhoneNumber:"",fixedPhoneNumber:"",streetAddress:"",zipCode:"",city:"",isSmoker:"",licenseDate:"",carColour:"",carBrand:"",carBuildYear:"",carPlateNo:"",gender:"-",_revision:0,__v:0}]};var c={PreferencesRequest:[{prefIsSmoker:"",prefGender:""}]};var a={PasswordRequest:[{passwordOld:"",password:""}]};return{setAllData:function(d){b.ProfileRequest[0]._id=d._id;b.ProfileRequest[0].preferences=d.preferences;b.ProfileRequest[0].pictures=d.pictures;b.ProfileRequest[0].favouritesList=d.favouritesList;b.ProfileRequest[0].firstName=d.firstName;b.ProfileRequest[0].lastName=d.lastName;b.ProfileRequest[0].dateOfBirth=d.dateOfBirth;b.ProfileRequest[0].email=d.email;b.ProfileRequest[0].mobilePhoneNumber=d.mobilePhoneNumber;b.ProfileRequest[0].fixedPhoneNumber=d.fixedPhoneNumber;b.ProfileRequest[0].streetAddress=d.streetAddress;b.ProfileRequest[0].zipCode=d.zipCode;b.ProfileRequest[0].city=d.city;b.ProfileRequest[0].isSmoker=d.isSmoker;b.ProfileRequest[0].licenseDate=d.licenseDate;b.ProfileRequest[0].carColour=d.carColour;b.ProfileRequest[0].carBrand=d.carBrand;b.ProfileRequest[0].carBuildYear=d.carBuildYear;b.ProfileRequest[0].carPlateNo=d.carPlateNo;b.ProfileRequest[0].gender=d.gender;b.ProfileRequest[0]._revision=d._revision;b.ProfileRequest[0]._v=d._v},setDateOfBirth:function(d){b.ProfileRequest[0].dateOfBirth=d},getDateOfBirth:function(){return b.ProfileRequest[0].dateOfBirth},setEmail:function(d){b.ProfileRequest[0].email=d},getEmail:function(){return b.ProfileRequest[0].email},setMobilePhoneNumber:function(d){b.ProfileRequest[0].mobilePhoneNumber=d},getMobilePhoneNumber:function(){return b.ProfileRequest[0].mobilePhoneNumber},setFixedPhoneNumber:function(d){b.ProfileRequest[0].fixedPhoneNumber=d},getFixedPhoneNumber:function(){return b.ProfileRequest[0].fixedPhoneNumber},setStreetAddress:function(d){b.ProfileRequest[0].streetAddress=d},getStreetAddress:function(){return b.ProfileRequest[0].streetAddress},setZipCode:function(d){b.ProfileRequest[0].zipCode=""+d},getZipCode:function(){return b.ProfileRequest[0].zipCode},setCity:function(d){b.ProfileRequest[0].city=d},getCity:function(){return b.ProfileRequest[0].city},setIsSmoker:function(d){b.ProfileRequest[0].isSmoker=d},getIsSmkoker:function(){return b.ProfileRequest[0].isSmoker},setLicenseDate:function(d){b.ProfileRequest[0].licenseDate=d},getLicenseDate:function(){return b.ProfileRequest[0].licenseDate},setCarColour:function(d){b.ProfileRequest[0].carColour=d},getCarColour:function(){return b.ProfileRequest[0].carColour},setCarBrand:function(d){b.ProfileRequest[0].carBrand=d},getCarBrand:function(){return b.ProfileRequest[0].carBrand},setCarBuildYear:function(d){b.ProfileRequest[0].carBuildYear=d},getCarBuildYear:function(){return b.ProfileRequest[0].carBuildYear},setCarPlateNo:function(d){b.ProfileRequest[0].carPlateNo=d},getCarPlateNo:function(){return b.ProfileRequest[0].carPlateNo},getProfileRequest:function(){return b.ProfileRequest[0]},setPrefIsSmoker:function(d){c.PreferencesRequest[0].prefIsSmoker=d},getPrefIsSmoker:function(){return c.PreferencesRequest[0].prefIsSmoker},setPrefGender:function(d){c.PreferencesRequest[0].prefGender=d},getPrefGender:function(){return c.PreferencesRequest[0].prefGender},getPreferencesRequest:function(){return c},setPasswordOld:function(d){a.PasswordRequest[0].passwordOld=d},getPasswordOld:function(){return a.PasswordRequest[0].passwordOld},setPassword:function(d){a.PasswordRequest[0].password=d},getPassword:function(){return a.PasswordRequest[0].password},getPasswordRequest:function(){return a}}}();fokus.openride.mobclient.controller.modules.calendar=function(){var a=new Date();var b=new Date();b.setHours(b.getHours()+1);return{date:a,endDate:b,getDate:function(){return this.date},getDateEnd:function(){return this.endDate},getDay:function(){return this.date.getDate()},getMonth:function(){return this.date.getMonth()+1},getYear:function(){return this.date.getFullYear()},getHour:function(){return this.date.getHours()},getMin:function(){return this.date.getMinutes()},getHourEnd:function(){return this.endDate.getHours()},getMinEnd:function(){return this.endDate.getMinutes()},getDateString:function(){return""+this.getDay()+"."+this.getMonth()+"."+this.getYear()+" "+this.getHours()+":"+this.getMinutes()+" Uhr"},setDay:function(c){this.date.setDate(c)},setHour:function(c){this.date.setHours(c)},setMin:function(c){this.date.setMinutes(c)},setMonth:function(c){this.date.setMonth(c)},setYear:function(c){this.date.setYear(c)},increaseYear:function(){this.date.setFullYear(this.date.getFullYear()+1);this.endDate.setFullYear(this.endDate.getFullYear()+1)},decreaseYear:function(){this.date.setFullYear(this.date.getFullYear()-1);this.endDate.setFullYear(this.endDate.getFullYear()-1)},increaseMonth:function(){this.date.setMonth(this.date.getMonth()+1);this.endDate.setMonth(this.endDate.getMonth()+1)},decreaseMonth:function(){this.date.setMonth(this.date.getMonth()-1);this.endDate.setMonth(this.endDate.getMonth()-1)},increaseDay:function(){this.date.setDate(this.date.getDate()+1);this.endDate.setTime(this.endDate.getTime()+86400000)},decreaseDay:function(){this.date.setDate(this.date.getDate()-1);this.endDate.setTime(this.endDate.getTime()-86400000)},increaseHour:function(){this.date.setHours(this.date.getHours()+1)},decreaseHour:function(){this.date.setHours(this.date.getHours()-1)},increaseMin:function(c){if(c<0){c=0}var d=this.date.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.date.getMinutes()+c)%5}while(d!=0)}this.date.setMinutes(this.date.getMinutes()+c)},decreaseMin:function(c){if(c<0){c=0}var d=this.date.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.date.getMinutes()-c)%5}while(d!=0)}this.date.setMinutes(this.date.getMinutes()-c)},increaseHourEnd:function(){this.endDate.setHours(this.endDate.getHours()+1)},decreaseHourEnd:function(){this.endDate.setHours(this.endDate.getHours()-1)},increaseMinEnd:function(c){if(c<0){c=0}var d=this.endDate.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.endDate.getMinutes()+c)%5}while(d!=0)}this.endDate.setMinutes(this.endDate.getMinutes()+c)},decreaseMinEnd:function(c){if(c<0){c=0}var d=this.endDate.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.endDate.getMinutes()-c)%5}while(d!=0)}this.endDate.setMinutes(this.endDate.getMinutes()-c)},reset:function(){this.date=new Date();this.endDate=new Date();this.endDate.setHours(b.getHours()+1)}}}();fokus.openride.mobclient.controller.modules.modulemanager=function(){var U=fokus.openride.mobclient.controller.modules.mapmanager;var l=fokus.openride.mobclient.controller.modules.nativemodule;var w=fokus.openride.mobclient.controller.serverconnector;var X=fokus.openride.mobclient.controller.modules.calendar;var ai=fokus.openride.mobclient.controller.modules.profile;usermode=DRIVERMODE;var L="offerstartdropd";var C="offerdestdropd";var q="searchstartdropd";var n="searchdestdropd";var S="offerstartselectcurrpos";var p="offerdestselectcurrpos";var k="searchstartselectcurrpos";var ac="searchdestselectcurrpos";var H="modify";var m="new";var A="";var y="";var ae="newofferUI";var I;var E=["tab01link","tab02link","tab03link","tab04link","tab05link"];var ah=["tabimg01","tabimg02","tabimg03","tabimg04"];var j=["tab01link","tab02link","tab03link","tab04link"];var D=["tab11link","tab12link","tab13link","tab14link"];var ag=["tabimg11","tabimg12","tabimg13","tabimg14"];var h=["tab01link","tab02link","tab03link","tab04link"];var r="";var N="";var G="";var J="";var aa={imgsrc:"../img/tab0home_inact_wide.png",imgactivesrc:"../img/tab0home_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/home1green_wide.png",imgactivesrc:"../img/home1white_wide.png",contentdivid:"homeUI",isactive:false},{imgsrc:"../img/tab1profilegreen_wide.png",imgactivesrc:"../img/tab1profilewhite_wide.png",contentdivid:"profileUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var Y={imgsrc:"../img/tab0driver_inact_wide.png",imgactivesrc:"../img/tab0driver_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1NeuesAngebot_wide.png",imgactivesrc:"../img/tab1NeuesAngebotActive_wide.png",contentdivid:"newofferUI",isactive:false},{imgsrc:"../img/tab1MeineAngebote_wide.png",imgactivesrc:"../img/tab1MeineAngeboteActive_wide.png",contentdivid:"activeofferUI",isactive:false},{imgsrc:"../img/tab1AlteAngebote_wide.png",imgactivesrc:"../img/tab1AlteAngeboteActive_wide.png",contentdivid:"completedtripsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var W={imgsrc:"../img/tab0thumb_inact_wide.png",imgactivesrc:"../img/tab0ride_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1ratinggreen_wide.png",imgactivesrc:"../img/tab1ratingwhite_wide.png",contentdivid:"ratingsUI",isactive:false},{imgsrc:"../img/tab1openratsgreen_wide.png",imgactivesrc:"../img/tab1openratswhite_wide.png",contentdivid:"openratingsUI",isactive:false},{imgsrc:"../img/tab1receivedratsgreen_wide.png",imgactivesrc:"../img/tab1receivedratswhite_wide.png",contentdivid:"receivedratingsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var V={imgsrc:"../img/tab0star_inact_wide.png",imgactivesrc:"../img/tab0star_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1favlistgreen_wide.png",imgactivesrc:"../img/tab1favlistwhite_wide.png",contentdivid:"favlistUI",isactive:false},{imgsrc:"../img/tab1newfavgreen_wide.png",imgactivesrc:"../img/tab1newfavwhite_wide.png",contentdivid:"newfavoritepickerUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var T={imgsrc:"../img/tab0euro_inact.png",imgactivesrc:"../img/tab0euro_act.png",isavtive:false,leafs:[{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false}]};var Q={imgsrc:"../img/tab0home_inact_wide.png",imgactivesrc:"../img/tab0home_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/home1green_wide.png",imgactivesrc:"../img/home1white_wide.png",contentdivid:"homeUI",isactive:false},{imgsrc:"../img/tab1profilegreen_wide.png",imgactivesrc:"../img/tab1profilewhite_wide.png",contentdivid:"profileUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var P={imgsrc:"../img/tab0rider_inact_wide.png",imgactivesrc:"../img/tab0rider_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1NeuesGesuch_wide.png",imgactivesrc:"../img/tab1NeuesGesuchActive_wide.png",contentdivid:"newsearchUI",isactive:false},{imgsrc:"../img/tab1MeineGesuche_wide.png",imgactivesrc:"../img/tab1MeineGesucheActive_wide.png",contentdivid:"activesearchUI",isactive:false},{imgsrc:"../img/tab1AlteGesuche_wide.png",imgactivesrc:"../img/tab1AlteGesucheActive_wide.png",contentdivid:"completedtripsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var O={imgsrc:"../img/tab0thumb_inact_wide.png",imgactivesrc:"../img/tab0ride_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1ratinggreen_wide.png",imgactivesrc:"../img/tab1ratingwhite_wide.png",contentdivid:"ratingsUI",isactive:false},{imgsrc:"../img/tab1openratsgreen_wide.png",imgactivesrc:"../img/tab1openratswhite_wide.png",contentdivid:"openratingsUI",isactive:false},{imgsrc:"../img/tab1receivedratsgreen_wide.png",imgactivesrc:"../img/tab1receivedratswhite_wide.png",contentdivid:"receivedratingsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var M={imgsrc:"../img/tab0star_inact_wide.png",imgactivesrc:"../img/tab0star_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1favlistgreen_wide.png",imgactivesrc:"../img/tab1favlistwhite_wide.png",contentdivid:"favlistUI",isactive:false},{imgsrc:"../img/tab1newfavgreen_wide.png",imgactivesrc:"../img/tab1newfavwhite_wide.png",contentdivid:"newfavoritepickerUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var K={imgsrc:"../img/tab0euro_inact.png",imgactivesrc:"../img/tab0euro_act.png",isavtive:false,leafs:[{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false}]};var g=[aa,Y,W,V];var b=[Q,P,O,M];var R;var F=this;var Z="";var v="";var o="";var t="";var u="";var ad="";var z="";var af="";var f="";var B="";var a="";var d=new Array();var ab;var c=this;return{displayedFullScreenMapId:"",username:"nick",offerfavsset:false,searchfavsset:false,modifyfavsset:false,activeofferlistdiv:"activeofferlist",activeofferlisthtml:"",activesearchlistdiv:"activesearchlist",activesearchlisthtml:"",completedtrips:"completedtrips",completedtriplisthtml:"",favoritelistdiv:"favlistUI",favoritelisthtml:"",ratingssummarydiv:"ratingsUI",ratingssummaryhtml:"",openratingslistdiv:"openratingsUI",openratingslisthtml:"",receivedratingslistdiv:"receivedratingsUI",receivedratingslisthtml:"",currentdisplayedview:ae,currentactivenodeindex:0,currentactiveleafindex:0,detailsClicked:false,clone:function(ak){function aj(){}aj.prototype=ak;return new aj()},setupTabs:function(){var aj;if(usermode==DRIVERMODE){aj=g}else{if(usermode==RIDERMODE){aj=b}}for(var al=0;al<ah.length;al++){if(al<aj.length){if(al==this.currentactivenodeindex){document.getElementById(ah[al]).src=aj[al].imgactivesrc;for(var ak=0;ak<ag.length;ak++){if(al<aj[al].leafs.length){if(ak==0){document.getElementById(ag[ak]).src=aj[al].leafs[ak].imgactivesrc}else{document.getElementById(ag[ak]).src=aj[al].leafs[ak].imgsrc}}}}else{document.getElementById(ah[al]).src=aj[al].imgsrc}}}this.setTabContent(0,0)},setTabContent:function(am,al){var aj;if(usermode==DRIVERMODE){aj=g}else{if(usermode==RIDERMODE){aj=b}}if(this.currentactivenodeindex==am){if(this.currentactiveleafindex!=al){aj[this.currentactivenodeindex].leafs[this.currentactiveleafindex].isactive=false;document.getElementById(ag[this.currentactiveleafindex]).src=aj[this.currentactivenodeindex].leafs[this.currentactiveleafindex].imgsrc;aj[am].leafs[al].isactive=true;document.getElementById(ag[al]).src=aj[am].leafs[al].imgactivesrc}}else{aj[this.currentactivenodeindex].isactive=false;document.getElementById(ah[this.currentactivenodeindex]).src=aj[this.currentactivenodeindex].imgsrc;aj[am].isactive=true;document.getElementById(ah[am]).src=aj[am].imgactivesrc;aj[this.currentactivenodeindex].leafs[this.currentactiveleafindex].isactive=false;document.getElementById(ag[this.currentactiveleafindex]).src=aj[this.currentactivenodeindex].leafs[this.currentactiveleafindex].imgsrc;aj[am].leafs[al].isactive=true;document.getElementById(ag[al]).src=aj[am].leafs[al].imgactivesrc;for(var ak=0;ak<aj[am].leafs.length;ak++){if(ak!=al){document.getElementById(ag[ak]).src=aj[am].leafs[ak].imgsrc}}}this.setView(aj[am].leafs[al].contentdivid);this.currentactivenodeindex=am;this.currentactiveleafindex=al},setActiveOfferList:function(aj){Z=JSON.stringify(aj)},setActiveSearchList:function(aj){v=JSON.stringify(aj)},setMatches:function(aj){t=JSON.stringify(aj)},setInactiveOfferMatches:function(aj){ad="undefined";ad=JSON.stringify(aj)},setInactiveSearchMatches:function(aj){u="undefined";u=JSON.stringify(aj)},setRide:function(aj){z=JSON.stringify(aj)},setFavoriteList:function(aj){af=JSON.stringify(aj)},setRatingsSummary:function(aj){f=JSON.stringify(aj)},setOpenRatingsList:function(aj){B=JSON.stringify(aj)},setReceivedRatingsList:function(aj){a=JSON.stringify(aj)},parsesimpleroute:function(ak){var aj=new Array();var al=$(ak).find("hasroute").text();if(al!=null&&al!="undefined"&&typeof al!="undefined"){if(al=="true"){$(ak).find("coordinates").each(function(){var ar=$(this).text();var aw=ar.split(" ");for(var aq=0;aq<aw.length-1;aq++){var am=aw[aq];var ao=am.indexOf(",");var an=am.substr(0,ao);var at=am.substr(ao+1,am.length-ao+1);var av=parseFloat(an);var au=parseFloat(at);var ap=new google.maps.LatLng(av,au);aj.push(ap)}});U.setRoutePath(aj);return true}else{showOverlayDialog("No Route Found!","","OK","","","");return false}}},parseUnmatchedRideRequest:function(ap){var aq=new StringBuilder();var au=new StringBuilder();var ao=0;for(var am=0;am<rideRequests.length;am++){var at=JSON.parse(rideRequests[am]);var al="orange";var an=new Date();an.setTime(parseInt((at.depDateTimeWindow.depDateTimeLow),10));if(an<=(new Date())){continue}var ak=an.getMonth()+1;var aj=an.getMinutes();if(aj<10){aj="0"+aj}var ar=an.getHours();if(ar<10){ar="0"+ar}au.append('<li><a name="u100'+am+'"></a>');au.append('<h3 class="linkslide_0" id="u100'+am+'" style="border: 2px '+al+';">');au.append(an.getDate()+"."+ak+"."+an.getFullYear()+", "+ar+":"+aj+' Hour<br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+at.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+at.destinationCity+"</small></h3>");au.append('<div class="slide_0"></div>');au.append("</li>")}if(ap==0){F.setriderupdatecount(ao);document.getElementById(F.activesearchlistdiv).innerHTML=au.toString()}else{F.setdriverupdatecount(ao);document.getElementById(F.activeofferlistdiv).innerHTML=au.toString()}setupUITabList()},parseactiveofferlist:function(){var at=new StringBuilder();var aw=new StringBuilder();var aq=0;offerAccessCounter++;for(var ao=0;ao<rides.length;ao++){var av=JSON.parse(rides[ao]);var am="";if(av.driver!=user){continue}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length==0&&av.agreedCommuters.length!=0){am="solid green"}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length!=0){am="dotted green"}if(av.rejectedDriver!=""||av.rejectedCommuters!=""){am="solid red"}var ap=new Date();ap.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));if(ap<=(new Date())){continue}var al=ap.getMonth()+1;var au=ap.getHours();if(au<10){au="0"+au}var ak=ap.getMinutes();if(ak<10){ak="0"+ak}aw.append('<li><a name="r'+ao+'"></a>');aw.append('<h3 class="linkslide_0" id="r'+ao+'" style="border: 2px '+am+';">');var ar="";switch(ap.getDay()){case 0:ar="Sunday";break;case 1:ar="Monday";break;case 2:ar="Tuesday";break;case 3:ar="Wendesday";break;case 4:ar="Thursday";break;case 5:ar="Friday";break;case 6:ar="Saturday";break}var an=av.commuters.toString().replace(",",", ");aw.append(ar+", "+ap.getDate()+"."+al+"."+ap.getFullYear()+", "+au+":"+ak+'<br /><small style="display: block; margin-left: 50px;"><span style="margin-left: -50px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -50px;">End:</span> '+av.destinationCity+'<br /><span style="margin-left: -50px;">Commuters: <strong style="color:black;">'+av.commuters+"</strong></span> </small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}for(var ao=0;ao<rideRequests.length;ao++){if(!rideRequests.hasOwnProperty(ao)){continue}var av=JSON.parse(rideRequests[ao]);if(av.potentiallyAgreedRidePlans.length!=0||av.driverAgreedRidePlans.length!=0||av.potentialRidePlans.length!=0||av.agreedRidePlan!=""||av.mode=="commuter"){continue}var am="orange";var ap=new Date();ap.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));if(ap<=(new Date())){continue}var al=ap.getMonth()+1;var ak=ap.getMinutes();if(ak<10){ak="0"+ak}var au=ap.getHours();if(au<10){au="0"+au}var aj=rides.length+ao;aw.append('<li><a name="u'+aj+'"></a>');aw.append('<h3 class="linkslide_0" id="u'+aj+'" style="border: 2px '+am+';">');var ar="";switch(ap.getDay()){case 0:ar="Sunday";break;case 1:ar="Monday";break;case 2:ar="Tuesday";break;case 3:ar="Wendesday";break;case 4:ar="Thursday";break;case 5:ar="Friday";break;case 6:ar="Saturday";break}aw.append('<small><style="color: black">'+ar+", "+ap.getDate()+"."+al+"."+ap.getFullYear()+", "+au+":"+ak+'</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+av.destinationCity+"</small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}F.setdriverupdatecount(aq);document.getElementById(F.activeofferlistdiv).innerHTML=aw.toString();setupUITabList()},parseactivesearcheslist:function(){var ax=JSON.parse(v);var at=new StringBuilder();var aw=new StringBuilder();var aq=0;for(var ao=0;ao<rides.length;ao++){var av=JSON.parse(rides[ao]);var an="";if(av.driver==user){continue}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length==0&&av.agreedCommuters.length!=0){an="solid green"}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length!=0){an="dotted green"}if(av.rejectedDriver!=""||av.rejectedCommuters!=""){an="solid red"}var ap=new Date();ap.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));if(ap<(new Date())){continue}var al=ap.getMonth()+1;var ak=ap.getMinutes();if(ak<10){ak="0"+ak}var au=ap.getHours();if(au<10){au="0"+au}var ar="";switch(ap.getDay()){case 0:ar="Sunday";break;case 1:ar="Monday";break;case 2:ar="Tuesday";break;case 3:ar="Wendesday";break;case 4:ar="Thursday";break;case 5:ar="Friday";break;case 6:ar="Saturday";break}var am=av.driver+" ( + "+av.commuters.length+" commuter)";aw.append('<li><a name="r'+ao+'"></a>');aw.append('<h3 class="linkslide_0" id="r'+ao+'" style="border: 2px '+an+';">');aw.append(ar+", "+ap.getDate()+"."+al+"."+ap.getFullYear()+", "+au+":"+ak+'<br /><small style="display: block; margin-left: 50px;"><span style="margin-left: -50px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -50px;">End:</span> '+av.destinationCity+'<br /><span style="margin-left: -60px;">Driver: </span>&nbsp;&nbsp;&nbsp;&nbsp;'+am+" </small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}for(var ao=0;ao<rideRequests.length;ao++){if(!rideRequests.hasOwnProperty(ao)){continue}var av=JSON.parse(rideRequests[ao]);if(av.potentiallyAgreedRidePlans.length!=0||av.driverAgreedRidePlans.length!=0||av.potentialRidePlans.length!=0||av.agreedRidePlan!=""||av.mode=="driver"){continue}var an="orange";var ap=new Date();ap.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));if(ap<(new Date())){continue}var al=ap.getMonth()+1;var ak=ap.getMinutes();if(ak<10){ak="0"+ak}var au=ap.getHours();if(au<10){au="0"+au}var aj=rides.length+ao;var ar="";switch(ap.getDay()){case 0:ar="Sunday";break;case 1:ar="Monday";break;case 2:ar="Tuesday";break;case 3:ar="Wendesday";break;case 4:ar="Thursday";break;case 5:ar="Friday";break;case 6:ar="Saturday";break}aw.append('<li><a name="u'+aj+'"></a>');aw.append('<h3 class="linkslide_0" id="u'+aj+'" style="border: 2px '+an+';">');aw.append('<small><style="color: black">'+ar+", "+ap.getDate()+"."+al+"."+ap.getFullYear()+", "+au+":"+ak+'</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+av.destinationCity+"</small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}F.setriderupdatecount(aq);document.getElementById(F.activesearchlistdiv).innerHTML=aw.toString();setupUITabList()},parsecompletedtriplist:function(){var aq=new StringBuilder();var au=new StringBuilder();var ap=0;for(var an=0;an<rides.length;an++){if(!rides.hasOwnProperty(an)){continue}var at=JSON.parse(rides[an]);var am="";if(at.agreedDriver!=""&&at.potentiallyAgreedCommuters.length==0&&at.agreedCommuters.length!=0){am="solid green"}if(at.agreedDriver!=""&&at.potentiallyAgreedCommuters.length!=0){am="dotted green"}if(at.rejectedDriver!=""||at.rejectedCommuters!=""){am="solid red"}var ao=new Date();ao.setTime(parseInt((at.depDateTimeWindow.depDateTimeLow),10));if(ao>(new Date())){continue}var al=ao.getMonth()+1;var ak=ao.getMinutes();if(ak<10){ak="0"+ak}var ar=ao.getHours();if(ar<10){ar="0"+ar}au.append('<li><a name="r'+an+'"></a>');au.append('<h3 class="linkslide_0" id="r'+an+'" style="border: 2px '+am+';">');au.append(ao.getDate()+"."+al+"."+ao.getFullYear()+", "+ar+":"+ak+' Hour<br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+at.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+at.destinationCity+"</small></h3>");au.append('<div class="slide_0"></div>');au.append("</li>")}for(var an=0;an<rideRequests.length;an++){if(!rideRequests.hasOwnProperty(an)){continue}var at=JSON.parse(rideRequests[an]);if(at.mode=="driver"&&usermode==RIDERMODE){continue}var am="orange";var ao=new Date();ao.setTime(parseInt((at.depDateTimeWindow.depDateTimeLow),10));if(ao>(new Date())){continue}var al=ao.getMonth()+1;var ak=ao.getMinutes();if(ak<10){ak="0"+ak}var ar=ao.getHours();if(ar<10){ar="0"+ar}var aj=rides.length+an;au.append('<li><a name="u'+aj+'"></a>');au.append('<h3 class="linkslide_0" id="u'+aj+'" style="border: 2px '+am+';">');au.append('<small><style="color: black">'+ao.getDate()+"."+al+"."+ao.getFullYear()+", "+ar+":"+ak+' Hour</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+at.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+at.destinationCity+"</small></h3>");au.append('<div class="slide_0"></div>');au.append("</li>")}F.setriderupdatecount(ap);document.getElementById(F.completedtrips).innerHTML=au.toString();setupCompletedTripUITabList()},setupViaPtRoute:function(aj){w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+aj+"/route",false,function(ao){var aw=new Array();if(typeof(ao.list)!="undefined"&&typeof(ao.list[0].list[0].Coordinate)!="undefined"){for(var ap=0;ap<ao.list[0].list[0].Coordinate.length;ap++){var av=ao.list[0].list[0].Coordinate[ap];var ak=av.latititude;var at=av.longitude;var am=new google.maps.LatLng(ak,at);aw.push(am)}U.setRoutePath(aw)}else{showOverlayDialog("No route found!","","OK","","","");return false}var au=new Array();if(typeof(ao.list[0].list[1].Coordinate)!="undefined"){if(typeof(ao.list[0].list[1].Coordinate.length)=="undefined"){ao.list[0].list[1].Coordinate=[ao.list[0].list[1].Coordinate]}for(var ap=0;ap<ao.list[0].list[1].Coordinate.length;ap++){var av=ao.list[0].list[1].Coordinate[ap];var al=av.latititude;var an=av.longitude;var ar=new google.maps.LatLng(al,an);au.push(ar)}U.setViaStartPoints(au)}else{}var aq=new Array();if(ao.list[0].list[2]){if(typeof(ao.list[0].list[2].Coordinate)!="undefined"){if(typeof(ao.list[0].list[2].Coordinate.length)=="undefined"){ao.list[0].list[2].Coordinate=[ao.list[0].list[2].Coordinate]}for(var ap=0;ap<ao.list[0].list[2].Coordinate.length;ap++){var av=ao.list[0].list[2].Coordinate[ap];var al=av.latititude;var an=av.longitude;var ar=new google.maps.LatLng(al,an);aq.push(ar)}U.setViaDestPoints(aq)}else{}}fokus.openride.mobclient.controller.modules.modulemanager.setFullScreenMapView("viaptroutegmapscreencontainer");return true},function(){showOverlayDialog("Route could not be determined. Please check your internet connection!","","OK","","","");return false})},parsematcheslist:function(ar,aC){var aE=0;if(aE==0){this.myparselist(ar,aC)}else{try{var ay=JSON.parse(t)}catch(aF){ay="undefined"}var aj=new StringBuilder();this.tmpRide="";if(typeof(ay.list)!="undefined"&&typeof(ay.list[0].MatchResponse)!="undefined"){if(typeof(ay.list[0].MatchResponse.length)=="undefined"){ay.list[0].MatchResponse=[ay.list[0].MatchResponse]}else{ay.list[0].MatchResponse=$(ay.list[0].MatchResponse).sort(function(aM,aL){acc_a=aM.driverState==1&&aM.riderState==1;acc_b=aL.driverState==1&&aL.riderState==1;rej_a=fokus.openride.mobclient.controller.modules.modulemanager.isrejectedmatch(aM.driverState,aM.riderState);rej_b=fokus.openride.mobclient.controller.modules.modulemanager.isrejectedmatch(aL.driverState,aL.riderState);if((acc_a&&acc_b)||(rej_a&&rej_b)){return 0}if(acc_a){return -1}if(acc_b){return 1}if(rej_a){return 1}if(rej_b){return -1}return 0})}for(var aD=0;aD<ay.list[0].MatchResponse.length;aD++){var al=ay.list[0].MatchResponse[aD];this.tmpRide=al;var am=new Date(al.matchExpectedStartTime);var at=am.getDate();if(at<10){at="0"+at}var az=am.getMonth()+1;if(az<10){az="0"+az}var aK=am.getFullYear();var av=am.getHours();if(av<10){av="0"+av}var aq=am.getMinutes();if(aq<10){aq="0"+aq}var aG=al.matchPriceCents/100;aG=aG.toFixed(2).replace(".",",");var aA=this.isrejectedmatch(al.driverState,al.riderState);var aw="#fffacd";if(al.driverState==1&&al.riderState==1){aw="#f0fff0"}else{if(aA){aw="#ffe4e1"}}aj.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');if(!aA){aj.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(usermode==DRIVERMODE){aj.append('    <img src="../../OpenRideWeb/img/profile/'+al.riderNickname+"_"+al.riderCustId+'_thumb.jpg" alt="Profilbild von '+al.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{aj.append('    <img src="../../OpenRideWeb/img/profile/'+al.driverNickname+"_"+al.driverCustId+'_thumb.jpg" alt="Profilbild von '+al.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}aj.append("  </div>")}aj.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+aw+'; min-width: 85px;">');aj.append('    <form class="ride">');aj.append(this.getMatchStateInfoControls(al.rideid,al.riderRouteId,al.driverState,al.riderState,aC));aj.append("    </form>");aj.append("  </div>");if(!aA){if(usermode==DRIVERMODE){var aB=al.matchSharedDistanceMeters/1000;aB=round(aB,2);var au=al.matchDetourMeters/1000;au=round(au,2);var ap=al.startPtAddress;var an=al.endPtAddress;if(ap.match("^.*:.*$")){ap=ap.split(":")[1]}if(an.match("^.*:.*$")){an=an.split(":")[1]}aj.append('  <div style="line-height: 150%; padding-left: 75px;">');aj.append("    <strong>"+al.riderNickname+"</strong> &ndash;<br />");aj.append("    <small>Estimated drving time: "+av+":"+aq+" Hour, driving distance: "+aB+" km, Detour: "+au+" km, Best offer: "+round(al.matchPriceCents/100,2)+" &euro;, Anz. Pers.: "+al.noOfPassengers);if(typeof(al.riderMobilePhoneNo)!="undefined"){aj.append(', Mobile: <a href="tel:'+al.riderMobilePhoneNo+'" class="phone">'+al.riderMobilePhoneNo+"</a>")}aj.append("</small><small><table>");aj.append("<tr>");aj.append('<td valign="top" align="right" style="color:#666666;">Abholort:</td>');aj.append('<td valign="top">'+ap+"</td>");aj.append("</tr>");aj.append("<tr>");aj.append('<td valign="top" align="right" style="color:#666666;">End:</td>');aj.append('<td valign="top">'+an+"</td>");aj.append("</tr>");aj.append("</table></small>");aj.append("  </div>")}else{aj.append(' <div style="line-height: 140%; padding-left: 75px;">');aj.append("   <strong>"+al.driverNickname+"</strong> &ndash;<br />");aj.append("   <small>Estimated driving time: "+av+":"+aq+" Hour, driving distance: "+round(al.matchPriceCents/100,2)+" &euro;");if(typeof(al.driverMobilePhoneNo)!="undefined"){aj.append('<br />Mobile: <a href="tel:'+al.driverMobilePhoneNo+'" class="phone">'+al.driverMobilePhoneNo+"</a>");aj.append("<br />Car: "+al.driverCarBrand+", "+al.driverCarColour);if(typeof(al.driverCarBuildYear)!="undefined"&&al.driverCarBuildYear!=""){aj.append(", Bj. "+al.driverCarBuildYear)}if(typeof(al.driverCarPlateNo)!="undefined"&&al.driverCarPlateNo!=""){aj.append(", Kennz. "+al.driverCarPlateNo)}}aj.append('</small><br style="clear: both;" />');aj.append(" </div>")}}else{aj.append(' <div style="line-height: 140%;">');if(usermode==DRIVERMODE){aj.append("   <small><strong>"+al.riderNickname+"</strong></small>")}else{aj.append("   <small><strong>"+al.driverNickname+"</strong></small>")}aj.append(" </div>")}aj.append("</div>")}}else{aj.clear();if(usermode==DRIVERMODE){aj.append("<p>Unfortunately, no suitable rider was found.</p>")}else{var aI='javascript:href="http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de"';aj.append("<p>Unfortunately, no suitable driver was found.</p>")}}var ak;var aH=ar.replace("r","");var ax="javascript:showOverlayDialog('Are you sure you want to delete this trip?', '', '      yes      ', 'fokus.openride.mobclient.controller.modules.modulemanager.deleteRide("+aH+");', '     no     ', '');";ak="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aH+"');";var aJ="fokus.openride.mobclient.controller.modules.modulemanager.modifyRide("+aH+")";if((typeof(this.tmpRide.driverState)=="undefined")&&(typeof(this.tmpRide.riderState)=="undefined")){aj.append("<form>");aj.append('  <div style="padding: 5px 0; text-align: center; clear: both;">');if(usermode==DRIVERMODE){aj.append('    <input type="button" class="rounded compact" value="&Auml;ndern" onclick="'+aJ+'" style="width: 72px;" />');aj.append('    <input type="button" class="rounded compact" value="L&ouml;schen" onclick="'+ax+'" style="width: 80px;" />');aj.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ak+'" style="width: 130px;" />')}else{aj.append('  <a href="http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de">Alternativ &uuml;ber die &Ouml;PNV-Fahrplanauskunft Ba-W&uuml; search</a><br /><br />');aj.append('    <input type="button" class="rounded compact" value="&Auml;ndern" onclick="'+aJ+'" style="width: 141px;" />');aj.append('    <input type="button" class="rounded compact" value="L&ouml;schen" onclick="'+ax+'" style="width: 141px;" />');var aI="javascript:window.location.href='http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de'";aj.append('    <br /><br /><input type="button" class="rounded compact" value="Im &Ouml;PNV suchen" onclick="'+aI+'" style="width: 290px;" />');var ao="fokus.openride.mobclient.controller.modules.modulemanager.setFullScreenMapView('searchroutegmapscreencontainer');";aj.append('  <div style="padding: 5px 0; text-align: center;">');aj.append('    <input type="button" class="rounded compact" value="Abholpunkt anzeigen" onclick="'+ao+'" style="width: 290px;" />');aj.append("  </div>")}aj.append("  </div>");aj.append("</form>")}else{aH=ar.replace("r","");ak="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aH+"');";if(usermode==DRIVERMODE){aj.append('  <div style="padding: 5px 0; text-align: center;">');aj.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ak+'" style="width: 290px;" />');aj.append("  </div>")}}if(aC){I=aC}I[0].innerHTML=aj.toString();if(I.prev("h3").is(".updated")){I.prev("h3").removeClass("updated");I.prev("h3").find("span.update").remove();if(usermode==DRIVERMODE){this.reducedriverupdatecount()}else{this.reduceriderupdatecount()}}}},myparselist:function(aq,az){var au;var ax=false;var aC=new StringBuilder();var al=parseInt(aq.substring(1));var ay=al;if(aq.charAt(0)=="u"){ax=true}else{au=JSON.parse(rides[ay])}var av="#fffacd";var ap="myaccept('"+ay+"')";var an="myreject('"+ay+"')";var ao="";aC.append('<div class="matching-row" style="padding: 12px; border-top: 1px solid #e2e2e2;">');aC.append('  <div class="profile-info-short" style="margin: 0 10px 0 0; float: left; text-align: right; ">');aC.append("    <small>"+100+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>');aC.append("  </div>");aC.append('  <div style="margin: -5px -5px 3px 0; padding: 5px 5px 0px 5px; float: right; text-align: center; background: '+av+'; min-width: 85px;">');aC.append('    <form class="ride">');if(!ax){var at=$.inArray(user,au.potentiallyAgreedCommuters);var ar=$.inArray(user,au.agreedCommuters);if(usermode==DRIVERMODE&&au.agreedDriver==""){aC.append('<small>Take this ride?</small><br><input type="button" class="rounded compact" value="Accept" onclick="'+ap+'" /><br><input type="button" class="rounded compact" value="Reject" onclick="'+an+'" />')}else{if(usermode==RIDERMODE&&au.agreedDriver!=""&&at>-1){aC.append('<small>Take this ride?</small><br><input type="button" class="rounded compact" value="Accept" onclick="'+ap+'" /><br><input type="button" class="rounded compact" value="Reject" onclick="'+an+'" />')}else{if(au.agreedDriver!=""&&au.potentiallyAgreedCommuters.length==0){aC.append("<small>Ride booked! </small>")}else{if((au.agreedDriver==""&&au.potentiallyAgreedDriver=="")||(au.agreedCommuters.length==0&&au.potentiallyAgreedCommuters.length==0)){aC.append("<small>Ride rejected! </small>")}else{if(usermode==DRIVERMODE){aC.append("<small>Waiting for confirmation of commuters! </small>")}else{aC.append("<small>Waiting for confirmation of driver! </small>")}}}}}}else{au=JSON.parse(rideRequests[ay-rides.length]);aC.append("<small>No matches found for this ride! </small>")}aC.append("    </form>");aC.append("  </div>");var am="";if(usermode==DRIVERMODE){am=au.commuters}else{am=au.driver}if(typeof am==="undefined"){am="none"}if(usermode==DRIVERMODE){aC.append('  <div style="line-height: 150%; padding-left: 75px;">Commuters:<br/>')}else{aC.append('  <div style="line-height: 150%; padding-left: 75px;">Driver:<br/>')}var aj;var aB;am=am.toString();var ak=am.split(",");for(var aA=0;aA<ak.length;aA++){var aw=ak[aA];if(aw=="none"){aC.append('<input type="button" class="rounded compact" value="'+aw+'" />');continue}$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/subject/byURI/"+aw,async:false,crossDomain:true,username:user,password:pass,beforeSend:function(aD){aD.withCredentials=true;aD.setRequestHeader("Authorization","Basic "+user+":"+pass)},accepts:"application/json",dataType:"json",success:function(aF,aG,aE){if(aF.versionInfo["previousVersion"]=="none"||typeof(aF.currentReputationReport)=="undefined"){aC.append('<input type="button" class="rounded compact" onclick="showOverlayDialog(\'Rating For '+aw+"', 'No Rating Avialble', 'X', '', '', '');\" value=\""+aw+'" />')}else{var aD;w.GET("/OpenRideServer-RS/resources/users/"+aw+"/profile",false,function(aH){aD=aH},function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your profile information could not be loaded.")});$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/"+aF.currentReputationReport["uri"],async:false,crossDomain:true,username:user,password:pass,beforeSend:function(aH){aH.withCredentials=true;aH.setRequestHeader("Authorization","Basic "+user+":"+pass)},accepts:"application/json",dataType:"json",success:function(aI,aJ,aH){aC.append('<input type="button" class="rounded compact" onclick="showRatingDialog(\''+aw+"',"+aI.json.average_StarRating+","+(aI.json.total_StarRating/aI.json.average_StarRating)+","+aI.json.average_OnTime+","+aI.json.average_Friendly+","+aD.ProfileResponse.mobilePhoneNumber+",'"+aD.ProfileResponse.carColour+" "+aD.ProfileResponse.carBrand+'\');" value="'+aw+'" />')},error:function(aJ,aI,aH){aC.append('<input type="button" class="rounded compact" value="'+aw+'" />')}})}},error:function(aF,aE,aD){}})}aC.append("</small><small><table>");if(usermode==DRIVERMODE){aC.append("<tr>");aC.append('<td valign="top" align="right" style="color:#666666;">Price:</td>');if(typeof(au.priceBound)=="undefined"){aC.append('<td valign="top">'+au.priceRange[0]+" &#8362;</td>")}else{aC.append('<td valign="top">'+au.priceBound+" &#8362;</td>")}aC.append("</tr>")}else{if(usermode==RIDERMODE&&(!ax)){aC.append("<tr>");aC.append('<td valign="top" align="right" style="color:#666666;">Price:</td>');if(typeof(au.priceBound)=="undefined"){aC.append('<td valign="top">'+au.priceRange[0]+" &#8362;</td>")}else{aC.append('<td valign="top">'+au.priceBound+" &#8362;</td>")}aC.append("</tr>")}}aC.append("<tr>");aC.append('<td valign="top" align="right" style="color:#666666;">Smoking:</td>');aC.append('<td valign="top">'+au.smoking+"</td>");aC.append("</tr>");aC.append("<tr>");aC.append('<td valign="top" align="right" style="color:#666666;">Pets:</td>');aC.append('<td valign="top">'+au.pets+"</td>");aC.append("</tr>");aC.append("</table></small>");aC.append("  </div>");if(az){I=az}I[0].innerHTML=aC.toString()},parseinactivematcheslist:function(aq,aA){var aj=new StringBuilder();this.tmpRide="";if(usermode==DRIVERMODE){var ar="";try{ar=JSON.parse(ad)}catch(aD){ar="undefined"}if(typeof(ar.list)!="undefined"&&typeof(ar.list[0].MatchResponse)!="undefined"){if(typeof(ar.list[0].MatchResponse.length)=="undefined"){ar.list[0].MatchResponse=[ar.list[0].MatchResponse]}for(var aC=0;aC<ar.list[0].MatchResponse.length;aC++){var al=ar.list[0].MatchResponse[aC];this.tmpRide=al;var am=new Date(al.matchExpectedStartTime);var at=am.getDate();if(at<10){at="0"+at}var ax=am.getMonth()+1;if(ax<10){ax="0"+ax}var aG=am.getFullYear();var av=am.getHours();if(av<10){av="0"+av}var ap=am.getMinutes();if(ap<10){ap="0"+ap}var aE=al.matchPriceCents/100;aE=aE.toFixed(2).replace(".",",");var ay=this.isrejectedmatch(al.driverState,al.riderState);var aw="#fffacd";if(al.driverState==1&&al.riderState==1){aw="#f0fff0"}else{if(ay){aw="#ffe4e1"}}aj.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');if(al.riderNickname){aj.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(al.riderNickname){aj.append('    <img src="../../OpenRideWeb/pictures/profile/'+al.riderNickname+"_"+al.riderCustId+'_thumb.jpg" alt="Profilbild von '+al.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{aj.append('    <img src="../../OpenRideWeb/pictures/profile/'+al.driverNickname+"_"+al.driverCustId+'_thumb.jpg" alt="Profilbild von '+al.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}aj.append("  </div>")}aj.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+aw+'; min-width: 85px;">');aj.append('    <form class="ride">');aj.append(this.getRatingStateInfoControls(al.riderRouteId));aj.append("    </form>");aj.append("  </div>");if(al.riderNickname){var az=al.matchSharedDistanceMeters/1000;az=round(az,2);var au=al.matchDetourMeters/1000;au=round(au,2);var ao=al.startPtAddress;var an=al.endPtAddress;if(ao.match("^.*:.*$")){ao=ao.split(":")[1]}if(an.match("^.*:.*$")){an=an.split(":")[1]}aj.append('  <div style="line-height: 150%; padding-left: 75px;">');aj.append("    <strong>"+al.riderNickname+"</strong> &ndash;<br />");aj.append("    <small>"+av+":"+ap+" Uhr, Mitnahmestrecke: "+az+" km, Umweg: "+au+" km, Preisvorschlag: "+round(al.matchPriceCents/100,2)+" &euro;, Anz. Pers.: "+al.noOfPassengers);if(typeof(al.riderMobilePhoneNo)!="undefined"){aj.append(', Handy: <a href="tel:'+al.riderMobilePhoneNo+'" class="phone">'+al.riderMobilePhoneNo+"</a>")}aj.append("</small><small><table>");aj.append("<tr>");aj.append('<td valign="top" align="right" style="color:#666666;">Pick-up Point:</td>');aj.append('<td valign="top">'+ao+"</td>");aj.append("</tr>");aj.append("<tr>");aj.append('<td valign="top" align="right" style="color:#666666;">End:</td>');aj.append('<td valign="top">'+an+"</td>");aj.append("</tr>");aj.append("</table></small>");aj.append("  </div>")}else{aj.append(' <div style="line-height: 140%; padding-left: 75px;">');aj.append("   <strong>"+al.driverNickname+"</strong> &ndash;<br />");aj.append("   <small>"+av+":"+ap+" Uhr");if(typeof(al.driverMobilePhoneNo)!="undefined"){aj.append('<br />Handy: <a href="tel:'+al.driverMobilePhoneNo+'" class="phone">'+al.driverMobilePhoneNo+"</a>");aj.append("<br />Auto: "+al.driverCarBrand+", "+al.driverCarColour);if(typeof(al.driverCarBuildYear)!="undefined"&&al.driverCarBuildYear!=""){aj.append(", Bj. "+al.driverCarBuildYear)}if(typeof(al.driverCarPlateNo)!="undefined"&&al.driverCarPlateNo!=""){aj.append(", Kennz. "+al.driverCarPlateNo)}}aj.append('</small><br style="clear: both;" />');aj.append(" </div>")}aj.append("</div>")}}else{}}else{if(usermode==RIDERMODE){var aB="";try{aB=JSON.parse(u)}catch(aD){aB="undefined"}if(typeof(aB.list)!="undefined"&&typeof(aB.list[0].MatchResponse)!="undefined"){if(typeof(aB.list[0].MatchResponse.length)=="undefined"){aB.list[0].MatchResponse=[aB.list[0].MatchResponse]}for(var aC=0;aC<aB.list[0].MatchResponse.length;aC++){var al=aB.list[0].MatchResponse[aC];this.tmpRide=al;var am=new Date(al.matchExpectedStartTime);var at=am.getDate();if(at<10){at="0"+at}var ax=am.getMonth()+1;if(ax<10){ax="0"+ax}var aG=am.getFullYear();var av=am.getHours();if(av<10){av="0"+av}var ap=am.getMinutes();if(ap<10){ap="0"+ap}var aE=al.matchPriceCents/100;aE=aE.toFixed(2).replace(".",",");var ay=this.isrejectedmatch(al.driverState,al.riderState);var aw="#fffacd";if(al.driverState==1&&al.riderState==1){aw="#f0fff0"}else{if(ay){aw="#ffe4e1"}}aj.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');aj.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(al.riderNickname){aj.append('    <img src="../../OpenRideWeb/pictures/profile/'+al.riderNickname+"_"+al.riderCustId+'_thumb.jpg" alt="Profilbild von '+al.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{aj.append('    <img src="../../OpenRideWeb/pictures/profile/'+al.driverNickname+"_"+al.driverCustId+'_thumb.jpg" alt="Profilbild von '+al.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+al.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}aj.append("  </div>");aj.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+aw+'; min-width: 85px;">');aj.append('    <form class="ride">');aj.append(this.getRatingStateInfoControls(al.riderRouteId));aj.append("    </form>");aj.append("  </div>");if(al.riderNickname){var az=al.matchSharedDistanceMeters/1000;az=round(az,2);var au=al.matchDetourMeters/1000;au=round(au,2);aj.append('  <div style="line-height: 150%; padding-left: 75px;">');aj.append("    <strong>"+al.riderNickname+"</strong> &ndash;<br />");aj.append("    <small>"+av+":"+ap+" Uhr, Strecke: "+az+" km, Umweg: "+au+" km, Preisvorschlag: "+round(al.matchPriceCents/100,2)+" &euro;");if(typeof(al.riderMobilePhoneNo)!="undefined"){aj.append(', Handy: <a href="tel:'+al.riderMobilePhoneNo+'" class="phone">'+al.riderMobilePhoneNo+"</a>")}aj.append('</small><br style="clear: right;" /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+al.startPtAddress+'<br /><span style="margin-left: -34px;">End:</span> '+al.endPtAddress+"</small>");aj.append("  </div>")}else{aj.append(' <div style="line-height: 140%; padding-left: 75px;">');aj.append("   <strong>"+al.driverNickname+"</strong> &ndash;<br />");aj.append("   <small>"+av+":"+ap+" Uhr, Preisvorschlag: "+round(al.matchPriceCents/100,2)+" &euro;");if(typeof(al.driverMobilePhoneNo)!="undefined"){aj.append('<br />Handy: <a href="tel:'+al.driverMobilePhoneNo+'" class="phone">'+al.driverMobilePhoneNo+"</a>");aj.append("<br />Auto: "+al.driverCarBrand+", "+al.driverCarColour);if(typeof(al.driverCarBuildYear)!="undefined"&&al.driverCarBuildYear!=""){aj.append(", Bj. "+al.driverCarBuildYear)}if(typeof(al.driverCarPlateNo)!="undefined"&&al.driverCarPlateNo!=""){aj.append(", Kennz. "+al.driverCarPlateNo)}}aj.append('</small><br style="clear: both;" />');aj.append(" </div>")}aj.append("</div>")}}else{aj.clear();aj.append("")}}}var ak;if((typeof(this.tmpRide.driverState)=="undefined")&&(typeof(this.tmpRide.riderState)=="undefined")&&(usermode!=RIDERMODE)){var aF=aq.replace("r","");ak="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aF+"');";aj.append("<form>");aj.append('  <div style="padding: 5px 0; text-align: center; clear: both;">');aj.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ak+'" style="width: 290px;" />');aj.append("  </div>");aj.append("</form>")}if(aA){I=aA}I[0].innerHTML=aj.toString()},isrejectedmatch:function(aj,ak){return(aj==0||aj==2||aj==3||ak==0||ak==2||ak==3)},getMatchStateInfoControls:function(al,am,ak,ao,an){var aj="";if(ak==1&&ao==1){aj="<small>Fahrt gebucht!</small>"}else{if(ak==2||ao==2){if(usermode==DRIVERMODE){if(ak==2){aj="<small>Storniert</small>"}else{aj="<small>Hat storniert</small>"}}else{if(usermode==RIDERMODE){if(ao==2){aj="<small>Storniert</small>"}else{aj="<small>Hat storniert</small>"}}}}else{if(ak==3||ao==3){if(usermode==DRIVERMODE){if(ak==3){aj="<small>Ausgebucht</small>"}else{aj="<small>Schon vergeben</small>"}}else{if(usermode==RIDERMODE){if(ao==3){aj="<small>Schon vergeben</small>"}else{aj="<small>Ausgebucht</small>"}}}}else{if(ak==0||ao==0){if(usermode==DRIVERMODE){if(ak==0){aj="<small>Abgelehnt</small>"}else{aj="<small>Hat abgelehnt</small>"}}else{if(usermode==RIDERMODE){if(ao==0){aj="<small>Abgelehnt</small>"}else{aj="<small>Hat abgelehnt</small>"}}}}else{if(usermode==DRIVERMODE){acceptOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+al+"/matches/"+am+"/accept', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+al+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This inquiry is sadly no longer available.')})";rejectOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+al+"/matches/"+am+"/reject', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+al+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This inquiry is sadly no longer available.')})";if(ao==1){aj='<small>Will mitfahren</small><br /><input type="button" class="adjustleft" value="Annehmen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{if(ak==1){aj='<small>Angefragt</small><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{aj='<input type="button" value="Anfragen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}}}else{if(usermode==RIDERMODE){acceptOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+am+"/matches/"+al+"/accept', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+al+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This ride offer is sadly no longer available.')})";rejectOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+am+"/matches/"+al+"/reject', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+al+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This ride offer is sadly no longer available.')})";if(ao==1){aj='<small>Angefragt</small><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{if(ak==1){aj='<small>Bietet Fahrt an</small><br /><input type="button" value="Buchen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{aj='<input type="button" value="Anfragen" onclick="'+acceptOnClickAction+'" /><br /> <input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}}}}}}}}return aj},getRatingStateInfoControls:function(an){var ak="";try{ak=JSON.parse(B)}catch(ao){ak=""}var aj="";rateOnClickAction="fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(2, 1)";if(typeof(ak.list[0].OpenRatingResponse)!="undefined"){if(typeof(ak.list[0].OpenRatingResponse.length)=="undefined"){ak.list[0].OpenRatingResponse=[ak.list[0].OpenRatingResponse]}for(var al=0;al<ak.list[0].OpenRatingResponse.length;al++){var am=ak.list[0].OpenRatingResponse[al];if(am.riderRouteId==an){aj='<input type="button" value="Bewerten" onclick="'+rateOnClickAction+'" />'}}}return aj},receiveMatches:function(aj,ak){if(usermode==DRIVERMODE){}else{}this.parsematcheslist(aj,ak)},receiveInactiveMatches:function(aj,ak){if(usermode==DRIVERMODE){w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+aj.replace("r","")+"/matches",false,this.setInactiveOfferMatches,function(al,am,an){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(al,am,an,"This ride offer is no longer available.")})}else{if(usermode==RIDERMODE){w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+aj.replace("r","")+"/matches",false,this.setInactiveSearchMatches,function(al,am,an){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(al,am,an,"This offer is no longer available.")})}}this.parseinactivematcheslist(aj,ak)},receiveUpdates:function(){w.GET("/OpenRideServer-RS/resources/configuration/updates",false,function(aj){fokus.openride.mobclient.controller.modules.modulemanager.setriderupdatecount(aj.UpdateResponse.updatedsearches);fokus.openride.mobclient.controller.modules.modulemanager.setdriverupdatecount(aj.UpdateResponse.updatedoffers)},function(aj,ak,al){clearInterval(updateCountRefreshTimer);fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aj,ak,al,"Error receiving update data.")})},getServiceType:function(){return A},setServiceType:function(aj){A=aj},getRideId:function(){return y},deleteModAdrFromBox:function(al){var ak=document.getElementById(al);if(ak.length>0){for(var aj=0;aj<ak.length;aj++){if(ak[aj].mod){ak[aj]=null}}}},modifyRide:function(aw){var ax=this.tmpRide;y=aw;var ay;var ak;var ao;var at;var al;var au;var ar;var aj;var av;var ap;this.deleteModAdrFromBox(L);this.deleteModAdrFromBox(C);this.deleteModAdrFromBox(q);this.deleteModAdrFromBox(n);if(usermode==DRIVERMODE){if(ax!=""){aw=ax.rideid}w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+aw,false,this.setRide,function(az,aA,aB){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(az,aA,aB,"Sorry, the offer to edit could not be loaded from the server.")});var an=JSON.parse(z).Offer;ay=document.createElement("option");ak=document.getElementById(L);ay.latln=an.ridestartPtLat+","+an.ridestartPtLon;ay.innerHTML=an.startptAddress;ay.mod=true;ak.add(ay,null);ak.selectedIndex=ak.length-1;ao=document.createElement("option");at=document.getElementById(C);ao.latln=an.rideendPtLat+","+an.rideendPtLon;ao.innerHTML=an.endptAddress;ao.mod=true;at.add(ao,null);at.selectedIndex=at.length-1;document.getElementById("offerseatsselect").selectedIndex=an.offeredSeatsNo-1;switch(an.rideprice){case 1.8:document.getElementById("offerpriceselect").selectedIndex=0;break;case 1.9:document.getElementById("offerpriceselect").selectedIndex=1;break;case 2:document.getElementById("offerpriceselect").selectedIndex=2;break;case 2.1:document.getElementById("offerpriceselect").selectedIndex=3;break;case 2.2:document.getElementById("offerpriceselect").selectedIndex=4;break;case 2.3:document.getElementById("offerpriceselect").selectedIndex=5;break}al=new Date(an.ridestartTime);au=al.getDate();if(au<10){au="0"+au}ar=al.getMonth()+1;if(ar<10){ar="0"+ar}aj=al.getFullYear();av=al.getHours();if(av<10){av="0"+av}ap=al.getMinutes();if(ap<10){ap="0"+ap}document.getElementById("dayLabel").innerHTML=au;document.getElementById("monthLabel").innerHTML=ar;document.getElementById("yearLabel").innerHTML=aj;document.getElementById("hourLabel").innerHTML=av;document.getElementById("minuteLabel").innerHTML=ap;X.setDay(al.getDate());X.setMin(al.getMinutes());X.setHour(al.getHours());X.setMonth(al.getMonth());X.setYear(al.getFullYear())}else{if(ax!=""){aw=ax.riderRouteId}w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+aw,false,this.setRide,function(az,aA,aB){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(az,aA,aB,"Sorry, the ad you want to edit could not be loaded from the server.")});var aq=JSON.parse(z).Search;ay=document.createElement("option");ak=document.getElementById(q);ay.latln=aq.ridestartPtLat+","+aq.ridestartPtLon;ay.innerHTML=aq.startptAddress;ay.mod=true;ak.add(ay,null);ak.selectedIndex=ak.length-1;ao=document.createElement("option");at=document.getElementById(n);ao.latln=aq.rideendPtLat+","+aq.rideendPtLon;ao.innerHTML=aq.endptAddress;ao.mod=true;at.add(ao,null);at.selectedIndex=at.length-1;var am=((aq.ridestartTimeLatest-aq.ridestartTimeEarliest)/1000)/60;switch(am){case 10:document.getElementById("searchwaitimeselect").selectedIndex=0;break;case 15:document.getElementById("searchwaitimeselect").selectedIndex=1;break;case 20:document.getElementById("searchwaitimeselect").selectedIndex=2;break;case 30:document.getElementById("searchwaitimeselect").selectedIndex=3;break;case 45:document.getElementById("searchwaitimeselect").selectedIndex=4;break;case 60:document.getElementById("searchwaitimeselect").selectedIndex=5;break;case 120:document.getElementById("searchwaitimeselect").selectedIndex=6;break;case 180:document.getElementById("searchwaitimeselect").selectedIndex=7;break;case 240:document.getElementById("searchwaitimeselect").selectedIndex=8;break}document.getElementById("searchseatsselect").selectedIndex=aq.searchedSeatsNo-1;al=new Date(aq.ridestartTimeEarliest);au=al.getDate();if(au<10){au="0"+au}ar=al.getMonth()+1;if(ar<10){ar="0"+ar}aj=al.getFullYear();av=al.getHours();if(av<10){av="0"+av}ap=al.getMinutes();if(ap<10){ap="0"+ap}document.getElementById("searchdayLabel").innerHTML=au;document.getElementById("searchmonthLabel").innerHTML=ar;document.getElementById("searchyearLabel").innerHTML=aj;document.getElementById("searchhourLabel").innerHTML=av;document.getElementById("searchminuteLabel").innerHTML=ap;X.setDay(al.getDate());X.setMin(al.getMinutes());X.setHour(al.getHours());X.setMonth(al.getMonth());X.setYear(al.getFullYear())}A=H;this.setTabContent(1,0)},deleteRide:function(aj){if(usermode==DRIVERMODE){w.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+aj,false,showOverlayDialog("Your offer was successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI"),"",""),function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Sorry, the offer could not be deleted.")});fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI")}else{w.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+aj,false,showOverlayDialog("Your request has been successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI"),"",""),function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Unfortunately, this request could not be deleted.")});fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI")}},setFullScreenMapView:function(am){var ao=document.getElementById(am);document.getElementById("tabmenu").style.display="none";document.getElementById("content").style.display="none";ao.style.display="block";var al=l.getUserLocation();if(al==null){al=new google.maps.LatLng(52.525798,13.314266)}else{var ap=al;al=new google.maps.LatLng(ap.coords.latitude,ap.coords.longitude)}if(am=="offerstartgmapscreencontainer"){U.setMapMode(0);U.initialize("offerstartgmap","offerstartgmapaddressinput",al)}else{if(am=="offerdestgmapscreencontainer"){U.setMapMode(0);U.initialize("offerdestgmap","offerdestgmapaddressinput",al)}else{if(am=="searchstartgmapscreencontainer"){U.setMapMode(0);U.initialize("searchstartgmap","searchstartgmapaddressinput",al)}else{if(am=="searchdestgmapscreencontainer"){U.setMapMode(0);U.initialize("searchdestgmap","searchdestgmapaddressinput",al)}else{if(am=="offerroutegmapscreencontainer"){U.setMapMode(1);if(!(document.getElementById("dummyaddrinput"))){var an=document.createElement("div");an.id="dummyaddrinput"}var ak=U.getRoutePath();var aj;if(ak!=null&&ak!="undefined"){if(ak.length>=2){U.initialize("offerroutegmap","dummyaddrinput",ak[0])}else{showOverlayDialog("Get Directions","<br />The route can not currently be determined! Please check your Internet connection and try again!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(am=="searchroutegmapscreencontainer"){U.setMapMode(1);if(!(document.getElementById("dummyaddrinput"))){var an=document.createElement("div");an.id="dummyaddrinput"}var ak=U.getRoutePath();var aj;if(ak!=null&&ak!="undefined"){if(ak.length>=2){U.initialize("searchroutegmap","dummyaddrinput",ak[0])}else{showOverlayDialog("Get Directions","<br />The route can not currently be determined! Please check your Internet connection and try again!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(am=="viaptroutegmapscreencontainer"){U.setMapMode(2);if(!(document.getElementById("dummyaddrinput"))){var an=document.createElement("div");an.id="dummyaddrinput"}var ak=U.getRoutePath();var aj;if(ak!=null&&ak!="undefined"){if(ak.length>=2){U.initialize("viaptroutegmap","dummyaddrinput",ak[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(am=="favoritesgmapscreencontainer"){U.setMapMode(0);U.initialize("favoritesgmap","favoritesgmapaddressinput",al)}}}}}}}}this.displayedFullScreenMapId=am},returnFromFullscreenMapView:function(){document.getElementById(this.displayedFullScreenMapId).style.display="none";document.getElementById("tabmenu").style.display="block";document.getElementById("content").style.display="block"},parsefavoriteslist:function(al,aq){var ar=JSON.parse(aq);var aj="";d=new Array();if(typeof(ar.list[0].FavoritePointResponse)!="undefined"){if(typeof(ar.list[0].FavoritePointResponse.length)=="undefined"){ar.list[0].FavoritePointResponse=[ar.list[0].FavoritePointResponse]}for(var ak=0;ak<ar.list[0].FavoritePointResponse.length;ak++){var ao=ar.list[0].FavoritePointResponse[ak];var ap=ao.favptDisplayName;d.push(ap);var am=ao.favptAddress;var an=ao.favptId;aj+="<div class='fav-row' style='border-bottom: 1px solid #ccc; padding: 5px;'><div style='float: right; margin: 2px 0px 0 0;'><input type=\"button\" class=\"rounded compact\" onclick=\"showOverlayDialog('Really want to delete this bookmark?', '', 'Ja', 'fokus.openride.mobclient.controller.modules.modulemanager.deleteFavPt("+ak+");', 'Nein', '');\" value=\"X\" /></div><div style='line-height: 140%'><strong>"+ap+"</strong><br />"+am+"</div></div>"}}else{aj="<span style='font-weight:bold;padding:10px;'>No favorites to show!</span>"}document.getElementById(al).innerHTML=aj},deleteFavPt:function(aj){w.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints/"+encodeURI($("<div />").html(d[aj]).text()),true,function(){fokus.openride.mobclient.controller.modules.modulemanager.setView("favlistUI")},function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Unfortunately, the favorite could not be deleted.")})},parseprofilepersonaldata:function(ak){var am=ai.getProfileRequest();ab=ai;document.getElementById("profilepersonaldatafirstname").innerHTML=am.firstName;document.getElementById("profilepersonaldatalastname").innerHTML=am.lastName;if(am.gender=="m"){genderString="male"}else{genderString="female"}document.getElementById("profilepersonaldatagender").innerHTML=genderString;var al;var aj="";if(typeof(am.dateOfBirth)!="undefined"&&am.dateOfBirth.indexOf(".")!=-1){al=new Date(am.dateOfBirth);aj=al.getDate()+"."+(al.getMonth()+1)+"."+al.getFullYear()}else{aj=""}document.getElementById("profilepersonaldatadateofbirth").value=aj;document.getElementById("profilepersonaldataemail").value=$("<div />").html(am.email).text();document.getElementById("profilepersonaldatamobilephonenumber").value=am.mobilePhoneNumber||"";if(am.streetAddress){document.getElementById("profilepersonaldatastreetaddress").value=$("<div />").html(am.streetAddress).text()||""}document.getElementById("profilepersonaldatazipcode").value=am.zipCode||"";if(am.city){document.getElementById("profilepersonaldatacity").value=$("<div />").html(am.city).text()||""}if(am.isSmoker=="n"){isSmokerOption="profilepersonaldataissmoker-no"}else{if(am.isSmoker=="y"){isSmokerOption="profilepersonaldataissmoker-yes"}else{isSmokerOption="profilepersonaldataissmoker-null"}}document.getElementById(isSmokerOption).checked="checked";if(am.carColour){document.getElementById("profilepersonaldatacarcolour").value=$("<div />").html(am.carColour).text()||""}if(am.carBrand){document.getElementById("profilepersonaldatacarbrand").value=$("<div />").html(am.carBrand).text()||""}if(am.carPlateNo){document.getElementById("profilepersonaldatacarplateno").value=$("<div />").html(am.carPlateNo).text()||""}},validateDate:function(aj){validMonth=false;if(aj.split(".").length==3&&aj.split(".")[1]>0&&aj.split(".")[1]<=12&&aj.split(".")[0]>0&&aj.split(".")[0]<=31&&aj.split(".")[2]>1900){validMonth=true}parsedDate=this.parsedate(aj);if(!validMonth||!parsedDate){return false}else{return parsedDate}},putprofilepersonaldata:function(){if(document.getElementById("profilepersonaldataemail").value==""){showOverlayDialog("Specifying an email address is mandatory.","","OK","","","");return}if(document.getElementById("profilepersonaldatamobilephonenumber").value==""){showOverlayDialog("Specifying a mobile phone number is mandatory.","","OK","","","");return}var al;if(document.getElementById("profilepersonaldatadateofbirth").value!=""){al=this.validateDate(document.getElementById("profilepersonaldatadateofbirth").value);if(!al|!am(document.getElementById("profilepersonaldatadateofbirth").value,"DMY")){showOverlayDialog('Please specify a valid date of birth in the format "dd.mm.yyyy". The date must not be in the future.',"","OK","","","");return}}function am(ar,aw){if(aw==null){aw="MDY"}aw=aw.toUpperCase();if(aw.length!=3){aw="MDY"}if((aw.indexOf("M")==-1)||(aw.indexOf("D")==-1)||(aw.indexOf("Y")==-1)){aw="MDY"}if(aw.substring(0,1)=="Y"){var aq=/^\d{2}(\-|\/|\.)\d{1,2}\1\d{1,2}$/;var ap=/^\d{4}(\-|\/|\.)\d{1,2}\1\d{1,2}$/}else{if(aw.substring(1,2)=="Y"){var aq=/^\d{1,2}(\-|\/|\.)\d{2}\1\d{1,2}$/;var ap=/^\d{1,2}(\-|\/|\.)\d{4}\1\d{1,2}$/}else{var aq=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2}$/;var ap=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/}}if((aq.test(ar)==false)&&(ap.test(ar)==false)){return false}var au=ar.split(RegExp.$1);if(aw.substring(0,1)=="M"){var at=au[0]}else{if(aw.substring(1,2)=="M"){var at=au[1]}else{var at=au[2]}}if(aw.substring(0,1)=="D"){var ax=au[0]}else{if(aw.substring(1,2)=="D"){var ax=au[1]}else{var ax=au[2]}}if(aw.substring(0,1)=="Y"){var av=au[0]}else{if(aw.substring(1,2)=="Y"){var av=au[1]}else{var av=au[2]}}if(parseFloat(av)<=50){av=(parseFloat(av)+2000).toString()}if(parseFloat(av)<=99){av=(parseFloat(av)+1900).toString()}var ao=new Date(parseFloat(av),parseFloat(at)-1,parseFloat(ax),0,0,0,0);if(parseFloat(ax)!=ao.getDate()){return false}if(parseFloat(at)-1!=ao.getMonth()){return false}var an=new Date();if(ao.getTime()>=an.getTime()){return false}return true}var ak;var aj=fokus.openride.mobclient.controller.modules.profile;ai.setDateOfBirth(al);ai.setEmail(document.getElementById("profilepersonaldataemail").value);ai.setMobilePhoneNumber(document.getElementById("profilepersonaldatamobilephonenumber").value);ai.setStreetAddress(document.getElementById("profilepersonaldatastreetaddress").value);ai.setZipCode(document.getElementById("profilepersonaldatazipcode").value||0);ai.setCity(document.getElementById("profilepersonaldatacity").value);if(document.getElementById("profilepersonaldataissmoker-yes").checked){isSmokerValue="y"}else{if(document.getElementById("profilepersonaldataissmoker-no").checked){isSmokerValue="n"}else{isSmokerValue="-"}}ai.setIsSmoker(isSmokerValue);ai.setLicenseDate(ak);ai.setCarColour(document.getElementById("profilepersonaldatacarcolour").value||ak);ai.setCarBrand(document.getElementById("profilepersonaldatacarbrand").value||ak);ai.setCarBuildYear(ak);ai.getProfileRequest()._revision=ai.getProfileRequest()._revision+1;$.ajax({type:"PUT",url:"https://"+PeerMenager+"/users/"+username+"/profile",data:JSON.stringify(ai.getProfileRequest()),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(an){an.withCredentials=true,an.setRequestHeader("Authorization","Basic "+username+":"+password);an.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");an.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ao,ap,an){showOverlayDialog("Personal data was saved successfully!","","OK","","","")},error:function(ap,ao,an){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ap,ao,an,"Unfortunately, your data could not be stored.")}})},parsedate:function(aj){var ak=aj.split(".");if(ak.length!=3){return false}var al=new Date(ak[2],ak[1]-1,ak[0]);return al.getTime()},parseprofilepreferences:function(aj){if(typeof(aj.PreferencesResponse)!="undefined"){var ak=aj.PreferencesResponse;if(ak.prefIsSmoker=="y"){isSmokerOption="profileprefissmoker-yes"}else{if(ak.prefIsSmoker=="n"){isSmokerOption="profileprefissmoker-no"}else{isSmokerOption="profileprefissmoker-null"}}document.getElementById(isSmokerOption).checked="checked"}},putprofilepreferences:function(){var aj=fokus.openride.mobclient.controller.modules.profile;if(document.getElementById("profileprefissmoker-yes").checked){isSmokerValue="y"}else{if(document.getElementById("profileprefissmoker-no").checked){isSmokerValue="n"}else{isSmokerValue="-"}}aj.setPrefIsSmoker(isSmokerValue);w.PUT("/OpenRideServer-RS/resources/users/"+this.username+"/profile/preferences",true,aj.getPreferencesRequest(),function(){showOverlayDialog("Preferences were saved successfully!","","OK","","","")},function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Unfortunately, your preferences could not be saved.")})},putprofilepassword:function(){if(document.getElementById("profilepasswordold").value==""||document.getElementById("profilepassword").value==""||document.getElementById("profilepasswordcheck").value==""){showOverlayDialog("The specification of the old and new password is mandatory.","","OK","","","");return}if(document.getElementById("profilepassword").value!=document.getElementById("profilepasswordcheck").value){showOverlayDialog("The passwords do not match.","","OK","","","");return}var aj=fokus.openride.mobclient.controller.modules.profile;aj.setPasswordOld(document.getElementById("profilepasswordold").value);aj.setPassword(document.getElementById("profilepassword").value);w.PUT("/OpenRideServer-RS/resources/users/"+this.username+"/profile/password",true,aj.getPasswordRequest(),function(){showOverlayDialog("Password successfully changed!","","OK","","","")},function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Sorry, your password could not be changed.")})},parseratingssummary:function(aj,am){var ao=0;var at=0;var ar=0;var al=0;var aq=0;var an=0;var ap="male";var ak="";if(am!=null){at=am.average_OnTime;al=am.average_Friendly;aq=am.average_StarRating;an=am.total_StarRating/am.average_StarRating}else{ao="N/A";at="N/A";ar="N/A";al="N/A";aq="N/A"}if(ab.gender=="f"){ap="Female"}document.getElementById("ratingsUserName").innerHTML=user;document.getElementById("ratingsUserGender").innerHTML=ap;if(ab.streetAddress!="undefined"&&ab.streetAddress!=""){ak+=ab.streetAddress}if(ab.city!="undefined"&&ab.city!=""){ak+=", "+ab.city}document.getElementById("ratingsUserLocation").innerHTML=ak;document.getElementById("ratingssummarytotal").innerHTML=aq+" (From "+an+" people)";document.getElementById("ratingssummarypositive").innerHTML=ao;document.getElementById("ratingssummarydecent").innerHTML=at;document.getElementById("ratingssummaryneutral").innerHTML=ar;document.getElementById("ratingssummarymediocre").innerHTML=al},parseopenratingslist:function(aj,ak){var al="<h3>Write reviews</h3>";d=new Array();pass=readCookie("password");var al="Loading...";if(rides.length>0){al=""}else{al="You have rated all previous rides."}$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/subject/byURI/"+user,data:"",crossDomain:true,username:user,password:pass,beforeSend:function(am){am.setRequestHeader("Authorization","Basic "+user+":"+pass);am.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(ax,ap){var aw=JSON.parse(ax);var at=aw.subject_id;var aD=aw.authored_reports;var az=[];for(var au in aD){var ar=aD[au];var am=ar.event;var ay=am.indexOf("/");var ao=am.substring(ay+1);az.push(parseInt(ao))}for(var av=0;av<rides.length;av++){if(!rides.hasOwnProperty(av)){continue}aw=JSON.parse(rides[av]);if(az.indexOf(aw.index)==-1){continue}if(aw.potentiallyAgreedCommuters.length!=0&&aw.potentiallyAgreedCommuters!=[""]&&aw.potentiallyAgreedCommuters!=[]){continue}var aC=[-1,0,-1,0,-1];submitted_rides[av]=aC;var aq=new Date(+aw.depDateTimeWindow.depDateTimeLow);var aB=aq.getHours();if(aB<10){aB="0"+aB}var an=aq.getMinutes();if(an<10){an="0"+an}var aA=""+aB+":"+an+" "+aq.getDate()+"."+aq.getMonth()+"."+aq.getFullYear();if(usermode==DRIVERMODE){ao=aw.commuters}else{ao=aw.driver}al+='<div class="open-rating-row" style="border-bottom: 1px solid #ccc; padding: 5px; min-height: 60px; clear: both;" id="openrating'+at+'">    <div class="profile-info-short" style="float: left; margin: 0 15px 0 0; text-align: right;"><img src="../../OpenRideWeb/img/icon.png" style="width: 60px; height: 60px; display: block; background: #ddd;" /><br> </div>    <div style="line-height: 140%; padding-left: 75px;">        Ride with: '+ao+' taken on: <div style="color:#96bd0d;"><strong>'+aA+"</strong><br> "+aw.departureCity+" -> "+aw.destinationCity+'<br><br></div>    </div>    <div class="open-rating-buttons" style="line-height: 100%;"><br><br><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Overall: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(0,av)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Reliability: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(2,av)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Friendliness: </strong>&nbsp;&nbsp;&nbsp;&nbsp;'+stars(4,av)+'</div><div align="center" style="color=#96bd0d; font-family: Arial, sans-serif;"><strong><input vertical-align:middle; horizontal-align:middle;  type="button" class="rounded compact" value="Submit" onClick="comment(\''+aw.index+"-"+av+""+5+"');\"></strong></div>    </div></div>"}if(al){document.getElementById(aj).innerHTML=al}},error:function(ao,an,am){alert("state: "+ao.readyState);alert("status: "+ao.status);alert("response "+ao.responseText);alert("this error is: "+am)}})},postrating:function(ak,al,aj){var am=fokus.openride.mobclient.controller.modules.ratings;am.setRiderRouteId(ak);am.setGivenRating(al);am.setGivenRatingComment(aj);w.POST("/OpenRideServer-RS/resources/users/"+this.username+"/ratings",true,am.getGivenRatingRequest(),function(){showOverlayDialog("Your review was submitted successfully.","","OK","","","");fokus.openride.mobclient.controller.modules.modulemanager.setView("openratingsUI")},function(an,ao,ap){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(an,ao,ap,"Oops, your vote could not be delivered.")})},parsereceivedratingslist:function(ak,aq){var ar=JSON.parse(aq);var aj="<h3>Ratings received</h3>";d=new Array();if(typeof(ar.list[0].ReceivedRatingResponse)!="undefined"){if(typeof(ar.list[0].ReceivedRatingResponse.length)=="undefined"){ar.list[0].ReceivedRatingResponse=[ar.list[0].ReceivedRatingResponse]}for(var al=0;al<ar.list[0].ReceivedRatingResponse.length;al++){var ao=ar.list[0].ReceivedRatingResponse[al];var ap="";if(ao.custRole=="d"){if(ao.custGender=="m"){ap="Your drivers"}else{if(ao.custGender=="f"){ap="Your drivers"}}}else{if(ao.custRole=="r"){if(ao.custGender=="m"){ap="Your riders"}else{if(ao.custGender=="f"){ap="Your riders"}}}}var am=new Date(ao.timestamprealized);var an="";if(typeof(ao.receivedRatingComment)!="undefined"&&ao.receivedRatingComment!=""){an="&bdquo;"+ao.receivedRatingComment+"&ldquo;"}else{switch(ao.receivedRating){case 1:an='<span style="color: #aaa; font-style: italic;">Positiv bewertet</span>';break;case 0:an='<span style="color: #aaa; font-style: italic;">Neutral bewertet</span>';break;case -1:an='<span style="color: #aaa; font-style: italic;">Negativ bewertet</span>';break}}aj+='<div class="rating-row" style="border-bottom: 1px solid #ccc; padding: 5px; min-height: 60px; clear: both;"><div class="profile-info-short" style="float: left; margin: 0 15px 0 0; text-align: right;"><img src="../../OpenRideWeb/pictures/profile/'+ao.custNickname+"_"+ao.custId+'_thumb.jpg" alt="Profilbild von '+ao.custNickname+'" style="width: 60px; height: 60px; display: block; background: #ddd;" /></div><div style="line-height: 140%; padding-left: 75px;"><strong>'+ao.custNickname+"</strong> &ndash; <br />"+ap+" am "+am.getDate()+"."+(am.getMonth()+1)+"."+am.getFullYear()+':<br /><img src="../img/rated_'+ao.receivedRating+'.png" style="vertical-align: -3px; padding: 0 5px 0 5px;" /> '+an+"</div></div>"}}else{aj+="<p>No one has written a review for you.</p>"}document.getElementById(ak).innerHTML=aj},setView:function(aD){document.getElementById(this.currentdisplayedview).style.display="none";document.getElementById(aD).style.display="block";var aG=l.getUserLocation();if(aG==null){aG=new google.maps.LatLng(52.525798,13.314266)}else{var aq=aG;aG=new google.maps.LatLng(aq.coords.latitude,aq.coords.longitude)}clearInterval(tabListActiveRefreshTimer);if(aD=="activeofferUI"||aD=="activesearchUI"){clearInterval(updateCountRefreshTimer);updateCountRefreshTimer=0}else{if(!updateCountRefreshTimer){if(updateCountRefreshTimer==0){this.receiveUpdates()}updateCountRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveUpdates()",15000)}}mode=readCookie("usermode");if(aD=="offerstartpickerUI"){U.setMapMode(0);U.initialize("offerstartmap","offerstartaddrinput",aG)}else{if(aD=="newofferUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));var al=readCookie("password");$.ajax({type:"GET",url:"https://"+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aH){aH.withCredentials=true,aH.setRequestHeader("Authorization","Basic "+this.username+":"+al);aH.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aH.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aI,aJ,aH){ai.setAllData(aI);if(!ai.getCarColour||!ai.getCarBrand){showOverlayDialog("Please complete your car description in your profile before you can set ride offers.","","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(0, 1);","","")}},error:function(aJ,aI,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aJ,aI,aH,"Unfortunately, your profile information could not be loaded.")}});if(A=="modify"){document.getElementById("tabimg11").src="../img/tab1AngebotAendernActive_wide.png"}else{document.getElementById("tabimg11").src="../img/tab1NeuesAngebotActive_wide.png"}document.getElementById(S).value="Location: undetermined!";document.getElementById(S).latln="none";document.getElementById(p).value="Location: undetermined!";document.getElementById(p).latln="none";try{U.insertRevGeocodedAddr(l.getUserLocation(),S);U.insertRevGeocodedAddr(l.getUserLocation(),p)}catch(aC){}if(!this.detailsClicked){var at=document.getElementById(L);var ar=at.length;for(var aB=ar-1;aB>1;aB--){if(!at[aB].mod){at[aB]=null}}at=document.getElementById(C);ar=at.length;for(var aA=ar-1;aA>1;aA--){if(!at[aA].mod){at[aA]=null}}w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints",false,function(aW){var aI=document.getElementById(L);var aK=document.getElementById(C);var aN=aW;if(typeof(aN.list[0].FavoritePointResponse)!="undefined"){if(typeof(aN.list[0].FavoritePointResponse.length)=="undefined"){var aO=aN.list[0].FavoritePointResponse;var aY=aO.favptDisplayName;var aJ=aO.favptAddress;var aR=aO.favptGeoCoords;var aP=aO.favptId;var aU=document.createElement("option");var aX=document.createElement("option");aU.innerHTML=aY+": "+aJ;aU.latln=aR;aX.innerHTML=aY+": "+aJ;aX.latln=aR;aI.add(aU,null);aK.add(aX,null)}else{for(var aS=0;aS<aN.list[0].FavoritePointResponse.length;aS++){var aH=aN.list[0].FavoritePointResponse[aS];var aQ=aH.favptDisplayName;var aV=aH.favptAddress;var aL=aH.favptGeoCoords;var aZ=aH.favptId;var aT=document.createElement("option");var aM=document.createElement("option");aT.innerHTML=aQ+": "+aV;aT.latln=aL;aM.innerHTML=aQ+": "+aV;aM.latln=aL;aI.add(aT,null);aK.add(aM,null)}}}else{}},function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Oops, your favorites could not be loaded.")});this.offerfavsset=true}}else{if(aD=="newsearchUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));if(A=="modify"){document.getElementById("tabimg11").src="../img/tab1GesuchAendernActive_wide.png"}else{document.getElementById("tabimg11").src="../img/tab1NeuesGesuchActive_wide.png"}document.getElementById(k).value="Location: undetermined!";document.getElementById(k).latln="none";document.getElementById(ac).value="Location: undetermined!";document.getElementById(ac).latln="none";try{U.insertRevGeocodedAddr(l.getUserLocation(),k);U.insertRevGeocodedAddr(l.getUserLocation(),ac)}catch(aC){}if(!this.detailsClicked){at=document.getElementById(q);ar=at.length;for(aB=ar-1;aB>1;aB--){if(!at[aB].mod){at[aB]=null}}at=document.getElementById(n);ar=at.length;for(aA=ar-1;aA>1;aA--){if(!at[aA].mod){at[aA]=null}}w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints",false,function(aZ){var aS=document.getElementById(q);var aM=document.getElementById(n);var aL=aZ;if(typeof(aL.list[0].FavoritePointResponse)!="undefined"){if(typeof(aL.list[0].FavoritePointResponse.length)=="undefined"){var aN=aL.list[0].FavoritePointResponse;var aX=aN.favptDisplayName;var aT=aN.favptAddress;var aJ=aN.favptGeoCoords;var aI=aN.favptId;var aV=document.createElement("option");var aP=document.createElement("option");aV.innerHTML=aX+": "+aT;aV.latln=aJ;aP.innerHTML=aX+": "+aT;aP.latln=aJ;aS.add(aV,null);aM.add(aP,null)}else{for(var aQ=0;aQ<aL.list[0].FavoritePointResponse.length;aQ++){var aK=aL.list[0].FavoritePointResponse[aQ];var aO=aK.favptDisplayName;var aW=aK.favptAddress;var aR=aK.favptGeoCoords;var aY=aK.favptId;var aU=document.createElement("option");var aH=document.createElement("option");aU.innerHTML=aO+": "+aW;aU.latln=aR;aH.innerHTML=aO+": "+aW;aH.latln=aR;aS.add(aU,null);aM.add(aH,null)}}}else{}},function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Oops, your favorites could not be loaded.")});this.searchfavsset=true}}else{if(aD=="offerdestpickerUI"){U.setMapMode(0);U.initialize("offerdestmap","offerdestaddrinput",aG)}else{if(aD=="searchstartpickerUI"){U.setMapMode(0);U.initialize("searchstartmap","searchstartaddrinput",aG)}else{if(aD=="searchdestpickerUI"){U.setMapMode(0);U.initialize("searchdestmap","searchdestaddrinput",aG)}else{if(aD=="newfavoritepickerUI"){}else{if(aD=="showofferrouteUI"){U.setMapMode(1);var ax=document.createElement("div");ax.id="dummyaddrinput";var ap=U.getRoutePath();var aF;if(ap!=null&&ap!="undefined"){if(ap.length>=2){U.initialize("offersimpleroutemap","dummyaddrinput",ap[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aD=="showsearchrouteUI"){U.setMapMode(1);var ax=document.createElement("div");ax.id="dummyaddrinput";var ap=U.getRoutePath();var aF;if(ap!=null&&ap!="undefined"){if(ap.length>=2){U.initialize("searchsimpleroutemap","dummyaddrinput",ap[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aD=="activeofferUI"){var am=new Date();var aE=am.getTimezoneOffset()/60;if(aE>0){aE="-"+aE}else{aE="+"+(-aE)}var aj=am.getFullYear()+"-"+am.getMonth()+"-"+am.getDate()+"T"+am.getHours()+":"+am.getMinutes()+":"+am.getSeconds()+aE;$.ajax({type:"POST",url:"https://provenance.ecs.soton.ac.uk/smartsociety/provbindings/binding/",data:'{"prov":"@prefix prov: <http://www.w3.org/ns/prov#> .@prefix xsd: <http://www.w3.org/2001/XMLSchema#/> .@prefix tmpl: <http://openprovenance.org/tmpl#> .@prefix var: <http://openprovenance.org/var#> .@prefix view: <168.144.152.202/OpenRideServer-RS/view/> .@prefix rideservice: <168.144.152.202/OpenRideServer-RS/> .@prefix rideserver: <168.144.152.202/> .@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .@prefix  usr: <http://168.144.202.152:3000/subject/byURI/> .var:view a prov:Entity; tmpl:value_0 rideservice:view . var:client a prov:Entity; tmpl:value_0 rideserver:OpenRideServer-RS . var:change_view a prov:Entity; tmpl:value_0 view:activeOffersView . var:username a prov:Entity; tmpl:2dvalue_0_0 usr:'+user+' . var:change_view_start_time a prov:Entity; tmpl:2dvalue_0_0 \\"'+aj+'\\"^^xsd:dateTime . var:change_view_start_end_time a prov:Entity; tmpl:2dvalue_0_0 \\"'+aj+'\\"^^xsd:dateTime .", "binding_name":"ss_change_view_binding_223", "template_name":"ss_change_view"}',crossDomain:true,headers:{"Content-Type":"text/turtle"},contentType:"text/turtle",async:"true",success:function(aH,aI){},error:function(aJ,aI,aH){}});fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers",false,this.setActiveOfferList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your listings could not be loaded.")});rides.length=0;parseOffer=this.parseactiveofferlist;var an=this.parseUnmatchedRideRequest;F=this;var av=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";al="agent1"}else{user="agent6";al="agent6"}}else{if(username=="MaxS"){user="agent2";al="agent2"}else{user="agent3";al="agent3"}}var ak=user.substring(5,user.length);var ay=parseInt(ak)-1;user=readCookie("username");al=readCookie("password");var ao=0;var au=0;$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/rideRequests",data:"user="+user,crossDomain:true,username:user,password:al,beforeSend:function(aH){aH.setRequestHeader("Authorization","Basic "+user+":"+al);aH.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aJ,aK){var aI={};aI.data=[];for(var aH in aJ.data[0]){aI.data.push({url:aJ.data[0][aH],ETag:"",doc:{}})}$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aI),crossDomain:true,username:user,password:al,beforeSend:function(aL){aL.setRequestHeader("Authorization","Basic "+user+":"+al);aL.withCredentials=true;aL.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aL.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aR,aS,aQ){rideRequests=[];var aN={};aN.data=[];var aL;var aM;var aO=JSON.parse(aR);for(var aP=0;aP<aO.data.length;aP++){aL=false;rideRequests.push(JSON.stringify(aO.data[aP].doc));if(aO.data[aP].doc.potentialRidePlans.length!=0){aL=true;for(aM=0;aM<aO.data[aP].doc.potentialRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentialRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.potentiallyAgreedRidePlans.length!=0&&!aL){aL=true;for(aM=0;aM<aO.data[aP].doc.potentiallyAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentiallyAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.driverAgreedRidePlans.length!=0&&!aL){aL=true;for(aM=0;aM<aO.data[aP].doc.driverAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.driverAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.agreedRidePlan.length!=0&&!aL){aL=true;aN.data.push({url:aO.data[aP].doc.agreedRidePlan,ETag:"",doc:{}})}if(aL){}}$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aN),crossDomain:true,username:user,password:al,beforeSend:function(aT){aT.setRequestHeader("Authorization","Basic "+user+":"+al);aT.withCredentials=true;aT.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aT.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aW,aX,aV){rides=[];var aT=JSON.parse(aW);for(var aU=0;aU<aT.data.length;aU++){rides.push(JSON.stringify(aT.data[aU].doc))}},error:function(aV,aU,aT){alert("state: "+aV.readyState);alert("status: "+aV.status);alert("response "+aV.responseText);alert("this error is: "+aT)}})},error:function(aN,aM,aL){alert("state: "+aN.readyState);alert("status: "+aN.status);alert("response "+aN.responseText);alert("this error is: "+aL)}});parseOffer()},error:function(aJ,aI,aH){alert("state: "+aJ.readyState);alert("status: "+aJ.status);alert("response "+aJ.responseText);alert("this error is: "+aH)}});this.parseactiveofferlist()}else{if(aD=="completedtripsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/inactive",false,this.setActiveOfferList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your listings could not be loaded.")});w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/inactive",false,this.setActiveSearchList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your listings could not be loaded.")});w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings/open",false,this.setOpenRatingsList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your open reviews could not be loaded.")});this.parsecompletedtriplist()}else{if(aD=="activesearchUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches",false,this.setActiveSearchList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your application could not be loaded.")});rides.length=0;parseSearch=this.parseactivesearcheslist;parseUnmatchedSearch=this.parseUnmatchedRideRequest;F=this;var av=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";al="agent1"}else{user="agent6";al="agent6"}}else{if(username=="MaxS"){user="agent2";al="agent2"}else{user="agent3";al="agent3"}}ak=user.substring(5,user.length);ay=parseInt(ak)-1;user=readCookie("username");al=readCookie("password");$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/rideRequests",data:"user="+user,crossDomain:true,username:user,password:al,beforeSend:function(aH){aH.setRequestHeader("Authorization","Basic "+user+":"+al);aH.withCredentials=true;aH.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aH.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66");aH.setRequestHeader("UHOPPER_PASSWORD",al)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aJ,aK){var aI={};aI.data=[];for(var aH in aJ.data[0]){aI.data.push({url:aJ.data[0][aH],ETag:"",doc:{}})}$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aI),crossDomain:true,username:user,password:al,beforeSend:function(aL){aL.setRequestHeader("Authorization","Basic "+user+":"+al);aL.withCredentials=true;aL.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aL.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aR,aS,aQ){rideRequests=[];var aN={};aN.data=[];var aL=false;var aM;var aO=JSON.parse(aR);for(var aP=0;aP<aO.data.length;aP++){aL=false;rideRequests.push(JSON.stringify(aO.data[aP].doc));if(aO.data[aP].doc.potentialRidePlans.length!=0){aL=true;for(aM=0;aM<aO.data[aP].doc.potentialRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentialRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.potentiallyAgreedRidePlans.length!=0){aL=true;for(aM=0;aM<aO.data[aP].doc.potentiallyAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentiallyAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.driverAgreedRidePlans.length!=0){aL=true;for(aM=0;aM<aO.data[aP].doc.driverAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.driverAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.agreedRidePlan!=""){aL=true;aN.data.push({url:aO.data[aP].doc.agreedRidePlan,ETag:"",doc:{}})}if(aL){}}$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aN),crossDomain:true,username:user,password:al,beforeSend:function(aT){aT.setRequestHeader("Authorization","Basic "+user+":"+al);aT.withCredentials=true;aT.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aT.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aW,aX,aV){rides=[];var aT=JSON.parse(aW);for(var aU=0;aU<aT.data.length;aU++){rides.push(JSON.stringify(aT.data[aU].doc))}},error:function(aT,aV,aU){alert("state: "+jq.readyState);alert("status: "+jq.status);alert("response "+jq.responseText);alert("this error is: "+aU)}});parseSearch()},error:function(aN,aM,aL){alert("state: "+aN.readyState);alert("status: "+aN.status);alert("response "+aN.responseText);alert("this error is: "+aL)}})},error:function(aJ,aI,aH){alert("state: "+aJ.readyState);alert("status: "+aJ.status);alert("response "+aJ.responseText);alert("this error is: "+aH)}});this.parseactivesearcheslist()}else{if(aD=="favlistUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"))}else{if(aD=="ratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));var al=readCookie("password");$.ajax({type:"GET",url:"https://"+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aH){aH.withCredentials=true,aH.setRequestHeader("Authorization","Basic "+this.username+":"+al);aH.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aH.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,accepts:"application/json",success:function(aI,aJ,aH){ai.setAllData(aI);fokus.openride.mobclient.controller.modules.modulemanager.parseprofilepersonaldata("fff")},error:function(aJ,aI,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aJ,aI,aH,"Unfortunately, your profile information could not be loaded.")}});var az;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";al="agent1"}else{user="agent6";al="agent6"}}else{if(username=="MaxS"){user="agent2";al="agent2"}else{user="agent3";al="agent3"}}user=readCookie("username");al=readCookie("password");var aw=this.parseratingssummary;var ax=this.parseratingssummarydiv;$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/subject/byURI/"+user,data:"",crossDomain:true,username:user,password:al,beforeSend:function(aH){aH.setRequestHeader("Authorization","Basic "+user+":"+al);aH.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(aI,aK){var aJ=JSON.parse(aI);if(aJ.versionInfo["previousVersion"]=="none"||typeOf(aJ.currentReputationReport)=="undefined"){aw(ax,null)}else{var aH=aJ.currentReputationReport["uri"];$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/"+aH,data:"",crossDomain:true,username:user,password:al,beforeSend:function(aL){aL.setRequestHeader("Authorization","Basic "+user+":"+al);aL.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(aM,aN){if(aM!=null&&aM!="undefined"&&aM!=""){var aL=JSON.parse(aM);aw(ax,aL.json)}else{aw(ax,null)}},error:function(aN,aM,aL){alert("state: "+aN.readyState);alert("status: "+aN.status);alert("response "+aN.responseText);alert("this error is: "+aL)}})}},error:function(aJ,aI,aH){alert("state: "+aJ.readyState);alert("status: "+aJ.status);alert("response "+aJ.responseText);alert("this error is: "+aH)}})}else{if(aD=="openratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings/open","false",this.setOpenRatingsList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, your open reviews could not be loaded.")});rides.length=0;F=this;parseOpenRatings=this.parseopenratingslist;var av=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";al="agent1"}else{user="agent6";al="agent6"}}else{if(username=="MaxS"){user="agent2";al="agent2"}else{user="agent3";al="agent3"}}var ak=user.substring(5,user.length);var ay=parseInt(ak)-1;user=readCookie("username");al=readCookie("password");$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/rideRequests",data:"user="+user,crossDomain:true,username:user,password:al,beforeSend:function(aH){aH.setRequestHeader("Authorization","Basic "+user+":"+al);aH.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aJ,aK){var aI={};aI.data=[];for(var aH in aJ.data[0]){aI.data.push({url:aJ.data[0][aH],ETag:"",doc:{}})}$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aI),crossDomain:true,username:user,password:al,beforeSend:function(aL){aL.setRequestHeader("Authorization","Basic "+user+":"+al);aL.withCredentials=true;aL.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aL.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aR,aS,aQ){rideRequests=[];var aN={};aN.data=[];var aL;var aM;var aO=JSON.parse(aR);for(var aP=0;aP<aO.data.length;aP++){aL=false;rideRequests.push(JSON.stringify(aO.data[aP].doc));if(aO.data[aP].doc.potentialRidePlans.length!=0){aL=true;for(aM=0;aM<aO.data[aP].doc.potentialRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentialRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.potentiallyAgreedRidePlans.length!=0&&!aL){aL=true;for(aM=0;aM<aO.data[aP].doc.potentiallyAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.potentiallyAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.driverAgreedRidePlans.length!=0&&!aL){aL=true;for(aM=0;aM<aO.data[aP].doc.driverAgreedRidePlans.length;aM++){aN.data.push({url:aO.data[aP].doc.driverAgreedRidePlans[aM],ETag:"",doc:{}})}}if(aO.data[aP].doc.agreedRidePlan.length!=0&&!aL){aL=true;aN.data.push({url:aO.data[aP].doc.agreedRidePlan,ETag:"",doc:{}})}if(aL){}}if(aN.length!=0){$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aN),crossDomain:true,username:user,password:al,beforeSend:function(aT){aT.setRequestHeader("Authorization","Basic "+user+":"+al);aT.withCredentials=true;aT.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aT.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aW,aX,aV){rides=[];var aT=JSON.parse(aW);for(var aU=0;aU<aT.data.length;aU++){rides.push(JSON.stringify(aT.data[aU].doc))}},error:function(aV,aU,aT){alert("state: "+aV.readyState);alert("status: "+aV.status);alert("response "+aV.responseText);alert("this error is: "+aT)}})}parseOpenRatings(F.openratingslistdiv,null)},error:function(aN,aM,aL){alert("state: "+aN.readyState);alert("status: "+aN.status);alert("response "+aN.responseText);alert("this error is: "+aL)}})},error:function(aJ,aI,aH){alert("state: "+aJ.readyState);alert("status: "+aJ.status);alert("response "+aJ.responseText);alert("this error is: "+aH)}});this.parseopenratingslist(this.openratingslistdiv,B)}else{if(aD=="receivedratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings",false,this.setReceivedRatingsList,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Oops, your received rating could not be loaded.")});this.parsereceivedratingslist(this.receivedratingslistdiv,a)}else{if(aD=="profileUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));var al=readCookie("password");$.ajax({type:"GET",url:"https://"+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aH){aH.withCredentials=true,aH.setRequestHeader("Authorization","Basic "+this.username+":"+al);aH.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aH.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aI,aJ,aH){ai.setAllData(aI);fokus.openride.mobclient.controller.modules.modulemanager.parseprofilepersonaldata("fff")},error:function(aJ,aI,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aJ,aI,aH,"Unfortunately, your profile information could not be loaded.")}});w.GET("/OpenRideServer-RS/resources/users/"+this.username+"/profile/preferences",false,this.parseprofilepreferences,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Oops, your settings could not be loaded.")})}else{if(aD=="homeUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));w.GET("/OpenRideServer-RS/resources/configuration/init",false,fokus.openride.mobclient.controller.modules.uievents.parseInitData,function(aH,aI,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aI,aJ,"Unfortunately, initial data could not be loaded.")})}}}}}}}}}}}}}}}}}}this.currentdisplayedview=aD;this.detailsClicked=false},dummy:function(){return},changeViewAndUserMode:function(aj){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));switch(aj){case"offers":if(usermode!=DRIVERMODE){fokus.openride.mobclient.controller.modules.modulemanager.changemode()}fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1);break;case"searches":if(usermode!=RIDERMODE){fokus.openride.mobclient.controller.modules.modulemanager.changemode()}fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1);break;case"ratings":fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(2,1);break}},changemode:function(){var ak=document.getElementById("drivermodeimg");var al=document.getElementById("ridermodeimg");var aj=-1;if(usermode==DRIVERMODE){usermode=RIDERMODE;ak.src="../img/drivermodebtn_inactive.png";al.src="../img/ridermodebtn_active.png";document.getElementById("usermodeslider").style.marginLeft="0px";document.getElementById("usermodelabel").innerHTML="Rider";document.getElementById("riderupdatecount2").style.display=(document.getElementById("riderupdatecount2").innerHTML!="")?"block":"none";document.getElementById("driverupdatecount2").style.display="none";aj=1}else{if(usermode==RIDERMODE){usermode=DRIVERMODE;ak.src="../img/drivermodebtn_active.png";al.src="../img/ridermodebtn_inactive.png";document.getElementById("usermodeslider").style.marginLeft="41px";document.getElementById("usermodelabel").innerHTML="Driver";document.getElementById("driverupdatecount2").style.display=(document.getElementById("driverupdatecount2").innerHTML!="")?"block":"none";document.getElementById("riderupdatecount2").style.display="none";aj=0}}createCookie("usermode",aj,365);this.setupTabs();return aj},setriderupdatecount:function(aj){if(!aj>0){aj=""}document.getElementById("riderupdatecount").innerHTML=aj;document.getElementById("riderupdatecount2").innerHTML=aj;document.getElementById("riderupdatecount3").innerHTML=aj;document.getElementById("riderupdatecount").style.display=(aj!="")?"block":"none";if(usermode==RIDERMODE){document.getElementById("riderupdatecount2").style.display=(document.getElementById("riderupdatecount2").innerHTML!="")?"block":"none"}J=aj},reduceriderupdatecount:function(){this.setriderupdatecount(J-1)},setdriverupdatecount:function(aj){if(!aj>0){aj=""}document.getElementById("driverupdatecount").innerHTML=aj;document.getElementById("driverupdatecount2").innerHTML=aj;document.getElementById("driverupdatecount3").innerHTML=aj;document.getElementById("driverupdatecount").style.display=(aj!="")?"block":"none";if(usermode==DRIVERMODE){document.getElementById("driverupdatecount2").style.display=(document.getElementById("driverupdatecount2").innerHTML!="")?"block":"none"}G=aj},reducedriverupdatecount:function(){this.setdriverupdatecount(G-1)},alertajaxerror:function(an,ao,am,aj){var al="";var ak=false;switch(ao){case"error":switch(an.status){case 500:al="The request could not be processed by the server. <br /> If this problem persists, please contact our support team.";ak=false;break;case 502:al="The request could not be forwarded to the server. <br /> Please try again.";ak=false;break;case 400:al=aj||"The request was rejected by the server as invalid. Please check your information.";break;case 404:al=aj||"The request was rejected by the server as invalid.";break;case 0:location.href="./";break}al=al+' <br /><br /><small style="color:#999;margin-bottom:-1em;">HTTP status: '+an.status+"</small>";break;case"parseerror":al="The server response could not be processed. Please try again later.";break;case"timeout":al="The request could not be sent to the server. Please check your Internet connection.";break;case"notmodified":break;case"validateError":al=aj;break}if(al!=""){if(ak){showOverlayDialog("Error:",al,"OK","location.reload()","","")}else{showOverlayDialog("Error:",al,"OK","","","")}}}}}();jQuery.fn.sort=function(){return this.pushStack([].sort.apply(this,arguments),[])};function round(b,a){a=(a==""||a==0?1:Math.pow(10,a));b=Math.round(b*a)/a;return b}function dumpProps(c,b){for(var a in c){if(b){var d=b+"."+a+"\n"+c[a]}else{var d=a+"\n"+c[a]}if(!confirm(d)){return}if(typeof c[a]=="object"){if(b){dumpProps(c[a],b+"."+a)}else{dumpProps(c[a],a)}}}}fokus.openride.mobclient.controller.modules.uievents=function(){var T=fokus.openride.mobclient.controller.modules.mapmanager;var f=fokus.openride.mobclient.controller.modules.modulemanager;var ab=fokus.openride.mobclient.controller.modules.calendar;var L=fokus.openride.mobclient.controller.modules.calendar;var U=fokus.openride.mobclient.controller.modules.offer;var P=fokus.openride.mobclient.controller.modules.search;var n=fokus.openride.mobclient.controller.modules.nativemodule;var E=fokus.openride.mobclient.controller.serverconnector;var M=fokus.openride.mobclient.controller.modules.favorites;var aa=fokus.openride.mobclient.controller.modules.profile;var g={};var H="";var F=true;var Y="showofferrouteUI";var Q="offerstartdropd";var J="offerdestdropd";var r="searchstartdropd";var o="searchdestdropd";var R="offerstartselectcurrpos";var q="offerdestselectcurrpos";var h="searchstartselectcurrpos";var W="searchdestselectcurrpos";var K="minuteLabelEnd";var z="hourLabelEnd";var C=new Array(z,K);var t="dayLabel";var u="monthLabel";var v="yearLabel";var O="minuteLabel";var Z="hourLabel";var m=new Array(t,u,v);var w=new Array(Z,O);var X="searchdayLabel";var b="searchmonthLabel";var I="searchyearLabel";var p="searchminuteLabel";var l="searchhourLabel";var k="searchminuteLabelEnd";var B="searchhourLabelEnd";var V=new Array(X,b,I);var d=new Array(l,p);var D=new Array(B,k);var y=t;var c=Z;var ac=false;var j=false;var S=false;var N=false;function a(af,ae){if(af.length>2){y=ae}else{c=ae}for(var ad=0;ad<af.length;ad++){if(af[ad]==ae){document.getElementById(ae).className="labelStyleOnFocus"}else{document.getElementById(af[ad]).className="labelStyle"}}}function A(aj,ai){var am=ab.getDay();if(am<10){var ae="0"+am;document.getElementById(aj[0]).innerHTML=ae}else{document.getElementById(aj[0]).innerHTML=am}var af=ab.getMonth();if(af<10){var ak="0"+af;document.getElementById(aj[1]).innerHTML=ak}else{document.getElementById(aj[1]).innerHTML=af}document.getElementById(aj[2]).innerHTML=ab.getYear();var al,ah;if(ai[0].substr(ai[0].length-3)=="End"){al=ab.getHourEnd();ah=ab.getMinEnd()}else{al=ab.getHour();ah=ab.getMin()}if(al<10){var ag="0"+al;document.getElementById(ai[0]).innerHTML=ag}else{document.getElementById(ai[0]).innerHTML=al}if(ah<10){var ad="0"+ah;document.getElementById(ai[1]).innerHTML=ad}else{document.getElementById(ai[1]).innerHTML=ah}}function G(ae){f.setTabContent(1,0);var af=document.getElementById(ae);var ag=document.createElement("option");ag.innerHTML=T.currentFormattedAddress;ag.latln=T.getCenterPosition().lat()+","+T.getCenterPosition().lng();ag.mod=true;try{af.add(ag,null);af.selectedIndex=af.length-1}catch(ad){}}return{ajaxsuccess:false,validationerror:false,newfavaddrstring:"",parseInitData:function(ad){username=ad.InitResponse.nickname;password=readCookie("password");var ae="";$.ajax({type:"GET",url:"https://"+PeerMenager+"/users/"+username+"/profile/picture",data:"",crossDomain:true,accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(aj){aj.withCredentials=true,aj.setRequestHeader("Authorization","Basic "+username+":"+password);aj.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aj.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ak,al,aj){ae=ak.picture},error:function(){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,"Unfortunately, initial data could not be loaded.")}});H=ad.InitResponse.profilpic;f.username=username;T.username=username;document.getElementById("usernametag").innerHTML=username;var ah=document.getElementById("profilepicimg");var af=new Date();var ai=["מדוע ליסוע לבד כשאפשר ליסוע יחד?","למה לעמוד בפקק לבד?","נסיעות קבוצתיות מפחיתות באופן משמעותי את זיהום האוויר","נסיעות קבוצתיות יפחיתו את ההוצאות החודשיות שלך","נסיעות קבוצתיות תורמות לטיפוח החברה","המערכת מיועדת לסטודנטים באוניברסיטת בן-גוריון בלבד"];ah.src=ae;if(true){var ag=ai[Math.floor(Math.random()*ai.length)];document.getElementById("motivationmessage").innerHTML=ag+"<hr>"}document.getElementById("homeinfoopenoffers").innerHTML=ad.InitResponse.openoffers;if(ad.InitResponse.openoffers==1){document.getElementById("homeinfoopenoffers-singular").style.display="inline";document.getElementById("homeinfoopenoffers-plural").style.display="none"}else{document.getElementById("homeinfoopenoffers-singular").style.display="none";document.getElementById("homeinfoopenoffers-plural").style.display="inline"}document.getElementById("homeinfoopensearches").innerHTML=ad.InitResponse.opensearches;if(ad.InitResponse.opensearches==1){document.getElementById("homeinfoopensearches-singular").style.display="inline";document.getElementById("homeinfoopensearches-plural").style.display="none"}else{document.getElementById("homeinfoopensearches-singular").style.display="none";document.getElementById("homeinfoopensearches-plural").style.display="inline"}document.getElementById("homeinfoopenratings").innerHTML=ad.InitResponse.openratings;if(ad.InitResponse.openratings==1){document.getElementById("homeinfoopenratings-plural").style.display="none"}else{document.getElementById("homeinfoopenratings-plural").style.display="inline"}f.setriderupdatecount(ad.InitResponse.updatedsearches);f.setdriverupdatecount(ad.InitResponse.updatedoffers);document.getElementById("profilepictureform").action="../resources/users/"+username+"/profile/picture";return true},hideUnusedTabs:function(ad){var ae;for(ae in ad){document.getElementById(ad[ae]).setAttribute("class","inactiveTab")}},unhideAllTabs:function(){var ae;var ad=new Array("tabimg11","tabimg12","tabimg13","tabimg14");for(ae in ad){document.getElementById(ad[ae]).setAttribute("class","tablevel1 img")}},timerStart:function(){F=true},refreshTimer:function(){if(F){fokus.openride.mobclient.controller.modules.calendar.reset();A(m,w);A(m,C);A(V,d);A(V,D)}setTimeout("fokus.openride.mobclient.controller.modules.uievents.refreshTimer()",10000)},timerStop:function(){F=false},start:function(){f.setupTabs();this.setUpListeners();A(m,w);A(m,C);if(readCookie("usermode")==1){f.changemode()}document.getElementById("homeUI_loading").style.display="none";document.getElementById("homeUI_live").style.display="block"},setUpListeners:function(){var bd=document.getElementById("homeActiveOffers");bd.onclick=function(){f.changeViewAndUserMode("offers")};var ai=document.getElementById("homeActiveSearches");ai.onclick=function(){f.changeViewAndUserMode("searches")};var aQ=document.getElementById("homeOpenRatings");aQ.onclick=function(){f.changeViewAndUserMode("ratings")};var be=document.getElementById(t);var az=document.getElementById(u);var ca=document.getElementById(v);var bM=document.getElementById(Z);var bl=document.getElementById(O);var b3=document.getElementById(z);var aE=document.getElementById(K);be.onclick=function(){a(m,t)};az.onclick=function(){a(m,u)};ca.onclick=function(){a(m,v)};bM.onclick=function(){a(w,Z)};bl.onclick=function(){a(w,O)};b3.onclick=function(){a(C,z)};aE.onclick=function(){a(C,K)};var aO=document.getElementById("dateuparrow");var bN=document.getElementById("dateuparrowlink");bN.href="javascript:void(0);";aO.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(y==t){ab.increaseDay()}else{if(y==u){ab.increaseMonth()}else{if(y==v){ab.increaseYear()}}}A(m,w)};var bQ=document.getElementById("datedownarrow");var b7=document.getElementById("datedownarrowlink");b7.href="javascript:void(0);";bQ.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(y==t){ab.decreaseDay()}else{if(y==u){ab.decreaseMonth()}else{if(y==v){ab.decreaseYear()}}}A(m,w)};var bf=document.getElementById("timeuparrow");var bg=document.getElementById("timeuparrowlink");bg.href="javascript:void(0);";bf.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==Z){ab.increaseHour()}else{if(c==O){ab.increaseMin(5)}}A(m,w)};var bk=document.getElementById("timedownarrow");var bc=document.getElementById("timedownarrowlink");bc.href="javascript:void(0);";bk.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==Z){ab.decreaseHour()}else{if(c==O){ab.decreaseMin(5)}}A(m,w)};var bb=document.getElementById("timeuparrowEnd");var aj=document.getElementById("timeuparrowlinkEnd");aj.href="javascript:void(0);";bb.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==z){ab.increaseHourEnd()}else{if(c==K){ab.increaseMinEnd(5)}}A(m,C)};var aW=document.getElementById("timedownarrowEnd");var bG=document.getElementById("timedownarrowlinkEnd");bG.href="javascript:void(0);";aW.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==z){ab.decreaseHourEnd()}else{if(c==K){ab.decreaseMinEnd(5)}}A(m,C)};var aN=document.getElementById(X);var b6=document.getElementById(b);var ay=document.getElementById(I);var af=document.getElementById(l);var b8=document.getElementById(p);var al=document.getElementById(B);var bA=document.getElementById(k);aN.onclick=function(){a(V,X)};b6.onclick=function(){a(V,b)};ay.onclick=function(){a(V,I)};af.onclick=function(){a(d,l)};b8.onclick=function(){a(d,p)};al.onclick=function(){a(D,B)};bA.onclick=function(){a(D,k)};var bw=document.getElementById("searchdateuparrow");var bh=document.getElementById("searchdateuparrowlink");bh.href="javascript:void(0);";bw.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(y==X){ab.increaseDay()}else{if(y==b){ab.increaseMonth()}else{if(y==I){ab.increaseYear()}}}A(V,d)};var ba=document.getElementById("searchdatedownarrow");var ar=document.getElementById("searchdatedownarrowlink");ar.href="javascript:void(0);";ba.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(y==X){ab.decreaseDay()}else{if(y==b){ab.decreaseMonth()}else{if(y==I){ab.decreaseYear()}}}A(V,d)};var ag=document.getElementById("searchtimeuparrow");var a7=document.getElementById("searchtimeuparrowlink");a7.href="javascript:void(0);";ag.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==l){ab.increaseHour()}else{if(c==p){ab.increaseMin(5)}}A(V,d)};var aR=document.getElementById("searchtimedownarrow");var br=document.getElementById("searchtimedownarrowlink");br.href="javascript:void(0);";aR.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==l){ab.decreaseHour()}else{if(c==p){ab.decreaseMin(5)}}A(V,d)};var ae=document.getElementById("searchtimeuparrowEnd");var aM=document.getElementById("searchtimeuparrowlinkEnd");aM.href="javascript:void(0);";ae.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==B){ab.increaseHourEnd()}else{if(c==k){ab.increaseMinEnd(5)}}A(V,D)};var bZ=document.getElementById("searchtimedownarrowEnd");var a4=document.getElementById("searchtimedownarrowlinkEnd");a4.href="javascript:void(0);";bZ.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==B){ab.decreaseHourEnd()}else{if(c==k){ab.decreaseMinEnd(5)}}A(V,D)};a(m,t);a(w,O);a(C,K);a(V,X);a(d,p);a(D,k);var an=document.getElementById("newOfferDdArrow");if(an){an.onclick=function(){var cb=document.getElementById("newOfferFrom");cb.focus()}}var bj=document.getElementById("newOfferDestDdArrow");if(bj){bj.onclick=function(){var cb=document.getElementById("newOfferDest");cb.focus()}}var aU=document.getElementById("newofferdetaillink");aU.href="javascript:void(0);";aU.onclick=function(){f.setView("newofferdetailsUI");return false};var a0=document.getElementById("newoffersubmit");a0.href="javascript:void(0);";a0.onclick=function(){var cd=1000*60;if((ab.getDate().getTime()+cd-new Date().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time is in the past.");return}U.setStartTime(ab.getDate());U.setStartLatLn(document.getElementById(Q)[document.getElementById(Q).selectedIndex].latln);U.setDestLatLn(document.getElementById(J)[document.getElementById(J).selectedIndex].latln);var ci="Location...";if((document.getElementById(J)[document.getElementById(J).selectedIndex].text==ci)||(document.getElementById(Q)[document.getElementById(Q).selectedIndex].text==ci)){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"Your location could not be determined.");return}U.setStartAddr(document.getElementById(Q)[document.getElementById(Q).selectedIndex].text);U.setDestAddr(document.getElementById(J)[document.getElementById(J).selectedIndex].text);U.setDetour(30);U.setOfferedSeatsNo(document.getElementById("nrseatsselect").selectedIndex+1);U.setPrice(document.getElementById("priceselect").selectedIndex);U.setCurrency("Euro");U.setComment("No comment");var cb=this;var cc={};function ce(){cc.potentialRidePlans=[];cc.potentiallyAgreedRidePlans=[];cc.driverAgreedRidePlans=[];cc.agreedRidePlan="";cc.invalidRidePlans=[];cc.user=username;cc.index=0;cc.__v=0;cc._revision=0;cc._id=0;cc.rideRecord="";if(readCookie("usermode")==1){cc.mode="commuter"}else{cc.mode="driver"}cc.currency=U.getCurrency();cc.pets="No";if(aa.getPrefIsSmoker()=="y"){cc.smoking="Yes"}else{cc.smoking="No"}cc.rideQualityThreshold="0";cc.capacity=U.getOfferedSeatsNo();cc.departureCity=document.getElementById("offerstartcombo")[document.getElementById("offerstartcombo").selectedIndex].text;cc.destinationCity=document.getElementById("offerendcombo")[document.getElementById("offerendcombo").selectedIndex].text;var cm=U.getStartTime();var cn="18:00";cc.depDateTimeWindow={};cc.depDateTimeWindow.depDateTimeLow=cm;var cq=U.getStartTime()+5000000;var co="19:00";cc.depDateTimeWindow.depDateTimeHigh=cq;var cl=U.getStartTime()+5000000;var cp="18:00";cc.desDateTimeWindow={};cc.desDateTimeWindow.desDateTimeLow=cl;var cr=U.getStartTime()+9000000;var ck="19:00";cc.desDateTimeWindow.desDateTimeHigh=cr;cc.depDateTimeWindow.depDateTimeLow=ab.getDate().getTime();cc.depDateTimeWindow.depDateTimeHigh=ab.getDateEnd().getTime();cc.route="whatever";cc.priceBound=U.getPrice();cc.comments=U.getComment();cc.managedBy=null}var cf;var cj;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";pass="agent1"}else{user="agent6";pass="agent6"}}else{if(username=="MaxS"){user="agent2";pass="agent2"}else{user="agent3";pass="agent3"}}var ch=user.substring(5,user.length);user=readCookie("username");pass=readCookie("password");function cg(){$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/rideRequests",data:JSON.stringify(cc),crossDomain:true,beforeSend:function(ck){ck.setRequestHeader("Authorization","Basic "+user+":"+pass)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,contentType:"application/json; charset=UTF-8",success:function(cl,cm,ck){cf=JSON.stringify(JSON.parse(ck.response));fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)},error:function(cm,cl,ck){alert("state: "+cm.readyState);alert("status: "+cm.status);alert("response "+cm.responseText);alert("this error is: "+ck)}})}ce();cg()};var a6=document.getElementById("offershowroutepickerlink");a6.href="javascript:void(0);";a6.onclick=function(){var cl=document.getElementById(Q)[document.getElementById(Q).selectedIndex].latln;var cb=cl.indexOf(",");var cd=cl.substr(0,cb);var ce=cl.substr(cb+1,cl.length-cb+1);var cg=parseFloat(cd);var cm=parseFloat(ce);var ck=document.getElementById(J)[document.getElementById(J).selectedIndex].latln;var ch=ck.indexOf(",");var ci=ck.substr(0,ch);var cj=ck.substr(ch+1,ck.length-ch+1);var cc=parseFloat(ci);var cf=parseFloat(cj);if(cg==cc&&cm==cf){showOverlayDialog("Start and finish may not be identical, please select new!","","OK","","","");return false}E.GET("/OpenRideServer-RS/resources/users/"+username+"/routes/new,"+cg+","+cm+","+cc+","+cf,false,function(cn){var co=f.parsesimpleroute(cn);if(co){f.setFullScreenMapView("offerroutegmapscreencontainer")}},function(){showOverlayDialog("The route could not be loaded! Please try again later.","","OK","","","")})};var aL=document.getElementById("searchroutepickerlink");aL.href="javascript:void(0);";aL.onclick=function(){var cl=document.getElementById(r)[document.getElementById(r).selectedIndex].latln;var cb=cl.indexOf(",");var cd=cl.substr(0,cb);var ce=cl.substr(cb+1,cl.length-cb+1);var cg=parseFloat(cd);var cm=parseFloat(ce);var ck=document.getElementById(o)[document.getElementById(o).selectedIndex].latln;var ch=ck.indexOf(",");var ci=ck.substr(0,ch);var cj=ck.substr(ch+1,ck.length-ch+1);var cc=parseFloat(ci);var cf=parseFloat(cj);if(cg==cc&&cm==cf){showOverlayDialog("Start and finish may not be identical, please select new!","","OK","","","");return false}E.GET("/OpenRideServer-RS/resources/users/"+username+"/routes/new,"+cg+","+cm+","+cc+","+cf,false,function(cn){var co=f.parsesimpleroute(cn);if(co){f.setFullScreenMapView("searchroutegmapscreencontainer")}},function(){showOverlayDialog("The route could not be loaded! Please try again later.","","OK","","","")})};var ao=document.getElementById("offerroutebackbtnlink");ao.href="javascript:void(0);";ao.onclick=function(){f.setView("newofferUI")};var b2=document.getElementById("searchroutebackbtnlink");b2.href="javascript:void(0);";b2.onclick=function(){f.setView("newsearchUI")};var a3=document.getElementById(Q);a3.onchange=function(){if(a3.selectedIndex==0){var cb=n.getUserLocation();T.insertRevGeocodedAddr(cb,R)}else{if(a3.selectedIndex==1){f.setFullScreenMapView("offerstartgmapscreencontainer")}}if(a3.selectedIndex!=1){U.setStartLatLn(a3[a3.selectedIndex].latln)}};var bC=document.getElementById(J);bC.onchange=function(){if(bC.selectedIndex==0){var cb=n.getUserLocation();T.insertRevGeocodedAddr(cb,q)}else{if(bC.selectedIndex==1){f.setFullScreenMapView("offerdestgmapscreencontainer")}}if(bC.selectedIndex!=1){U.setDestLatLn(bC[bC.selectedIndex].latln)}};var bK=document.getElementById(r);bK.onchange=function(){if(bK.selectedIndex==0){var cb=n.getUserLocation();T.insertRevGeocodedAddr(cb,h)}else{if(bK.selectedIndex==1){f.setFullScreenMapView("searchstartgmapscreencontainer")}}if(bK.selectedIndex!=1){P.setStartLatLn(bK[bK.selectedIndex].latln)}};var aq=document.getElementById(o);aq.onchange=function(){if(aq.selectedIndex==0){var cb=n.getUserLocation();T.insertRevGeocodedAddr(cb,W)}else{if(aq.selectedIndex==1){f.setFullScreenMapView("searchdestgmapscreencontainer")}}if(aq.selectedIndex!=1){P.setDestLatLn(aq[aq.selectedIndex].latln)}};var bI=document.getElementById("newsearchdetaillink");bI.href="javascript:void(0);";bI.onclick=function(){f.setView("newsearchdetailsUI");return false};var aJ=document.getElementById("newSearchFromDdArrow");if(aJ){aJ.onclick=function(){var cb=document.getElementById("newSearchFrom");cb.focus()}}var bu=document.getElementById("newSearchDestDdArrow");if(bu){bu.onclick=function(){var cb=document.getElementById("newSearchDest");cb.focus()}}var bq=document.getElementById("newsearchsubmit");bq.href="javascript:void(0);";bq.onclick=function(){var cf=1000*60;if((ab.getDate().getTime()+cf-new Date().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time is in the past.");return}if((ab.getDateEnd().getTime()+cf-ab.getDate().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time range is invalid.");return}if(document.getElementById("searchstartcombo")[document.getElementById("searchstartcombo").selectedIndex].text==document.getElementById("searchendcombo")[document.getElementById("searchendcombo").selectedIndex].text){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"Please enter different addresses for start and finish.");return}P.setStartTime(ab.getDate());P.setStartLatLn(document.getElementById(r)[document.getElementById(r).selectedIndex].latln);P.setDestLatLn(document.getElementById(o)[document.getElementById(o).selectedIndex].latln);P.setSearchedSeatsNo(document.getElementById("searchseatsselect").selectedIndex+1);P.setStartAddr(document.getElementById(r)[document.getElementById(r).selectedIndex].text);P.setDestAddr(document.getElementById(o)[document.getElementById(o).selectedIndex].text);switch(document.getElementById("searchwaitimeselect").selectedIndex){case 0:P.setMaxWaitingTime(10);break;case 1:P.setMaxWaitingTime(15);break;case 2:P.setMaxWaitingTime(20);break;case 3:P.setMaxWaitingTime(30);break;case 4:P.setMaxWaitingTime(45);break;case 5:P.setMaxWaitingTime(60);break;case 6:P.setMaxWaitingTime(120);break;case 7:P.setMaxWaitingTime(180);break;case 8:P.setMaxWaitingTime(240);break}P.setComment("No comment!");var ch={};function cb(){ch.potentialRidePlans=[];ch.potentiallyAgreedRidePlans=[];ch.driverAgreedRidePlans=[];ch.agreedRidePlan="";ch.invalidRidePlans=[];ch.user=username;ch.index=0;ch.__v=0;ch._revision=0;ch._id="";ch.rideRecord="";if(readCookie("usermode")==1){ch.mode="commuter"}else{ch.mode="driver"}ch.currency="Euro";ch.pets="No";if(aa.getPrefIsSmoker()=="y"){ch.smoking="Yes"}else{ch.smoking="No"}ch.rideQualityThreshold="0";ch.capacity="1";ch.departureCity=document.getElementById("searchstartcombo")[document.getElementById("searchstartcombo").selectedIndex].text;ch.destinationCity=document.getElementById("searchendcombo")[document.getElementById("searchendcombo").selectedIndex].text;var ck=P.getStartTime();var cl="18:00";ch.depDateTimeWindow={};var co=P.getStartTime()+5000000;var cm="19:00";var cj=P.getStartTime()+5000000;var cn="18:00";ch.desDateTimeWindow={};ch.desDateTimeWindow.desDateTimeLow=cj;var cp=P.getStartTime()+9000000;var ci="19:00";ch.desDateTimeWindow.desDateTimeHigh=cp;ch.depDateTimeWindow.depDateTimeLow=ab.getDate().getTime();ch.depDateTimeWindow.depDateTimeHigh=ab.getDateEnd().getTime();ch.route="whatever";ch.priceBound="20";ch.comments=P.getComment();ch.managedBy=null}var cd;var ce;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";pass="agent1"}else{user="agent6";pass="agent6"}}else{if(username=="MaxS"){user="agent2";pass="agent2"}else{user="agent3";pass="agent3"}}var cc=user.substring(5,user.length);user=readCookie("username");pass=readCookie("password");function cg(){$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/rideRequests",data:JSON.stringify(ch),crossDomain:true,beforeSend:function(ci){ci.setRequestHeader("Authorization","Basic "+user+":"+pass)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,contentType:"application/json; charset=UTF-8",success:function(cj,ck,ci){cd=JSON.stringify(JSON.parse(ci.response));fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)},error:function(ck,cj,ci){alert("state: "+ck.readyState);alert("status: "+ck.status);alert("response "+ck.responseText);alert("this error is: "+ci)}})}cb();cg()};var bO=document.getElementById("resumebtnlink");bO.href="javascript:void(0);";bO.onclick=function(){f.detailsClicked=true;f.setTabContent(1,0)};var bF=document.getElementById("resumebtnlink2");bF.href="javascript:void(0);";bF.onclick=function(){f.detailsClicked=true;f.setTabContent(1,0)};var aT=document.getElementById("offerstartgmapaddressinput");aT.onchange=function(){T.geocodeAddressFromInput("offerstartgmapaddressinput");T.updateAddressInfo("offerstartgmapaddressinput")};var ap=document.getElementById("offerstartgmaplocateadressbtn");ap.onclick=function(){T.geocodeAddressFromInput("offerstartgmapaddressinput");T.updateAddressInfo("offerstartgmapaddressinput")};var bX=document.getElementById("offerstartgmapbackbtn");bX.onclick=function(){f.returnFromFullscreenMapView()};var aB=document.getElementById("offerstartgmapconfirmadressandbackbtn");aB.onclick=function(){f.detailsClicked=true;G(Q);U.setStartLat(T.getCenterPosition().lat());U.setStartLon(T.getCenterPosition().lng());f.returnFromFullscreenMapView()};var aA=document.getElementById("offerstartgmapzoominbtn");aA.onclick=function(){T.zoomIn()};var ad=document.getElementById("offerstartgmapzoomoutbtn");ad.onclick=function(){T.zoomOut()};var ah=document.getElementById("offerdestgmapaddressinput");ah.onchange=function(){T.geocodeAddressFromInput("offerdestgmapaddressinput");T.updateAddressInfo("offerdestgmapaddressinput")};var bV=document.getElementById("offerdestgmaplocateadressbtn");bV.onclick=function(){T.geocodeAddressFromInput("offerdestgmapaddressinput");T.updateAddressInfo("offerdestgmapaddressinput")};var aH=document.getElementById("offerdestgmapbackbtn");aH.onclick=function(){f.returnFromFullscreenMapView()};var aP=document.getElementById("offerdestgmapconfirmadressandbackbtn");aP.onclick=function(){f.detailsClicked=true;G(J);U.setDestLat(T.getCenterPosition().lat());U.setDestLon(T.getCenterPosition().lng());f.returnFromFullscreenMapView()};var aK=document.getElementById("offerdestgmapzoominbtn");aK.onclick=function(){T.zoomIn()};var bW=document.getElementById("offerdestgmapzoomoutbtn");bW.onclick=function(){T.zoomOut()};var bT=document.getElementById("searchstartgmapaddressinput");bT.onchange=function(){T.geocodeAddressFromInput("searchstartgmapaddressinput");T.updateAddressInfo("searchstartgmapaddressinput")};var aF=document.getElementById("searchstartgmaplocateadressbtn");aF.onclick=function(){T.geocodeAddressFromInput("searchstartgmapaddressinput");T.updateAddressInfo("searchstartgmapaddressinput")};var bv=document.getElementById("searchstartgmapbackbtn");bv.onclick=function(){f.returnFromFullscreenMapView()};var aX=document.getElementById("searchstartgmapconfirmadressandbackbtn");aX.onclick=function(){f.detailsClicked=true;G(r);P.setStartLat(T.getCenterPosition().lat());P.setStartLon(T.getCenterPosition().lng());f.returnFromFullscreenMapView()};var aG=document.getElementById("searchstartgmapzoominbtn");aG.onclick=function(){T.zoomIn()};var aZ=document.getElementById("searchstartgmapzoomoutbtn");aZ.onclick=function(){T.zoomOut()};var aD=document.getElementById("searchdestgmapaddressinput");aD.onchange=function(){T.geocodeAddressFromInput("searchdestgmapaddressinput");T.updateAddressInfo("searchdestgmapaddressinput")};var bL=document.getElementById("searchdestgmaplocateadressbtn");bL.onclick=function(){T.geocodeAddressFromInput("searchdestgmapaddressinput");T.updateAddressInfo("searchdestgmapaddressinput")};var bn=document.getElementById("searchdestgmapbackbtn");bn.onclick=function(){f.returnFromFullscreenMapView()};var b4=document.getElementById("searchdestgmapconfirmadressandbackbtn");b4.onclick=function(){f.detailsClicked=true;G(o);P.setDestLat(T.getCenterPosition().lat());P.setDestLon(T.getCenterPosition().lng());f.returnFromFullscreenMapView()};var bY=document.getElementById("searchdestgmapzoominbtn");bY.onclick=function(){T.zoomIn()};var b1=document.getElementById("searchdestgmapzoomoutbtn");b1.onclick=function(){T.zoomOut()};var bD=document.getElementById("favoritesgmapaddressinput");bD.onchange=function(){T.geocodeAddressFromInput("favoritesgmapaddressinput");T.updateAddressInfo("favoritesgmapaddressinput")};var bm=document.getElementById("favoritesgmaplocateadressbtn");bm.onclick=function(){T.geocodeAddressFromInput("favoritesgmapaddressinput");T.updateAddressInfo("favoritesgmapaddressinput")};var a2=document.getElementById("favoritesgmapbackbtn");a2.onclick=function(){f.returnFromFullscreenMapView();f.setTabContent(3,0)};var aS=document.getElementById("favoritesgmapconfirmadressandbackbtn");aS.onclick=function(){var cb=T.getCenterPosition().lat()+","+T.getCenterPosition().lng();M.setGeoCoordStr(cb);showOverlayDialog("Please enter a name for the favorite:","<input id='favnameinput' type='text' style='width: 97.5%; background: url(../img/favstar.png) no-repeat center right' />","Save","return fokus.openride.mobclient.controller.modules.uievents.addFavFromFullscreenMap();","Cancel","")};var bR=document.getElementById("favoritesgmapzoominbtn");bR.onclick=function(){T.zoomIn()};var ax=document.getElementById("favoritesgmapzoomoutbtn");ax.onclick=function(){T.zoomOut()};var av=document.getElementById("offerroutegmapbackbtn");av.onclick=function(){f.returnFromFullscreenMapView()};var at=document.getElementById("offerroutegmapzoominbtn");at.onclick=function(){T.zoomIn()};var aV=document.getElementById("offerroutegmapzoomoutbtn");aV.onclick=function(){T.zoomOut()};var b9=document.getElementById("searchroutegmapbackbtn");b9.onclick=function(){f.returnFromFullscreenMapView()};var aw=document.getElementById("searchroutegmapzoominbtn");aw.onclick=function(){T.zoomIn()};var bS=document.getElementById("searchroutegmapzoomoutbtn");bS.onclick=function(){T.zoomOut()};var bs=document.getElementById("viaptroutegmapbackbtn");bs.onclick=function(){T.resetRiderMarkers();f.returnFromFullscreenMapView()};var a9=document.getElementById("viaptroutegmapzoominbtn");a9.onclick=function(){T.zoomIn()};var bU=document.getElementById("viaptroutegmapzoomoutbtn");bU.onclick=function(){T.zoomOut()};var bi=document.getElementById("offerstartaddrinput");bi.onchange=function(){T.geocodeAddressFromInput("offerstartaddrinput");T.updateAddressInfo("offerstartaddrinput")};var bH=document.getElementById("offerdestaddrinput");bH.onchange=function(){T.geocodeAddressFromInput("offerdestaddrinput");T.updateAddressInfo("offerdestaddrinput")};var bB=document.getElementById("searchstartaddrinput");bB.onchange=function(){T.geocodeAddressFromInput("searchstartaddrinput");T.updateAddressInfo("searchstartaddrinput")};var ak=document.getElementById("searchdestaddrinput");ak.onchange=function(){T.geocodeAddressFromInput("searchdestaddrinput");T.updateAddressInfo("searchdestaddrinput")};var aY=document.getElementById("offerstartconfirm");aY.href="javascript:void(0);";aY.onclick=function(){G(Q);U.setStartLat(T.getCenterPosition().lat());U.setStartLon(T.getCenterPosition().lng())};var bx=document.getElementById("offerdestconfirm");bx.href="javascript:void(0);";bx.onclick=function(){G(J);U.setDestLat(T.getCenterPosition().lat());U.setDestLon(T.getCenterPosition().lng())};var bz=document.getElementById("searchstartconfirm");bz.href="javascript:void(0);";bz.onclick=function(){G(r)};var a8=document.getElementById("searchdestconfirm");a8.href="javascript:void(0);";a8.onclick=function(){G(o)};var bE=document.getElementById("newfavoriteconfirm");bE.href="javascript:void(0);";bE.onclick=function(){var cb=T.getCenterPosition().lat()+","+T.getCenterPosition().lng();M.setGeoCoordStr(cb);showOverlayDialog("Please enter a name for the favorite:","<input id='favnameinput' type='text' style='width: 97.5%; background: url(../img/favstar.png) no-repeat center right' />","Favoriten anlegen","fokus.openride.mobclient.controller.modules.uievents.addFav();","Cancel","")};var by=document.getElementById("offerstartpickerlink");by.href="javascript:void(0);";by.onclick=function(){f.setFullScreenMapView("offerstartgmapscreencontainer");var cb=document.getElementById(Q).selectedIndex;if(cb>1){var ce=document.getElementById(Q)[document.getElementById(Q).selectedIndex].latln;var cc=parseFloat(ce.substr(0,ce.indexOf(",")));var cf=parseFloat(ce.substr(ce.indexOf(",")+1,ce.length-(ce.indexOf(",")+1)));var cd=new google.maps.LatLng(cc,cf);T.setMapToLocation(cd)}};var bp=document.getElementById("offerdestpickerlink");bp.href="javascript:void(0);";bp.onclick=function(){f.setFullScreenMapView("offerdestgmapscreencontainer");var cb=document.getElementById(J).selectedIndex;if(cb>1){var ce=document.getElementById(J)[document.getElementById(J).selectedIndex].latln;var cc=parseFloat(ce.substr(0,ce.indexOf(",")));var cf=parseFloat(ce.substr(ce.indexOf(",")+1,ce.length-(ce.indexOf(",")+1)));var cd=new google.maps.LatLng(cc,cf);T.setMapToLocation(cd)}};var au=document.getElementById("searchstartpickerlink");au.href="javascript:void(0);";au.onclick=function(){f.setFullScreenMapView("searchstartgmapscreencontainer");var cb=document.getElementById(r).selectedIndex;if(cb>1){var ce=document.getElementById(r)[document.getElementById(r).selectedIndex].latln;var cc=parseFloat(ce.substr(0,ce.indexOf(",")));var cf=parseFloat(ce.substr(ce.indexOf(",")+1,ce.length-(ce.indexOf(",")+1)));var cd=new google.maps.LatLng(cc,cf);T.setMapToLocation(cd)}};var bJ=document.getElementById("searchdestpickerlink");bJ.href="javascript:void(0);";bJ.onclick=function(){f.setFullScreenMapView("searchdestgmapscreencontainer");var cb=document.getElementById(o).selectedIndex;if(cb>1){var ce=document.getElementById(o)[document.getElementById(o).selectedIndex].latln;var cc=parseFloat(ce.substr(0,ce.indexOf(",")));var cf=parseFloat(ce.substr(ce.indexOf(",")+1,ce.length-(ce.indexOf(",")+1)));var cd=new google.maps.LatLng(cc,cf);T.setMapToLocation(cd)}};var bt=document.getElementById("tab01link");bt.href="javascript:void(0);";bt.onclick=function(){f.setTabContent(0,0)};var a5=document.getElementById("tab02link");a5.href="javascript:void(0);";a5.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStart();ab.reset();A(m,w);A(m,C);A(V,d);A(V,D);f.deleteModAdrFromBox(Q);f.deleteModAdrFromBox(J);f.deleteModAdrFromBox(r);f.deleteModAdrFromBox(o);f.setServiceType("new");f.setTabContent(1,0)};var aI=document.getElementById("tab03link");aI.href="javascript:void(0);";aI.onclick=function(){f.setTabContent(2,0)};var am=document.getElementById("tab04link");am.href="javascript:void(0);";am.onclick=function(){f.setTabContent(3,0)};var bP=document.getElementById("tab11link");bP.href="javascript:void(0);";bP.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStart();ab.reset();A(m,w);A(m,C);A(V,d);A(V,D);f.deleteModAdrFromBox(Q);f.deleteModAdrFromBox(J);f.deleteModAdrFromBox(r);f.deleteModAdrFromBox(o);f.setServiceType("new");f.setTabContent(f.currentactivenodeindex,0)};var bo=document.getElementById("tab12link");bo.href="javascript:void(0);";bo.onclick=function(){f.setTabContent(f.currentactivenodeindex,1)};var a1=document.getElementById("tab13link");a1.href="javascript:void(0);";a1.onclick=function(){f.setTabContent(f.currentactivenodeindex,2)};var aC=document.getElementById("tab14link");aC.href="javascript:void(0);";aC.onclick=function(){f.setTabContent(f.currentactivenodeindex,3)};var b5=document.getElementById("usermodelink");b5.href="javascript:void(0);";b5.onclick=function(){var cb=f.changemode();if(cb==0){ab.reset();L.reset();A(m,w);A(m,C);a(m,t);a(w,O)}else{if(cb==1){ab.reset();A(V,d);A(V,D);a(V,X);a(d,p)}}};var b0=document.getElementById("logoutlink");b0.href="javascript:void(0);";b0.onclick=function(){E.PUTaction("/OpenRideServer-RS/resources/configuration/signoff",false);window.location.reload()}},addFav:function(){var ad=document.getElementById("newfavoriteaddrinput").value;M.setAddress(ad);var ae=document.getElementById("favnameinput").value;M.setDisplayName(ae);var af=T.getCenterPosition();M.setGeoCoords(af.lat(),af.lng());E.POST("/OpenRideServer-RS/resources/users/"+username+"/favoritepoints",false,M.getFavPt(),function(){fokus.openride.mobclient.controller.modules.modulemanager.returnFromFullscreenMapView();showOverlayDialog("New favorite location successfully saved!","","OK","fokus.openride.mobclient.controller.modules.modulemanager.setView('favlistUI');","","")},function(ag,ah,ai){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ag,ah,ai,"A place with this name already exists.")})},addFavFromFullscreenMap:function(){var ad=document.getElementById("favoritesgmapaddressinput").value;M.setAddress(ad);var ae=document.getElementById("favnameinput").value.search(/^.{1,18}$/);if(ae!=-1){ae=document.getElementById("favnameinput").value;M.setDisplayName(ae);var af=T.getCenterPosition();M.setGeoCoords(af.lat(),af.lng());E.POST("/OpenRideServer-RS/resources/users/"+username+"/favoritepoints",false,M.getFavPt(),function(){fokus.openride.mobclient.controller.modules.modulemanager.returnFromFullscreenMapView();fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(3,1);showOverlayDialog("New favorite location saved successfully!","","OK","","","")},function(ag,ah,ai){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ag,ah,ai,"A place with this name already exists.");return false})}else{showOverlayDialog("The name of the bookmark can be up to 18 characters long.","","OK","","","");return false}},validateDifferentAdr:function(ae){var ad=false;if((ae.getStartLat!=offermodget.DestLat)||(ae.getStartLon!=ae.getDestLon)){ad=true}return ad}}}();var favs=new Array("Kaiserin Augusta Allee 31, Berlin","New York","Helmholtzstra�?e 9, Berlin");function bindAutoSuggestEvents(){var b=document.getElementsByName("adrInput");for(i in b){var a=b[i];if(a.type&&a.type.toLowerCase()=="text"){new AutoSuggest(a,favs)}}}function createCookie(c,d,f){if(f){var b=new Date();b.setTime(b.getTime()+(f*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var f=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var g=a[d];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(f)==0){return g.substring(f.length,g.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function stars(c,b){var d=""+b+c;var a='     <img src="../../OpenRideWeb/img/rating_off.gif" id="1'+d+'" onMouseOver="mouseOver('+1+d+')" onMouseOut="mouseOut('+1+d+')" onClick="fix('+1+d+')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="2'+d+'" onMouseOver="mouseOver('+2+d+')" onMouseOut="mouseOut('+2+d+')" onClick="fix('+2+d+')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="3'+d+'" onMouseOver="mouseOver('+3+d+')" onMouseOut="mouseOut('+3+d+')" onClick="fix('+3+d+')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="4'+d+'" onMouseOver="mouseOver('+4+d+')" onMouseOut="mouseOut('+4+d+')" onClick="fix('+4+d+')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="5'+d+'" onMouseOver="mouseOver('+5+d+')" onMouseOut="mouseOut('+5+d+')" onClick="fix('+5+d+')"/><br><br>';return a}function mouseOver(c){var h=c.toString();var a=parseInt(h.charAt(0));var f=h.substring(1,h.length-1);var g=parseInt(f);var d=h.charAt(h.length-1);if(submitted_rides[g][d]==-1){for(var b=1;b<a+1;b++){if(document.getElementById(b+f+d)!=null){document.getElementById(b+f+d).src="../../OpenRideWeb/img/rating_on.gif"}}}}function mouseOut(c){var h=c.toString();var a=parseInt(h.charAt(0));var f=h.substring(1,h.length-1);var g=parseInt(f);var d=h.charAt(h.length-1);if(submitted_rides[g][d]==-1){for(var b=1;b<a+1;b++){if(document.getElementById(b+f+d)!=null){document.getElementById(b+f+d).src="../../OpenRideWeb/img/rating_off.gif"}}}}function fix(c){var g=c.toString();var a=parseInt(g.charAt(0));var f=g.substring(1,g.length-1);var d=g.charAt(g.length-1);for(var b=1;b<6;b++){document.getElementById(b+f+d).src="../../OpenRideWeb/img/rating_off.gif"}for(var b=1;b<a+1;b++){document.getElementById(b+f+d).src="../../OpenRideWeb/img/rating_on.gif"}f=parseInt(f);submitted_rides[f][d]=a}function submit(f,d){var a=parseInt(d);var c=1+a;var b="agent"+c;user=readCookie("username");pass=readCookie("password");$.ajax({type:"GET",url:"http://"+DimitrisRemote+"/ridePlans/"+a,data:"",crossDomain:true,username:user,password:pass,beforeSend:function(g){g.setRequestHeader("Authorization","Basic "+user+":"+pass);g.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},async:false,success:function(l,h){var k=JSON.parse(l);var n="driver:"+k.driver+"commuters:"+k.commuters;var o="driver";if(usermode==RIDERMODE){o="commuter"}var r="[";var p=n.indexOf("commuters");var g=n.substring(p+10);if(o=="commuter"){r=r+'{"subject_uri" : "smartshare/'+n.substring(7,p)+'","quantifier_uri" : "driver"}'}var q=g.split(",");for(var j=0;j<q.length;j++){if(r!="["&&user!=q[j]){r=r+","}if(user!=q[j]){r=r+'{"subject_uri" : "smartshare/'+q[j]+'","quantifier_uri" : "commuter"}'}}r=r+"],";var m='{"application_uri" : "smartshare","event_id" : "ride/'+a+'","subjects": '+r+'"authors": [{"author_uri" : "'+user+'","quantifier_uri" : "'+o+'"}],"feedback": {"StarRating": '+f[0]+',"OnTime": '+f[2]+',"Friendly": '+f[4]+"}}";$.ajax({type:"POST",url:"http://"+DimitrisRemote+"/application/1/feedback",data:m,crossDomain:true,username:user,password:pass,contentType:"application/json; charset=utf-8",beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+user+":"+pass);t.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,success:function(t,u){fokus.openride.mobclient.controller.modules.modulemanager.setView("openratingsUI")},error:function(v,u,t){alert("state: "+v.readyState);alert("status: "+v.status);alert("response "+v.responseText);alert("this error is: "+t)}})},error:function(j,h,g){alert("state: "+j.readyState);alert("status: "+j.status);alert("response "+j.responseText);alert("this error is: "+g)}})}function comment(c){var h=c.toString();var b=parseInt(h.substring(0,h.indexOf("-")));var f=h.substring(h.indexOf("-")+1,h.length-1);var d=h.charAt(h.length-1);var a;var g;if($.inArray(-1,submitted_rides[f])==-1){submit(submitted_rides[f],b);submitted_rides[f]=[-1,0,-1,0,-1]}}function myaccept(c){user=readCookie("username");pass=readCookie("password");var b=0;var f=JSON.parse(rides[c]);if(usermode==DRIVERMODE&&f.agreedDriver==""){var d=f.potentiallyAgreedDriver;f.agreedDriver=d;f.potentiallyAgreedDriver="";b=parseInt(f._revision);f._revision=b+1;ajaxcall("PUT","http://"+DimitrisRemote+"/ridePlans/"+f.index,f,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI")}else{if(usermode==RIDERMODE&&f.agreedDriver!=""){var a=$.inArray(user,f.potentiallyAgreedCommuters);if(a>=0){f.potentiallyAgreedCommuters.splice(a,1)}(f.agreedCommuters).push(user);b=parseInt(f._revision);f._revision=b+1;ajaxcall("PUT","http://"+DimitrisRemote+"/ridePlans/"+f.index,f,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI")}}}function myreject(c){user=readCookie("username");pass=readCookie("password");var f=JSON.parse(rides[c]);var b=0;if(usermode==DRIVERMODE){var d=f.potentiallyAgreedDriver;f.potentiallyAgreedDriver="";f.rejectedDriver=d;b=parseInt(f._revision);f._revision=b+1;ajaxcall("PUT","http://"+DimitrisRemote+"/ridePlans/"+f.index,f,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI")}else{if(usermode==RIDERMODE){var a=$.inArray(user,f.potentiallyAgreedCommuters);if(a>=0){f.potentiallyAgreedCommuters.splice(a,1)}(f.rejectedCommuters).push(user);b=parseInt(f._revision);f._revision=b+1;ajaxcall("PUT","http://"+DimitrisRemote+"/ridePlans/"+f.index,f,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI")}}}function fail(c,a,b){alert("state: "+c.readyState);alert("status: "+c.status);alert("response "+c.responseText);alert("this error is: "+b)}function ajaxcall(g,d,c,b,f,a){$.ajax({type:g,url:d,data:c,crossDomain:true,username:f,password:a,beforeSend:function(h){h.setRequestHeader("Authorization","Basic "+f+":"+a);h.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:b,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(h,j){},error:function(k,j,h){fail(k,j,h)}})}window.onload=function(){fokus.openride.mobclient.controller.modules.uievents.start();fokus.openride.mobclient.controller.modules.uievents.refreshTimer();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));window.onresize();bindAutoSuggestEvents();setTimeout(scrollTo,0,0,1);if(!DetectMobileQuick()){document.getElementsByTagName("body")[0].className="desktop"}};window.onresize=function(){adjustContentDimensions()};adjustContentDimensions=function(){document.getElementById("content").style.minHeight=window.innerHeight-88-5+"px"};var isIphone=false;var isTierIphone=false;var isTierRichCss=false;var isTierGenericMobile=false;var engineWebKit="webkit";var deviceAndroid="android";var deviceIphone="iphone";var deviceIpod="ipod";var deviceIpad="ipad";var deviceMacPpc="macintosh";var deviceNuvifone="nuvifone";var deviceSymbian="symbian";var deviceS60="series60";var deviceS70="series70";var deviceS80="series80";var deviceS90="series90";var deviceWinMob="windows ce";var deviceWindows="windows";var deviceIeMob="iemobile";var devicePpc="ppc";var enginePie="wm5 pie";var deviceBB="blackberry";var vndRIM="vnd.rim";var deviceBBStorm="blackberry95";var deviceBBBold="blackberry97";var deviceBBTour="blackberry96";var deviceBBCurve="blackberry89";var devicePalm="palm";var deviceWebOS="webos";var engineBlazer="blazer";var engineXiino="xiino";var deviceKindle="kindle";var vndwap="vnd.wap";var wml="wml";var deviceBrew="brew";var deviceDanger="danger";var deviceHiptop="hiptop";var devicePlaystation="playstation";var deviceNintendoDs="nitro";var deviceNintendo="nintendo";var deviceWii="wii";var deviceXbox="xbox";var deviceArchos="archos";var engineOpera="opera";var engineNetfront="netfront";var engineUpBrowser="up.browser";var engineOpenWeb="openweb";var deviceMidp="midp";var uplink="up.link";var engineTelecaQ="teleca q";var devicePda="pda";var mini="mini";var mobile="mobile";var mobi="mobi";var maemo="maemo";var maemoTablet="tablet";var linux="linux";var qtembedded="qt embedded";var mylocom2="com2";var manuSonyEricsson="sonyericsson";var manuericsson="ericsson";var manuSamsung1="sec-sgh";var manuSony="sony";var manuHtc="htc";var svcDocomo="docomo";var svcKddi="kddi";var svcVodafone="vodafone";var uagent=navigator.userAgent.toLowerCase();function DetectIphone(){if(uagent.search(deviceIphone)>-1){if(DetectIpad()||DetectIpod()){return false}else{return true}}else{return false}}function DetectIpod(){if(uagent.search(deviceIpod)>-1){return true}else{return false}}function DetectIpad(){if(uagent.search(deviceIpad)>-1&&DetectWebkit()){return true}else{return false}}function DetectIphoneOrIpod(){if(uagent.search(deviceIphone)>-1||uagent.search(deviceIpod)>-1){return true}else{return false}}function DetectAndroid(){if(uagent.search(deviceAndroid)>-1){return true}else{return false}}function DetectAndroidWebKit(){if(DetectAndroid()&&DetectWebkit()){return true}else{return false}}function DetectWebkit(){if(uagent.search(engineWebKit)>-1){return true}else{return false}}function DetectS60OssBrowser(){if(DetectWebkit()){if((uagent.search(deviceS60)>-1||uagent.search(deviceSymbian)>-1)){return true}else{return false}}else{return false}}function DetectSymbianOS(){if(uagent.search(deviceSymbian)>-1||uagent.search(deviceS60)>-1||uagent.search(deviceS70)>-1||uagent.search(deviceS80)>-1||uagent.search(deviceS90)>-1){return true}else{return false}}function DetectWindowsMobile(){if(uagent.search(deviceWinMob)>-1||uagent.search(deviceIeMob)>-1||uagent.search(enginePie)>-1){return true}if((uagent.search(devicePpc)>-1)&&!(uagent.search(deviceMacPpc)>-1)){return true}if(uagent.search(manuHtc)>-1&&uagent.search(deviceWindows)>-1){return true}else{return false}}function DetectBlackBerry(){if(uagent.search(deviceBB)>-1){return true}if(uagent.search(vndRIM)>-1){return true}else{return false}}function DetectBlackBerryTouch(){if(uagent.search(deviceBBStorm)>-1){return true}else{return false}}function DetectBlackBerryHigh(){if(DetectBlackBerry()){if(DetectBlackBerryTouch()||uagent.search(deviceBBBold)>-1||uagent.search(deviceBBTour)>-1||uagent.search(deviceBBCurve)>-1){return true}else{return false}}else{return false}}function DetectBlackBerryLow(){if(DetectBlackBerry()){if(DetectBlackBerryHigh()){return false}else{return true}}else{return false}}function DetectPalmOS(){if(uagent.search(devicePalm)>-1||uagent.search(engineBlazer)>-1||uagent.search(engineXiino)>-1){if(DetectPalmWebOS()){return false}else{return true}}else{return false}}function DetectPalmWebOS(){if(uagent.search(deviceWebOS)>-1){return true}else{return false}}function DetectGarminNuvifone(){if(uagent.search(deviceNuvifone)>-1){return true}else{return false}}function DetectSmartphone(){if(DetectIphoneOrIpod()){return true}if(DetectS60OssBrowser()){return true}if(DetectSymbianOS()){return true}if(DetectWindowsMobile()){return true}if(DetectAndroid()){return true}if(DetectBlackBerry()){return true}if(DetectPalmWebOS()){return true}if(DetectPalmOS()){return true}if(DetectGarminNuvifone()){return true}return false}function DetectArchos(){if(uagent.search(deviceArchos)>-1){return true}else{return false}}function DetectBrewDevice(){if(uagent.search(deviceBrew)>-1){return true}else{return false}}function DetectDangerHiptop(){if(uagent.search(deviceDanger)>-1||uagent.search(deviceHiptop)>-1){return true}else{return false}}function DetectMaemoTablet(){if(uagent.search(maemo)>-1){return true}if(uagent.search(maemoTablet)>-1&&uagent.search(linux)){return true}else{return false}}function DetectSonyMylo(){if(uagent.search(manuSony)>-1){if(uagent.search(qtembedded)>-1||uagent.search(mylocom2)>-1){return true}else{return false}}else{return false}}function DetectOperaMobile(){if(uagent.search(engineOpera)>-1){if(uagent.search(mini)>-1||uagent.search(mobi)>-1){return true}else{return false}}else{return false}}function DetectSonyPlaystation(){if(uagent.search(devicePlaystation)){return true}else{return false}}function DetectNintendo(){if(uagent.search(deviceNintendo)>-1||uagent.search(deviceWii)>-1||uagent.search(deviceNintendoDs)>-1){return true}else{return false}}function DetectXbox(){if(uagent.search(deviceXbox)){return true}else{return false}}function DetectGameConsole(){if(DetectSonyPlaystation()){return true}if(DetectNintendo()){return true}if(DetectXbox()){return true}else{return false}}function DetectKindle(){if(uagent.search(deviceKindle)>-1){return true}else{return false}}function DetectMobileQuick(){if(DetectIpad()){return false}if(DetectSmartphone()){return true}if(uagent.search(deviceMidp)>-1||DetectBrewDevice()){return true}if(DetectOperaMobile()){return true}if(uagent.search(engineNetfront)>-1){return true}if(uagent.search(engineUpBrowser)>-1){return true}if(uagent.search(engineOpenWeb)>-1){return true}if(DetectDangerHiptop()){return true}if(DetectMaemoTablet()){return true}if(DetectArchos()){return true}if(uagent.search(devicePda)>-1){return true}if(uagent.search(mobile)>-1){return true}if(DetectKindle()){return true}return false}function DetectMobileLong(){if(DetectMobileQuick()){return true}if(DetectGameConsole()){return true}if(DetectSonyMylo()){return true}if(uagent.search(manuSamsung1)>-1||uagent.search(manuSonyEricsson)>-1||uagent.search(manuericsson)>-1){return true}if(uagent.search(svcDocomo)>-1){return true}if(uagent.search(svcKddi)>-1){return true}if(uagent.search(svcVodafone)>-1){return true}return false}function DetectTierIphone(){if(DetectIphoneOrIpod()){return true}if(DetectAndroid()){return true}if(DetectAndroidWebKit()){return true}if(DetectPalmWebOS()){return true}if(DetectGarminNuvifone()){return true}if(DetectMaemoTablet()){return true}else{return false}}function DetectTierRichCss(){if(DetectMobileQuick()){if(DetectTierIphone()){return false}if(DetectWebkit()){return true}if(DetectS60OssBrowser()){return true}if(DetectBlackBerryHigh()){return true}if(DetectWindowsMobile()){return true}if(uagent.search(engineTelecaQ)>-1){return true}else{return false}}else{return false}}function DetectTierOtherPhones(){if(DetectMobileLong()){if(DetectTierIphone()){return false}if(DetectTierRichCss()){return false}else{return true}}else{return false}};
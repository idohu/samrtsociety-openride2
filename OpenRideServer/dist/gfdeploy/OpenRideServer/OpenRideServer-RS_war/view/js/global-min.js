/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(aP,M){function a1(){if(!ai.isReady){try{S.documentElement.doScroll("left")}catch(c){setTimeout(a1,1);return}ai.ready()}}function H(s,c){c.src?ai.ajax({url:c.src,async:false,dataType:"script"}):ai.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function aq(s,c,K,F,G,w){var A=s.length;if(typeof c==="object"){for(var J in c){aq(s,J,c[J],F,G,K)}return s}if(K!==M){F=!w&&F&&ai.isFunction(K);for(J=0;J<A;J++){G(s[J],c,F?K.call(s[J],J,G(s[J],c)):K,w)}return s}return A?G(s[0],c):M}function aG(){return(new Date).getTime()}function ap(){return false}function an(){return true}function aL(s,c,w){w[0].type=s;return ai.event.handle.apply(c,w)}function ah(O){var N,L=[],J=[],K=arguments,F,G,s,A,w,c;G=ai.data(this,"events");if(!(O.liveFired===this||!G||!G.live||O.button&&O.type==="click")){O.liveFired=this;var P=G.live.slice(0);for(A=0;A<P.length;A++){G=P[A];G.origType.replace(aA,"")===O.type?J.push(G.selector):P.splice(A--,1)}F=ai(O.target).closest(J,O.currentTarget);w=0;for(c=F.length;w<c;w++){for(A=0;A<P.length;A++){G=P[A];if(F[w].selector===G.selector){s=F[w].elem;J=null;if(G.preType==="mouseenter"||G.preType==="mouseleave"){J=ai(O.relatedTarget).closest(G.selector)[0]}if(!J||J!==s){L.push({elem:s,handleObj:G})}}}}w=0;for(c=L.length;w<c;w++){F=L[w];O.currentTarget=F.elem;O.data=F.handleObj.data;O.handleObj=F.handleObj;if(F.handleObj.origHandler.apply(F.elem,K)===false){N=false;break}}return N}}function B(s,c){return"live."+(s&&s!=="*"?s+".":"")+c.replace(/\./g,"`").replace(/ /g,"&")}function m(c){return !c||!c.parentNode||c.parentNode.nodeType===11}function bk(s,c){var w=0;c.each(function(){if(this.nodeName===(s[w]&&s[w].nodeName)){var G=ai.data(s[w++]),J=ai.data(this,G);if(G=G&&G.events){delete J.handle;J.events={};for(var A in G){for(var F in G[A]){ai.event.add(this,A,G[A][F],G[A][F].data)}}}}})}function a4(s,c,G){var A,F,w;c=c&&c[0]?c[0].ownerDocument||c[0]:S;if(s.length===1&&typeof s[0]==="string"&&s[0].length<512&&c===S&&!aQ.test(s[0])&&(ai.support.checkClone||!al.test(s[0]))){F=true;if(w=ai.fragments[s[0]]){if(w!==1){A=w}}}if(!A){A=c.createDocumentFragment();ai.clean(s,c,A,G)}if(F){ai.fragments[s[0]]=w?A:1}return{fragment:A,cacheable:F}}function aD(s,c){var w={};ai.each(E.concat.apply([],E.slice(0,c)),function(){w[this]=s});return w}function p(c){return"scrollTo" in c&&c.document?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var ai=function(s,c){return new ai.fn.init(s,c)},q=aP.jQuery,d=aP.$,S=aP.document,au,a8=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,aU=/^.[^:#\[\.,]*$/,ao=/\S/,I=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,r=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,ay=navigator.userAgent,b=false,aw=[],aC,a2=Object.prototype.toString,aW=Object.prototype.hasOwnProperty,az=Array.prototype.push,av=Array.prototype.slice,a7=Array.prototype.indexOf;ai.fn=ai.prototype={init:function(s,c){var A,w;if(!s){return this}if(s.nodeType){this.context=this[0]=s;this.length=1;return this}if(s==="body"&&!c){this.context=S;this[0]=S.body;this.selector="body";this.length=1;return this}if(typeof s==="string"){if((A=a8.exec(s))&&(A[1]||!c)){if(A[1]){w=c?c.ownerDocument||c:S;if(s=r.exec(s)){if(ai.isPlainObject(c)){s=[S.createElement(s[1])];ai.fn.attr.call(s,c,true)}else{s=[w.createElement(s[1])]}}else{s=a4([A[1]],[w]);s=(s.cacheable?s.fragment.cloneNode(true):s.fragment).childNodes}return ai.merge(this,s)}else{if(c=S.getElementById(A[2])){if(c.id!==A[2]){return au.find(s)}this.length=1;this[0]=c}this.context=S;this.selector=s;return this}}else{if(!c&&/^\w+$/.test(s)){this.selector=s;this.context=S;s=S.getElementsByTagName(s);return ai.merge(this,s)}else{return !c||c.jquery?(c||au).find(s):ai(c).find(s)}}}else{if(ai.isFunction(s)){return au.ready(s)}}if(s.selector!==M){this.selector=s.selector;this.context=s.context}return ai.makeArray(s,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return av.call(this,0)},get:function(c){return c==null?this.toArray():c<0?this.slice(c)[0]:this[c]},pushStack:function(s,c,A){var w=ai();ai.isArray(s)?az.apply(w,s):ai.merge(w,s);w.prevObject=this;w.context=this.context;if(c==="find"){w.selector=this.selector+(this.selector?" ":"")+A}else{if(c){w.selector=this.selector+"."+c+"("+A+")"}}return w},each:function(s,c){return ai.each(this,s,c)},ready:function(c){ai.bindReady();if(ai.isReady){c.call(S,ai)}else{aw&&aw.push(c)}return this},eq:function(c){return c===-1?this.slice(c):this.slice(c,+c+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(av.apply(this,arguments),"slice",av.call(arguments).join(","))},map:function(c){return this.pushStack(ai.map(this,function(s,w){return c.call(s,w,s)}))},end:function(){return this.prevObject||ai(null)},push:az,sort:[].sort,splice:[].splice};ai.fn.init.prototype=ai.fn;ai.extend=ai.fn.extend=function(){var s=arguments[0]||{},c=1,K=arguments.length,F=false,G,w,A,J;if(typeof s==="boolean"){F=s;s=arguments[1]||{};c=2}if(typeof s!=="object"&&!ai.isFunction(s)){s={}}if(K===c){s=this;--c}for(;c<K;c++){if((G=arguments[c])!=null){for(w in G){A=s[w];J=G[w];if(s!==J){if(F&&J&&(ai.isPlainObject(J)||ai.isArray(J))){A=A&&(ai.isPlainObject(A)||ai.isArray(A))?A:ai.isArray(J)?[]:{};s[w]=ai.extend(F,A,J)}else{if(J!==M){s[w]=J}}}}}}return s};ai.extend({noConflict:function(c){aP.$=d;if(c){aP.jQuery=q}return ai},isReady:false,ready:function(){if(!ai.isReady){if(!S.body){return setTimeout(ai.ready,13)}ai.isReady=true;if(aw){for(var s,c=0;s=aw[c++];){s.call(S,ai)}aw=null}ai.fn.triggerHandler&&ai(S).triggerHandler("ready")}},bindReady:function(){if(!b){b=true;if(S.readyState==="complete"){return ai.ready()}if(S.addEventListener){S.addEventListener("DOMContentLoaded",aC,false);aP.addEventListener("load",ai.ready,false)}else{if(S.attachEvent){S.attachEvent("onreadystatechange",aC);aP.attachEvent("onload",ai.ready);var s=false;try{s=aP.frameElement==null}catch(c){}S.documentElement.doScroll&&s&&a1()}}}},isFunction:function(c){return a2.call(c)==="[object Function]"},isArray:function(c){return a2.call(c)==="[object Array]"},isPlainObject:function(s){if(!s||a2.call(s)!=="[object Object]"||s.nodeType||s.setInterval){return false}if(s.constructor&&!aW.call(s,"constructor")&&!aW.call(s.constructor.prototype,"isPrototypeOf")){return false}var c;for(c in s){}return c===M||aW.call(s,c)},isEmptyObject:function(s){for(var c in s){return false}return true},error:function(c){throw c},parseJSON:function(c){if(typeof c!=="string"||!c){return null}c=ai.trim(c);if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return aP.JSON&&aP.JSON.parse?aP.JSON.parse(c):(new Function("return "+c))()}else{ai.error("Invalid JSON: "+c)}},noop:function(){},globalEval:function(s){if(s&&ao.test(s)){var c=S.getElementsByTagName("head")[0]||S.documentElement,w=S.createElement("script");w.type="text/javascript";if(ai.support.scriptEval){w.appendChild(S.createTextNode(s))}else{w.text=s}c.insertBefore(w,c.firstChild);c.removeChild(w)}},nodeName:function(s,c){return s.nodeName&&s.nodeName.toUpperCase()===c.toUpperCase()},each:function(s,c,J){var F,G=0,w=s.length,A=w===M||ai.isFunction(s);if(J){if(A){for(F in s){if(c.apply(s[F],J)===false){break}}}else{for(;G<w;){if(c.apply(s[G++],J)===false){break}}}}else{if(A){for(F in s){if(c.call(s[F],F,s[F])===false){break}}}else{for(J=s[0];G<w&&c.call(J,G,J)!==false;J=s[++G]){}}}return s},trim:function(c){return(c||"").replace(I,"")},makeArray:function(s,c){c=c||[];if(s!=null){s.length==null||typeof s==="string"||ai.isFunction(s)||typeof s!=="function"&&s.setInterval?az.call(c,s):ai.merge(c,s)}return c},inArray:function(s,c){if(c.indexOf){return c.indexOf(s)}for(var A=0,w=c.length;A<w;A++){if(c[A]===s){return A}}return -1},merge:function(s,c){var F=s.length,w=0;if(typeof c.length==="number"){for(var A=c.length;w<A;w++){s[F++]=c[w]}}else{for(;c[w]!==M;){s[F++]=c[w++]}}s.length=F;return s},grep:function(s,c,G){for(var A=[],F=0,w=s.length;F<w;F++){!G!==!c(s[F],F)&&A.push(s[F])}return A},map:function(s,c,J){for(var F=[],G,w=0,A=s.length;w<A;w++){G=c(s[w],w,J);if(G!=null){F[F.length]=G}}return F.concat.apply([],F)},guid:1,proxy:function(s,c,w){if(arguments.length===2){if(typeof c==="string"){w=s;s=w[c];c=M}else{if(c&&!ai.isFunction(c)){w=c;c=M}}}if(!c&&s){c=function(){return s.apply(w||this,arguments)}}if(s){c.guid=s.guid=s.guid||c.guid||ai.guid++}return c},uaMatch:function(c){c=c.toLowerCase();c=/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||!/compatible/.test(c)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(c)||[];return{browser:c[1]||"",version:c[2]||"0"}},browser:{}});ay=ai.uaMatch(ay);if(ay.browser){ai.browser[ay.browser]=true;ai.browser.version=ay.version}if(ai.browser.webkit){ai.browser.safari=true}if(a7){ai.inArray=function(s,c){return a7.call(c,s)}}au=ai(S);if(S.addEventListener){aC=function(){S.removeEventListener("DOMContentLoaded",aC,false);ai.ready()}}else{if(S.attachEvent){aC=function(){if(S.readyState==="complete"){S.detachEvent("onreadystatechange",aC);ai.ready()}}}}(function(){ai.support={};var L=S.documentElement,K=S.createElement("script"),J=S.createElement("div"),F="script"+aG();J.style.display="none";J.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var G=J.getElementsByTagName("*"),w=J.getElementsByTagName("a")[0];if(!(!G||!G.length||!w)){ai.support={leadingWhitespace:J.firstChild.nodeType===3,tbody:!J.getElementsByTagName("tbody").length,htmlSerialize:!!J.getElementsByTagName("link").length,style:/red/.test(w.getAttribute("style")),hrefNormalized:w.getAttribute("href")==="/a",opacity:/^0.55$/.test(w.style.opacity),cssFloat:!!w.style.cssFloat,checkOn:J.getElementsByTagName("input")[0].value==="on",optSelected:S.createElement("select").appendChild(S.createElement("option")).selected,parentNode:J.removeChild(J.appendChild(S.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};K.type="text/javascript";try{K.appendChild(S.createTextNode("window."+F+"=1;"))}catch(A){}L.insertBefore(K,L.firstChild);if(aP[F]){ai.support.scriptEval=true;delete aP[F]}try{delete K.test}catch(c){ai.support.deleteExpando=false}L.removeChild(K);if(J.attachEvent&&J.fireEvent){J.attachEvent("onclick",function s(){ai.support.noCloneEvent=false;J.detachEvent("onclick",s)});J.cloneNode(true).fireEvent("onclick")}J=S.createElement("div");J.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";L=S.createDocumentFragment();L.appendChild(J.firstChild);ai.support.checkClone=L.cloneNode(true).cloneNode(true).lastChild.checked;ai(function(){var N=S.createElement("div");N.style.width=N.style.paddingLeft="1px";S.body.appendChild(N);ai.boxModel=ai.support.boxModel=N.offsetWidth===2;S.body.removeChild(N).style.display="none"});L=function(N){var P=S.createElement("div");N="on"+N;var O=N in P;if(!O){P.setAttribute(N,"return;");O=typeof P[N]==="function"}return O};ai.support.submitBubbles=L("submit");ai.support.changeBubbles=L("change");L=K=J=G=w=null}})();ai.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var aI="jQuery"+aG(),e=0,aT={};ai.extend({cache:{},expando:aI,noData:{embed:true,object:true,applet:true},data:function(s,c,F){if(!(s.nodeName&&ai.noData[s.nodeName.toLowerCase()])){s=s==aP?aT:s;var w=s[aI],A=ai.cache;if(!w&&typeof c==="string"&&F===M){return null}w||(w=++e);if(typeof c==="object"){s[aI]=w;A[w]=ai.extend(true,{},c)}else{if(!A[w]){s[aI]=w;A[w]={}}}s=A[w];if(F!==M){s[c]=F}return typeof c==="string"?s[c]:s}},removeData:function(s,c){if(!(s.nodeName&&ai.noData[s.nodeName.toLowerCase()])){s=s==aP?aT:s;var F=s[aI],w=ai.cache,A=w[F];if(c){if(A){delete A[c];ai.isEmptyObject(A)&&ai.removeData(s)}}else{if(ai.support.deleteExpando){delete s[ai.expando]}else{s.removeAttribute&&s.removeAttribute(ai.expando)}delete w[F]}}}});ai.fn.extend({data:function(s,c){if(typeof s==="undefined"&&this.length){return ai.data(this[0])}else{if(typeof s==="object"){return this.each(function(){ai.data(this,s)})}}var A=s.split(".");A[1]=A[1]?"."+A[1]:"";if(c===M){var w=this.triggerHandler("getData"+A[1]+"!",[A[0]]);if(w===M&&this.length){w=ai.data(this[0],s)}return w===M&&A[1]?this.data(A[0]):w}else{return this.trigger("setData"+A[1]+"!",[A[0],c]).each(function(){ai.data(this,s,c)})}},removeData:function(c){return this.each(function(){ai.removeData(this,c)})}});ai.extend({queue:function(s,c,A){if(s){c=(c||"fx")+"queue";var w=ai.data(s,c);if(!A){return w||[]}if(!w||ai.isArray(A)){w=ai.data(s,c,ai.makeArray(A))}else{w.push(A)}return w}},dequeue:function(s,c){c=c||"fx";var A=ai.queue(s,c),w=A.shift();if(w==="inprogress"){w=A.shift()}if(w){c==="fx"&&A.unshift("inprogress");w.call(s,function(){ai.dequeue(s,c)})}}});ai.fn.extend({queue:function(s,c){if(typeof s!=="string"){c=s;s="fx"}if(c===M){return ai.queue(this[0],s)}return this.each(function(){var w=ai.queue(this,s,c);s==="fx"&&w[0]!=="inprogress"&&ai.dequeue(this,s)})},dequeue:function(c){return this.each(function(){ai.dequeue(this,c)})},delay:function(s,c){s=ai.fx?ai.fx.speeds[s]||s:s;c=c||"fx";return this.queue(c,function(){var w=this;setTimeout(function(){ai.dequeue(w,c)},s)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var bf=/[\n\t]/g,ac=/\s+/,a9=/\r/g,aN=/href|src|style/,aV=/(button|input)/i,ax=/(button|input|object|select|textarea)/i,U=/^(a|area)$/i,aZ=/radio|checkbox/;ai.fn.extend({attr:function(s,c){return aq(this,s,c,true,ai.attr)},removeAttr:function(c){return this.each(function(){ai.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(L){if(ai.isFunction(L)){return this.each(function(O){var N=ai(this);N.addClass(L.call(this,O,N.attr("class")))})}if(L&&typeof L==="string"){for(var K=(L||"").split(ac),J=0,F=this.length;J<F;J++){var G=this[J];if(G.nodeType===1){if(G.className){for(var w=" "+G.className+" ",A=G.className,c=0,s=K.length;c<s;c++){if(w.indexOf(" "+K[c]+" ")<0){A+=" "+K[c]}}G.className=ai.trim(A)}else{G.className=L}}}}return this},removeClass:function(s){if(ai.isFunction(s)){return this.each(function(L){var N=ai(this);N.removeClass(s.call(this,L,N.attr("class")))})}if(s&&typeof s==="string"||s===M){for(var c=(s||"").split(ac),K=0,F=this.length;K<F;K++){var G=this[K];if(G.nodeType===1&&G.className){if(s){for(var w=(" "+G.className+" ").replace(bf," "),A=0,J=c.length;A<J;A++){w=w.replace(" "+c[A]+" "," ")}G.className=ai.trim(w)}else{G.className=""}}}}return this},toggleClass:function(s,c){var A=typeof s,w=typeof c==="boolean";if(ai.isFunction(s)){return this.each(function(G){var F=ai(this);F.toggleClass(s.call(this,G,F.attr("class"),c),c)})}return this.each(function(){if(A==="string"){for(var K,G=0,J=ai(this),L=c,F=s.split(ac);K=F[G++];){L=w?L:!J.hasClass(K);J[L?"addClass":"removeClass"](K)}}else{if(A==="undefined"||A==="boolean"){this.className&&ai.data(this,"__className__",this.className);this.className=this.className||s===false?"":ai.data(this,"__className__")||""}}})},hasClass:function(s){s=" "+s+" ";for(var c=0,w=this.length;c<w;c++){if((" "+this[c].className+" ").replace(bf," ").indexOf(s)>-1){return true}}return false},val:function(s){if(s===M){var c=this[0];if(c){if(ai.nodeName(c,"option")){return(c.attributes.value||{}).specified?c.value:c.text}if(ai.nodeName(c,"select")){var K=c.selectedIndex,F=[],G=c.options;c=c.type==="select-one";if(K<0){return null}var w=c?K:0;for(K=c?K+1:G.length;w<K;w++){var A=G[w];if(A.selected){s=ai(A).val();if(c){return s}F.push(s)}}return F}if(aZ.test(c.type)&&!ai.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(a9,"")}return M}var J=ai.isFunction(s);return this.each(function(L){var P=ai(this),O=s;if(this.nodeType===1){if(J){O=s.call(this,L,P.val())}if(typeof O==="number"){O+=""}if(ai.isArray(O)&&aZ.test(this.type)){this.checked=ai.inArray(P.val(),O)>=0}else{if(ai.nodeName(this,"select")){var N=ai.makeArray(O);ai("option",this).each(function(){this.selected=ai.inArray(ai(this).val(),N)>=0});if(!N.length){this.selectedIndex=-1}}else{this.value=O}}}})}});ai.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(s,c,G,A){if(!s||s.nodeType===3||s.nodeType===8){return M}if(A&&c in ai.attrFn){return ai(s)[c](G)}A=s.nodeType!==1||!ai.isXMLDoc(s);var F=G!==M;c=A&&ai.props[c]||c;if(s.nodeType===1){var w=aN.test(c);if(c in s&&A&&!w){if(F){c==="type"&&aV.test(s.nodeName)&&s.parentNode&&ai.error("type property can't be changed");s[c]=G}if(ai.nodeName(s,"form")&&s.getAttributeNode(c)){return s.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=s.getAttributeNode("tabIndex"))&&c.specified?c.value:ax.test(s.nodeName)||U.test(s.nodeName)&&s.href?0:M}return s[c]}if(!ai.support.style&&A&&c==="style"){if(F){s.style.cssText=""+G}return s.style.cssText}F&&s.setAttribute(c,""+G);s=!ai.support.hrefNormalized&&A&&w?s.getAttribute(c,2):s.getAttribute(c);return s===null?M:s}return ai.style(s,c,G)}});var aA=/\.(.*)$/,t=function(c){return c.replace(/[^\w\s\.\|`]/g,function(s){return"\\"+s})};ai.event={add:function(P,O,L,J){if(!(P.nodeType===3||P.nodeType===8)){if(P.setInterval&&P!==aP&&!P.frameElement){P=aP}var K,F;if(L.handler){K=L;L=K.handler}if(!L.guid){L.guid=ai.guid++}if(F=ai.data(P)){var G=F.events=F.events||{},s=F.handle;if(!s){F.handle=s=function(){return typeof ai!=="undefined"&&!ai.event.triggered?ai.event.handle.apply(s.elem,arguments):M}}s.elem=P;O=O.split(" ");for(var A,w=0,c;A=O[w++];){F=K?ai.extend({},K):{handler:L,data:J};if(A.indexOf(".")>-1){c=A.split(".");A=c.shift();F.namespace=c.slice(0).sort().join(".")}else{c=[];F.namespace=""}F.type=A;F.guid=L.guid;var Q=G[A],N=ai.event.special[A]||{};if(!Q){Q=G[A]=[];if(!N.setup||N.setup.call(P,J,c,s)===false){if(P.addEventListener){P.addEventListener(A,s,false)}else{P.attachEvent&&P.attachEvent("on"+A,s)}}}if(N.add){N.add.call(P,F);if(!F.handler.guid){F.handler.guid=L.guid}}Q.push(F);ai.event.global[A]=true}P=null}}},global:{},remove:function(R,Q,O,L){if(!(R.nodeType===3||R.nodeType===8)){var N,J=0,K,A,G,F,c,T,P=ai.data(R),s=P&&P.events;if(P&&s){if(Q&&Q.type){O=Q.handler;Q=Q.type}if(!Q||typeof Q==="string"&&Q.charAt(0)==="."){Q=Q||"";for(N in s){ai.event.remove(R,N+Q)}}else{for(Q=Q.split(" ");N=Q[J++];){F=N;K=N.indexOf(".")<0;A=[];if(!K){A=N.split(".");N=A.shift();G=new RegExp("(^|\\.)"+ai.map(A.slice(0).sort(),t).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(c=s[N]){if(O){F=ai.event.special[N]||{};for(w=L||0;w<c.length;w++){T=c[w];if(O.guid===T.guid){if(K||G.test(T.namespace)){L==null&&c.splice(w--,1);F.remove&&F.remove.call(R,T)}if(L!=null){break}}}if(c.length===0||L!=null&&c.length===1){if(!F.teardown||F.teardown.call(R,A)===false){aH(R,N,P.handle)}delete s[N]}}else{for(var w=0;w<c.length;w++){T=c[w];if(K||G.test(T.namespace)){ai.event.remove(R,F,T.handler,w);c.splice(w--,1)}}}}}if(ai.isEmptyObject(s)){if(Q=P.handle){Q.elem=null}delete P.events;delete P.handle;ai.isEmptyObject(P)&&ai.removeData(R)}}}}},trigger:function(N,L,K,G){var J=N.type||N;if(!G){N=typeof N==="object"?N[aI]?N:ai.extend(ai.Event(J),N):ai.Event(J);if(J.indexOf("!")>=0){N.type=J=J.slice(0,-1);N.exclusive=true}if(!K){N.stopPropagation();ai.event.global[J]&&ai.each(ai.cache,function(){this.events&&this.events[J]&&ai.event.trigger(N,L,this.handle.elem)})}if(!K||K.nodeType===3||K.nodeType===8){return M}N.result=M;N.target=K;L=ai.makeArray(L);L.unshift(N)}N.currentTarget=K;(G=ai.data(K,"handle"))&&G.apply(K,L);G=K.parentNode||K.ownerDocument;try{if(!(K&&K.nodeName&&ai.noData[K.nodeName.toLowerCase()])){if(K["on"+J]&&K["on"+J].apply(K,L)===false){N.result=false}}}catch(A){}if(!N.isPropagationStopped()&&G){ai.event.trigger(N,L,G,true)}else{if(!N.isDefaultPrevented()){G=N.target;var F,c=ai.nodeName(G,"a")&&J==="click",w=ai.event.special[J]||{};if((!w._default||w._default.call(K,N)===false)&&!c&&!(G&&G.nodeName&&ai.noData[G.nodeName.toLowerCase()])){try{if(G[J]){if(F=G["on"+J]){G["on"+J]=null}ai.event.triggered=true;G[J]()}}catch(s){}if(F){G["on"+J]=F}ai.event.triggered=false}}}},handle:function(s){var c,J,F,G;s=arguments[0]=ai.event.fix(s||aP.event);s.currentTarget=this;c=s.type.indexOf(".")<0&&!s.exclusive;if(!c){J=s.type.split(".");s.type=J.shift();F=new RegExp("(^|\\.)"+J.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}G=ai.data(this,"events");J=G[s.type];if(G&&J){J=J.slice(0);G=0;for(var w=J.length;G<w;G++){var A=J[G];if(c||F.test(A.namespace)){s.handler=A.handler;s.data=A.data;s.handleObj=A;A=A.handler.apply(this,arguments);if(A!==M){s.result=A;if(A===false){s.preventDefault();s.stopPropagation()}}if(s.isImmediatePropagationStopped()){break}}}}return s.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(s){if(s[aI]){return s}var c=s;s=ai.Event(c);for(var A=this.props.length,w;A;){w=this.props[--A];s[w]=c[w]}if(!s.target){s.target=s.srcElement||S}if(s.target.nodeType===3){s.target=s.target.parentNode}if(!s.relatedTarget&&s.fromElement){s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement}if(s.pageX==null&&s.clientX!=null){c=S.documentElement;A=S.body;s.pageX=s.clientX+(c&&c.scrollLeft||A&&A.scrollLeft||0)-(c&&c.clientLeft||A&&A.clientLeft||0);s.pageY=s.clientY+(c&&c.scrollTop||A&&A.scrollTop||0)-(c&&c.clientTop||A&&A.clientTop||0)}if(!s.which&&(s.charCode||s.charCode===0?s.charCode:s.keyCode)){s.which=s.charCode||s.keyCode}if(!s.metaKey&&s.ctrlKey){s.metaKey=s.ctrlKey}if(!s.which&&s.button!==M){s.which=s.button&1?1:s.button&2?3:s.button&4?2:0}return s},guid:100000000,proxy:ai.proxy,special:{ready:{setup:ai.bindReady,teardown:ai.noop},live:{add:function(c){ai.event.add(this,c.origType,ai.extend({},c,{handler:ah}))},remove:function(s){var c=true,w=s.origType.replace(aA,"");ai.each(ai.data(this,"events").live||[],function(){if(w===this.origType.replace(aA,"")){return c=false}});c&&ai.event.remove(this,s.origType,ah)}},beforeunload:{setup:function(s,c,w){if(this.setInterval){this.onbeforeunload=w}return false},teardown:function(s,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};var aH=S.removeEventListener?function(s,c,w){s.removeEventListener(c,w,false)}:function(s,c,w){s.detachEvent("on"+c,w)};ai.Event=function(c){if(!this.preventDefault){return new ai.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=aG();this[aI]=true};ai.Event.prototype={preventDefault:function(){this.isDefaultPrevented=an;var c=this.originalEvent;if(c){c.preventDefault&&c.preventDefault();c.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=an;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=an;this.stopPropagation()},isDefaultPrevented:ap,isPropagationStopped:ap,isImmediatePropagationStopped:ap};var af=function(s){var c=s.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){s.type=s.data;ai.event.handle.apply(this,arguments)}}catch(w){}},y=function(c){c.type=c.data;ai.event.handle.apply(this,arguments)};ai.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(s,c){ai.event.special[s]={setup:function(w){ai.event.add(this,c,w&&w.selector?y:af,s)},teardown:function(w){ai.event.remove(this,c,w&&w.selector?y:af)}}});if(!ai.support.submitBubbles){ai.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){ai.event.add(this,"click.specialSubmit",function(s){var c=s.target,w=c.type;if((w==="submit"||w==="image")&&ai(c).closest("form").length){return aL("submit",this,arguments)}});ai.event.add(this,"keypress.specialSubmit",function(s){var c=s.target,w=c.type;if((w==="text"||w==="password")&&ai(c).closest("form").length&&s.keyCode===13){return aL("submit",this,arguments)}})}else{return false}},teardown:function(){ai.event.remove(this,".specialSubmit")}}}if(!ai.support.changeBubbles){var u=/textarea|input|select/i,g,k=function(s){var c=s.type,w=s.value;if(c==="radio"||c==="checkbox"){w=s.checked}else{if(c==="select-multiple"){w=s.selectedIndex>-1?ai.map(s.options,function(A){return A.selected}).join("-"):""}else{if(s.nodeName.toLowerCase()==="select"){w=s.selectedIndex}}}return w},be=function(s,c){var F=s.target,w,A;if(!(!u.test(F.nodeName)||F.readOnly)){w=ai.data(F,"_change_data");A=k(F);if(s.type!=="focusout"||F.type!=="radio"){ai.data(F,"_change_data",A)}if(!(w===M||A===w)){if(w!=null||A){s.type="change";return ai.event.trigger(s,c,F)}}}};ai.event.special.change={filters:{focusout:be,click:function(s){var c=s.target,w=c.type;if(w==="radio"||w==="checkbox"||c.nodeName.toLowerCase()==="select"){return be.call(this,s)}},keydown:function(s){var c=s.target,w=c.type;if(s.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||s.keyCode===32&&(w==="checkbox"||w==="radio")||w==="select-multiple"){return be.call(this,s)}},beforeactivate:function(c){c=c.target;ai.data(c,"_change_data",k(c))}},setup:function(){if(this.type==="file"){return false}for(var c in g){ai.event.add(this,c+".specialChange",g[c])}return u.test(this.nodeName)},teardown:function(){ai.event.remove(this,".specialChange");return u.test(this.nodeName)}};g=ai.event.special.change.filters}S.addEventListener&&ai.each({focus:"focusin",blur:"focusout"},function(s,c){function w(A){A=ai.event.fix(A);A.type=c;return ai.event.handle.call(this,A)}ai.event.special[c]={setup:function(){this.addEventListener(s,w,true)},teardown:function(){this.removeEventListener(s,w,true)}}});ai.each(["bind","one"],function(s,c){ai.fn[c]=function(K,F,G){if(typeof K==="object"){for(var w in K){this[c](w,F,K[w],G)}return this}if(ai.isFunction(F)){G=F;F=M}var A=c==="one"?ai.proxy(G,function(L){ai(this).unbind(L,A);return G.apply(this,arguments)}):G;if(K==="unload"&&c!=="one"){this.one(K,F,G)}else{w=0;for(var J=this.length;w<J;w++){ai.event.add(this[w],K,A,F)}}return this}});ai.fn.extend({unbind:function(s,c){if(typeof s==="object"&&!s.preventDefault){for(var A in s){this.unbind(A,s[A])}}else{A=0;for(var w=this.length;A<w;A++){ai.event.remove(this[A],s,c)}}return this},delegate:function(s,c,A,w){return this.live(c,A,w,s)},undelegate:function(s,c,w){return arguments.length===0?this.unbind("live"):this.die(c,null,w,s)},trigger:function(s,c){return this.each(function(){ai.event.trigger(s,c,this)})},triggerHandler:function(s,c){if(this[0]){s=ai.Event(s);s.preventDefault();s.stopPropagation();ai.event.trigger(s,c,this[0]);return s.result}},toggle:function(s){for(var c=arguments,w=1;w<c.length;){ai.proxy(s,c[w++])}return this.click(ai.proxy(s,function(A){var F=(ai.data(this,"lastToggle"+s.guid)||0)%w;ai.data(this,"lastToggle"+s.guid,F+1);A.preventDefault();return c[F].apply(this,arguments)||false}))},hover:function(s,c){return this.mouseenter(s).mouseleave(c||s)}});var bi={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};ai.each(["live","die"],function(s,c){ai.fn[c]=function(O,L,N,J){var K,A=0,G,F,w=J||this.selector,P=J?this:ai(this.context);if(ai.isFunction(L)){N=L;L=M}for(O=(O||"").split(" ");(K=O[A++])!=null;){J=aA.exec(K);G="";if(J){G=J[0];K=K.replace(aA,"")}if(K==="hover"){O.push("mouseenter"+G,"mouseleave"+G)}else{F=K;if(K==="focus"||K==="blur"){O.push(bi[K]+G);K+=G}else{K=(bi[K]||K)+G}c==="live"?P.each(function(){ai.event.add(this,B(K,w),{data:L,selector:w,handler:N,origType:K,origHandler:N,preType:F})}):P.unbind(B(K,w),N)}}return this}});ai.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(s,c){ai.fn[c]=function(w){return w?this.bind(c,w):this.trigger(c)};if(ai.attrFn){ai.attrFn[c]=true}});aP.attachEvent&&!aP.addEventListener&&aP.attachEvent("onunload",function(){for(var s in ai.cache){if(ai.cache[s].handle){try{ai.event.remove(ai.cache[s].handle.elem)}catch(c){}}}});(function(){function W(ab){for(var aa="",Z,Y=0;ab[Y];Y++){Z=ab[Y];if(Z.nodeType===3||Z.nodeType===4){aa+=Z.nodeValue}else{if(Z.nodeType!==8){aa+=W(Z.childNodes)}}}return aa}function V(bb,ba,ab,aa,Y,Z){Y=0;for(var bn=aa.length;Y<bn;Y++){var bo=aa[Y];if(bo){bo=bo[bb];for(var bm=false;bo;){if(bo.sizcache===ab){bm=aa[bo.sizset];break}if(bo.nodeType===1&&!Z){bo.sizcache=ab;bo.sizset=Y}if(bo.nodeName.toLowerCase()===ba){bm=bo;break}bo=bo[bb]}aa[Y]=bm}}}function T(bb,ba,ab,aa,Y,Z){Y=0;for(var bn=aa.length;Y<bn;Y++){var bo=aa[Y];if(bo){bo=bo[bb];for(var bm=false;bo;){if(bo.sizcache===ab){bm=aa[bo.sizset];break}if(bo.nodeType===1){if(!Z){bo.sizcache=ab;bo.sizset=Y}if(typeof ba!=="string"){if(bo===ba){bm=true;break}}else{if(N.filter(ba,[bo]).length>0){bm=bo;break}}}bo=bo[bb]}aa[Y]=bm}}}var Q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,R=0,O=Object.prototype.toString,P=false,K=true;[0,0].sort(function(){K=false;return 0});var N=function(bn,bm,ba,ab){ba=ba||[];var Z=bm=bm||S;if(bm.nodeType!==1&&bm.nodeType!==9){return[]}if(!bn||typeof bn!=="string"){return ba}for(var aa=[],bs,bt,bp,bb,br=true,bo=s(bm),bq=bn;(Q.exec(""),bs=Q.exec(bq))!==null;){bq=bs[3];aa.push(bs[1]);if(bs[2]){bb=bs[3];break}}if(aa.length>1&&G.exec(bn)){if(aa.length===2&&L.relative[aa[0]]){bt=X(aa[0]+aa[1],bm)}else{for(bt=L.relative[aa[0]]?[bm]:N(aa.shift(),bm);aa.length;){bn=aa.shift();if(L.relative[bn]){bn+=aa.shift()}bt=X(bn,bt)}}}else{if(!ab&&aa.length>1&&bm.nodeType===9&&!bo&&L.match.ID.test(aa[0])&&!L.match.ID.test(aa[aa.length-1])){bs=N.find(aa.shift(),bm,bo);bm=bs.expr?N.filter(bs.expr,bs.set)[0]:bs.set[0]}if(bm){bs=ab?{expr:aa.pop(),set:c(ab)}:N.find(aa.pop(),aa.length===1&&(aa[0]==="~"||aa[0]==="+")&&bm.parentNode?bm.parentNode:bm,bo);bt=bs.expr?N.filter(bs.expr,bs.set):bs.set;if(aa.length>0){bp=c(bt)}else{br=false}for(;aa.length;){var Y=aa.pop();bs=Y;if(L.relative[Y]){bs=aa.pop()}else{Y=""}if(bs==null){bs=bm}L.relative[Y](bp,bs,bo)}}else{bp=[]}}bp||(bp=bt);bp||N.error(Y||bn);if(O.call(bp)==="[object Array]"){if(br){if(bm&&bm.nodeType===1){for(bn=0;bp[bn]!=null;bn++){if(bp[bn]&&(bp[bn]===true||bp[bn].nodeType===1&&A(bm,bp[bn]))){ba.push(bt[bn])}}}else{for(bn=0;bp[bn]!=null;bn++){bp[bn]&&bp[bn].nodeType===1&&ba.push(bt[bn])}}}else{ba.push.apply(ba,bp)}}else{c(bp,ba)}if(bb){N(bb,Z,ba,ab);N.uniqueSort(ba)}return ba};N.uniqueSort=function(Z){if(J){P=K;Z.sort(J);if(P){for(var Y=1;Y<Z.length;Y++){Z[Y]===Z[Y-1]&&Z.splice(Y--,1)}}}return Z};N.matches=function(Z,Y){return N(Z,null,null,Y)};N.find=function(bb,ba,ab){var aa,Y;if(!bb){return[]}for(var Z=0,bn=L.order.length;Z<bn;Z++){var bo=L.order[Z];if(Y=L.leftMatch[bo].exec(bb)){var bm=Y[1];Y.splice(1,1);if(bm.substr(bm.length-1)!=="\\"){Y[1]=(Y[1]||"").replace(/\\/g,"");aa=L.find[bo](Y,ba,ab);if(aa!=null){bb=bb.replace(L.match[bo],"");break}}}}aa||(aa=ba.getElementsByTagName("*"));return{set:aa,expr:bb}};N.filter=function(bo,bn,bb,ab){for(var Z=bo,aa=[],bu=bn,bv,br,bm=bn&&bn[0]&&s(bn[0]);bo&&bn.length;){for(var bt in L.filter){if((bv=L.leftMatch[bt].exec(bo))!=null&&bv[2]){var bp=L.filter[bt],bs,Y;Y=bv[1];br=false;bv.splice(1,1);if(Y.substr(Y.length-1)!=="\\"){if(bu===aa){aa=[]}if(L.preFilter[bt]){if(bv=L.preFilter[bt](bv,bu,bb,aa,ab,bm)){if(bv===true){continue}}else{br=bs=true}}if(bv){for(var ba=0;(Y=bu[ba])!=null;ba++){if(Y){bs=bp(Y,bv,ba,bu);var bq=ab^!!bs;if(bb&&bs!=null){if(bq){br=true}else{bu[ba]=false}}else{if(bq){aa.push(Y);br=true}}}}}if(bs!==M){bb||(bu=aa);bo=bo.replace(L.match[bt],"");if(!br){return[]}break}}}}if(bo===Z){if(br==null){N.error(bo)}else{break}}Z=bo}return bu};N.error=function(Y){throw"Syntax error, unrecognized expression: "+Y};var L=N.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(Y){return Y.getAttribute("href")}},relative:{"+":function(ab,aa){var Z=typeof aa==="string",Y=Z&&!/\W/.test(aa);Z=Z&&!Y;if(Y){aa=aa.toLowerCase()}Y=0;for(var ba=ab.length,bb;Y<ba;Y++){if(bb=ab[Y]){for(;(bb=bb.previousSibling)&&bb.nodeType!==1;){}ab[Y]=Z||bb&&bb.nodeName.toLowerCase()===aa?bb||false:bb===aa}}Z&&N.filter(aa,ab,true)},">":function(ab,aa){var Z=typeof aa==="string";if(Z&&!/\W/.test(aa)){aa=aa.toLowerCase();for(var Y=0,ba=ab.length;Y<ba;Y++){var bb=ab[Y];if(bb){Z=bb.parentNode;ab[Y]=Z.nodeName.toLowerCase()===aa?Z:false}}}else{Y=0;for(ba=ab.length;Y<ba;Y++){if(bb=ab[Y]){ab[Y]=Z?bb.parentNode:bb.parentNode===aa}}Z&&N.filter(aa,ab,true)}},"":function(ab,aa,Z){var Y=R++,ba=T;if(typeof aa==="string"&&!/\W/.test(aa)){var bb=aa=aa.toLowerCase();ba=V}ba("parentNode",aa,Y,ab,bb,Z)},"~":function(ab,aa,Z){var Y=R++,ba=T;if(typeof aa==="string"&&!/\W/.test(aa)){var bb=aa=aa.toLowerCase();ba=V}ba("previousSibling",aa,Y,ab,bb,Z)}},find:{ID:function(aa,Z,Y){if(typeof Z.getElementById!=="undefined"&&!Y){return(aa=Z.getElementById(aa[1]))?[aa]:[]}},NAME:function(ab,aa){if(typeof aa.getElementsByName!=="undefined"){var Z=[];aa=aa.getElementsByName(ab[1]);for(var Y=0,ba=aa.length;Y<ba;Y++){aa[Y].getAttribute("name")===ab[1]&&Z.push(aa[Y])}return Z.length===0?null:Z}},TAG:function(Z,Y){return Y.getElementsByTagName(Z[1])}},preFilter:{CLASS:function(ba,ab,Z,Y,bb,bm){ba=" "+ba[1].replace(/\\/g,"")+" ";if(bm){return ba}bm=0;for(var aa;(aa=ab[bm])!=null;bm++){if(aa){if(bb^(aa.className&&(" "+aa.className+" ").replace(/[\t\n]/g," ").indexOf(ba)>=0)){Z||Y.push(aa)}else{if(Z){ab[bm]=false}}}}return false},ID:function(Y){return Y[1].replace(/\\/g,"")},TAG:function(Y){return Y[1].toLowerCase()},CHILD:function(Z){if(Z[1]==="nth"){var Y=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(Z[2]==="even"&&"2n"||Z[2]==="odd"&&"2n+1"||!/\D/.test(Z[2])&&"0n+"+Z[2]||Z[2]);Z[2]=Y[1]+(Y[2]||1)-0;Z[3]=Y[3]-0}Z[0]=R++;return Z},ATTR:function(ab,aa,Z,Y,ba,bb){aa=ab[1].replace(/\\/g,"");if(!bb&&L.attrMap[aa]){ab[1]=L.attrMap[aa]}if(ab[2]==="~="){ab[4]=" "+ab[4]+" "}return ab},PSEUDO:function(ab,aa,Z,Y,ba){if(ab[1]==="not"){if((Q.exec(ab[3])||"").length>1||/^\w/.test(ab[3])){ab[3]=N(ab[3],null,null,aa)}else{ab=N.filter(ab[3],aa,Z,true^ba);Z||Y.push.apply(Y,ab);return false}}else{if(L.match.POS.test(ab[0])||L.match.CHILD.test(ab[0])){return true}}return ab},POS:function(Y){Y.unshift(true);return Y}},filters:{enabled:function(Y){return Y.disabled===false&&Y.type!=="hidden"},disabled:function(Y){return Y.disabled===true},checked:function(Y){return Y.checked===true},selected:function(Y){return Y.selected===true},parent:function(Y){return !!Y.firstChild},empty:function(Y){return !Y.firstChild},has:function(aa,Z,Y){return !!N(Y[3],aa).length},header:function(Y){return/h\d/i.test(Y.nodeName)},text:function(Y){return"text"===Y.type},radio:function(Y){return"radio"===Y.type},checkbox:function(Y){return"checkbox"===Y.type},file:function(Y){return"file"===Y.type},password:function(Y){return"password"===Y.type},submit:function(Y){return"submit"===Y.type},image:function(Y){return"image"===Y.type},reset:function(Y){return"reset"===Y.type},button:function(Y){return"button"===Y.type||Y.nodeName.toLowerCase()==="button"},input:function(Y){return/input|select|textarea|button/i.test(Y.nodeName)}},setFilters:{first:function(Z,Y){return Y===0},last:function(ab,aa,Z,Y){return aa===Y.length-1},even:function(Z,Y){return Y%2===0},odd:function(Z,Y){return Y%2===1},lt:function(aa,Z,Y){return Z<Y[3]-0},gt:function(aa,Z,Y){return Z>Y[3]-0},nth:function(aa,Z,Y){return Y[3]-0===Z},eq:function(aa,Z,Y){return Y[3]-0===Z}},filter:{PSEUDO:function(ab,aa,Z,Y){var ba=aa[1],bb=L.filters[ba];if(bb){return bb(ab,Z,aa,Y)}else{if(ba==="contains"){return(ab.textContent||ab.innerText||W([ab])||"").indexOf(aa[3])>=0}else{if(ba==="not"){aa=aa[3];Z=0;for(Y=aa.length;Z<Y;Z++){if(aa[Z]===ab){return false}}return true}else{N.error("Syntax error, unrecognized expression: "+ba)}}}},CHILD:function(ba,ab){var Z=ab[1],Y=ba;switch(Z){case"only":case"first":for(;Y=Y.previousSibling;){if(Y.nodeType===1){return false}}if(Z==="first"){return true}Y=ba;case"last":for(;Y=Y.nextSibling;){if(Y.nodeType===1){return false}}return true;case"nth":Z=ab[2];var bb=ab[3];if(Z===1&&bb===0){return true}ab=ab[0];var bm=ba.parentNode;if(bm&&(bm.sizcache!==ab||!ba.nodeIndex)){var aa=0;for(Y=bm.firstChild;Y;Y=Y.nextSibling){if(Y.nodeType===1){Y.nodeIndex=++aa}}bm.sizcache=ab}ba=ba.nodeIndex-bb;return Z===0?ba===0:ba%Z===0&&ba/Z>=0}},ID:function(Z,Y){return Z.nodeType===1&&Z.getAttribute("id")===Y},TAG:function(Z,Y){return Y==="*"&&Z.nodeType===1||Z.nodeName.toLowerCase()===Y},CLASS:function(Z,Y){return(" "+(Z.className||Z.getAttribute("class"))+" ").indexOf(Y)>-1},ATTR:function(ab,aa){var Z=aa[1];ab=L.attrHandle[Z]?L.attrHandle[Z](ab):ab[Z]!=null?ab[Z]:ab.getAttribute(Z);Z=ab+"";var Y=aa[2];aa=aa[4];return ab==null?Y==="!=":Y==="="?Z===aa:Y==="*="?Z.indexOf(aa)>=0:Y==="~="?(" "+Z+" ").indexOf(aa)>=0:!aa?Z&&ab!==false:Y==="!="?Z!==aa:Y==="^="?Z.indexOf(aa)===0:Y==="$="?Z.substr(Z.length-aa.length)===aa:Y==="|="?Z===aa||Z.substr(0,aa.length+1)===aa+"-":false},POS:function(ab,aa,Z,Y){var ba=L.setFilters[aa[2]];if(ba){return ba(ab,Z,aa,Y)}}}},G=L.match.POS;for(var w in L.match){L.match[w]=new RegExp(L.match[w].source+/(?![^\[]*\])(?![^\(]*\))/.source);L.leftMatch[w]=new RegExp(/(^(?:.|\r|\n)*?)/.source+L.match[w].source.replace(/\\(\d+)/g,function(Z,Y){return"\\"+(Y-0+1)}))}var c=function(Z,Y){Z=Array.prototype.slice.call(Z,0);if(Y){Y.push.apply(Y,Z);return Y}return Z};try{Array.prototype.slice.call(S.documentElement.childNodes,0)}catch(F){c=function(ab,aa){aa=aa||[];if(O.call(ab)==="[object Array]"){Array.prototype.push.apply(aa,ab)}else{if(typeof ab.length==="number"){for(var Z=0,Y=ab.length;Z<Y;Z++){aa.push(ab[Z])}}else{for(Z=0;ab[Z];Z++){aa.push(ab[Z])}}}return aa}}var J;if(S.documentElement.compareDocumentPosition){J=function(Z,Y){if(!Z.compareDocumentPosition||!Y.compareDocumentPosition){if(Z==Y){P=true}return Z.compareDocumentPosition?-1:1}Z=Z.compareDocumentPosition(Y)&4?-1:Z===Y?0:1;if(Z===0){P=true}return Z}}else{if("sourceIndex" in S.documentElement){J=function(Z,Y){if(!Z.sourceIndex||!Y.sourceIndex){if(Z==Y){P=true}return Z.sourceIndex?-1:1}Z=Z.sourceIndex-Y.sourceIndex;if(Z===0){P=true}return Z}}else{if(S.createRange){J=function(ab,aa){if(!ab.ownerDocument||!aa.ownerDocument){if(ab==aa){P=true}return ab.ownerDocument?-1:1}var Z=ab.ownerDocument.createRange(),Y=aa.ownerDocument.createRange();Z.setStart(ab,0);Z.setEnd(ab,0);Y.setStart(aa,0);Y.setEnd(aa,0);ab=Z.compareBoundaryPoints(Range.START_TO_END,Y);if(ab===0){P=true}return ab}}}}(function(){var aa=S.createElement("div"),Z="script"+(new Date).getTime();aa.innerHTML="<a name='"+Z+"'/>";var Y=S.documentElement;Y.insertBefore(aa,Y.firstChild);if(S.getElementById(Z)){L.find.ID=function(ab,ba,bb){if(typeof ba.getElementById!=="undefined"&&!bb){return(ba=ba.getElementById(ab[1]))?ba.id===ab[1]||typeof ba.getAttributeNode!=="undefined"&&ba.getAttributeNode("id").nodeValue===ab[1]?[ba]:M:[]}};L.filter.ID=function(ab,ba){var bb=typeof ab.getAttributeNode!=="undefined"&&ab.getAttributeNode("id");return ab.nodeType===1&&bb&&bb.nodeValue===ba}}Y.removeChild(aa);Y=aa=null})();(function(){var Y=S.createElement("div");Y.appendChild(S.createComment(""));if(Y.getElementsByTagName("*").length>0){L.find.TAG=function(ab,aa){aa=aa.getElementsByTagName(ab[1]);if(ab[1]==="*"){ab=[];for(var Z=0;aa[Z];Z++){aa[Z].nodeType===1&&ab.push(aa[Z])}aa=ab}return aa}}Y.innerHTML="<a href='#'></a>";if(Y.firstChild&&typeof Y.firstChild.getAttribute!=="undefined"&&Y.firstChild.getAttribute("href")!=="#"){L.attrHandle.href=function(Z){return Z.getAttribute("href",2)}}Y=null})();S.querySelectorAll&&function(){var aa=N,Z=S.createElement("div");Z.innerHTML="<p class='TEST'></p>";if(!(Z.querySelectorAll&&Z.querySelectorAll(".TEST").length===0)){N=function(ab,bm,bn,ba){bm=bm||S;if(!ba&&bm.nodeType===9&&!s(bm)){try{return c(bm.querySelectorAll(ab),bn)}catch(bb){}}return aa(ab,bm,bn,ba)};for(var Y in aa){N[Y]=aa[Y]}Z=null}}();(function(){var Y=S.createElement("div");Y.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!Y.getElementsByClassName||Y.getElementsByClassName("e").length===0)){Y.lastChild.className="e";if(Y.getElementsByClassName("e").length!==1){L.order.splice(1,0,"CLASS");L.find.CLASS=function(ab,aa,Z){if(typeof aa.getElementsByClassName!=="undefined"&&!Z){return aa.getElementsByClassName(ab[1])}};Y=null}}})();var A=S.compareDocumentPosition?function(Z,Y){return !!(Z.compareDocumentPosition(Y)&16)}:function(Z,Y){return Z!==Y&&(Z.contains?Z.contains(Y):true)},s=function(Y){return(Y=(Y?Y.ownerDocument||Y:0).documentElement)?Y.nodeName!=="HTML":false},X=function(ab,aa){var Z=[],Y="",ba;for(aa=aa.nodeType?[aa]:aa;ba=L.match.PSEUDO.exec(ab);){Y+=ba[0];ab=ab.replace(L.match.PSEUDO,"")}ab=L.relative[ab]?ab+"*":ab;ba=0;for(var bb=aa.length;ba<bb;ba++){N(ab,aa[ba],Z)}return N.filter(Y,Z)};ai.find=N;ai.expr=N.selectors;ai.expr[":"]=ai.expr.filters;ai.unique=N.uniqueSort;ai.text=W;ai.isXMLDoc=s;ai.contains=A})();var f=/Until$/,bc=/^(?:parents|prevUntil|prevAll)/,aX=/,/;av=Array.prototype.slice;var aM=function(s,c,A){if(ai.isFunction(c)){return ai.grep(s,function(G,F){return !!c.call(G,F,G)===A})}else{if(c.nodeType){return ai.grep(s,function(F){return F===c===A})}else{if(typeof c==="string"){var w=ai.grep(s,function(F){return F.nodeType===1});if(aU.test(c)){return ai.filter(c,w,!A)}else{c=ai.filter(c,w)}}}}return ai.grep(s,function(F){return ai.inArray(F,c)>=0===A})};ai.fn.extend({find:function(s){for(var c=this.pushStack("","find",s),J=0,F=0,G=this.length;F<G;F++){J=c.length;ai.find(s,this[F],c);if(F>0){for(var w=J;w<c.length;w++){for(var A=0;A<J;A++){if(c[A]===c[w]){c.splice(w--,1);break}}}}}return c},has:function(s){var c=ai(s);return this.filter(function(){for(var A=0,w=c.length;A<w;A++){if(ai.contains(this,c[A])){return true}}})},not:function(c){return this.pushStack(aM(this,c,false),"not",c)},filter:function(c){return this.pushStack(aM(this,c,true),"filter",c)},is:function(c){return !!c&&ai.filter(c,this).length>0},closest:function(L,K){if(ai.isArray(L)){var J=[],F=this[0],G,w={},A;if(F&&L.length){G=0;for(var c=L.length;G<c;G++){A=L[G];w[A]||(w[A]=ai.expr.match.POS.test(A)?ai(A,K||this.context):A)}for(;F&&F.ownerDocument&&F!==K;){for(A in w){G=w[A];if(G.jquery?G.index(F)>-1:ai(F).is(G)){J.push({selector:A,elem:F});delete w[A]}}F=F.parentNode}}return J}var s=ai.expr.match.POS.test(L)?ai(L,K||this.context):null;return this.map(function(O,N){for(;N&&N.ownerDocument&&N!==K;){if(s?s.index(N)>-1:ai(N).is(L)){return N}N=N.parentNode}return null})},index:function(c){if(!c||typeof c==="string"){return ai.inArray(this[0],c?ai(c):this.parent().children())}return ai.inArray(c.jquery?c[0]:c,this)},add:function(s,c){s=typeof s==="string"?ai(s,c||this.context):ai.makeArray(s);c=ai.merge(this.get(),s);return this.pushStack(m(s[0])||m(c[0])?c:ai.unique(c))},andSelf:function(){return this.add(this.prevObject)}});ai.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return ai.dir(c,"parentNode")},parentsUntil:function(s,c,w){return ai.dir(s,"parentNode",w)},next:function(c){return ai.nth(c,2,"nextSibling")},prev:function(c){return ai.nth(c,2,"previousSibling")},nextAll:function(c){return ai.dir(c,"nextSibling")},prevAll:function(c){return ai.dir(c,"previousSibling")},nextUntil:function(s,c,w){return ai.dir(s,"nextSibling",w)},prevUntil:function(s,c,w){return ai.dir(s,"previousSibling",w)},siblings:function(c){return ai.sibling(c.parentNode.firstChild,c)},children:function(c){return ai.sibling(c.firstChild)},contents:function(c){return ai.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:ai.makeArray(c.childNodes)}},function(s,c){ai.fn[s]=function(F,w){var A=ai.map(this,c,F);f.test(s)||(w=F);if(w&&typeof w==="string"){A=ai.filter(w,A)}A=this.length>1?ai.unique(A):A;if((this.length>1||aX.test(w))&&bc.test(s)){A=A.reverse()}return this.pushStack(A,s,av.call(arguments).join(","))}});ai.extend({filter:function(s,c,w){if(w){s=":not("+s+")"}return ai.find.matches(s,c)},dir:function(s,c,A){var w=[];for(s=s[c];s&&s.nodeType!==9&&(A===M||s.nodeType!==1||!ai(s).is(A));){s.nodeType===1&&w.push(s);s=s[c]}return w},nth:function(s,c,A){c=c||1;for(var w=0;s;s=s[A]){if(s.nodeType===1&&++w===c){break}}return s},sibling:function(s,c){for(var w=[];s;s=s.nextSibling){s.nodeType===1&&s!==c&&w.push(s)}return w}});var aj=/ jQuery\d+="(?:\d+|null)"/g,at=/^\s+/,C=/(<([\w:]+)[^>]*?)\/>/g,aE=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,n=/<([\w:]+)/,ad=/<tbody/i,v=/<|&#?\w+;/,aQ=/<script|<object|<embed|<option|<style/i,al=/checked\s*(?:[^=]|=\s*.checked.)/i,bl=function(s,c,w){return aE.test(w)?s:c+"></"+w+">"},aK={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aK.optgroup=aK.option;aK.tbody=aK.tfoot=aK.colgroup=aK.caption=aK.thead;aK.th=aK.td;if(!ai.support.htmlSerialize){aK._default=[1,"div<div>","</div>"]}ai.fn.extend({text:function(c){if(ai.isFunction(c)){return this.each(function(s){var w=ai(this);w.text(c.call(this,s,w.text()))})}if(typeof c!=="object"&&c!==M){return this.empty().append((this[0]&&this[0].ownerDocument||S).createTextNode(c))}return ai.text(this)},wrapAll:function(s){if(ai.isFunction(s)){return this.each(function(w){ai(this).wrapAll(s.call(this,w))})}if(this[0]){var c=ai(s,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var w=this;w.firstChild&&w.firstChild.nodeType===1;){w=w.firstChild}return w}).append(this)}return this},wrapInner:function(c){if(ai.isFunction(c)){return this.each(function(s){ai(this).wrapInner(c.call(this,s))})}return this.each(function(){var s=ai(this),w=s.contents();w.length?w.wrapAll(c):s.append(c)})},wrap:function(c){return this.each(function(){ai(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){ai.nodeName(this,"body")||ai(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(s){this.parentNode.insertBefore(s,this)})}else{if(arguments.length){var c=ai(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(s){this.parentNode.insertBefore(s,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,ai(arguments[0]).toArray());return c}}},remove:function(s,c){for(var A=0,w;(w=this[A])!=null;A++){if(!s||ai.filter(s,[w]).length){if(!c&&w.nodeType===1){ai.cleanData(w.getElementsByTagName("*"));ai.cleanData([w])}w.parentNode&&w.parentNode.removeChild(w)}}return this},empty:function(){for(var s=0,c;(c=this[s])!=null;s++){for(c.nodeType===1&&ai.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(s){var c=this.map(function(){if(!ai.support.noCloneEvent&&!ai.isXMLDoc(this)){var A=this.outerHTML,w=this.ownerDocument;if(!A){A=w.createElement("div");A.appendChild(this.cloneNode(true));A=A.innerHTML}return ai.clean([A.replace(aj,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(at,"")],w)[0]}else{return this.cloneNode(true)}});if(s===true){bk(this,c);bk(this.find("*"),c.find("*"))}return c},html:function(s){if(s===M){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aj,""):null}else{if(typeof s==="string"&&!aQ.test(s)&&(ai.support.leadingWhitespace||!at.test(s))&&!aK[(n.exec(s)||["",""])[1].toLowerCase()]){s=s.replace(C,bl);try{for(var c=0,A=this.length;c<A;c++){if(this[c].nodeType===1){ai.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=s}}}catch(w){this.empty().append(s)}}else{ai.isFunction(s)?this.each(function(J){var F=ai(this),G=F.html();F.empty().append(function(){return s.call(this,J,G)})}):this.empty().append(s)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(ai.isFunction(c)){return this.each(function(s){var A=ai(this),w=A.html();A.replaceWith(c.call(this,s,w))})}if(typeof c!=="string"){c=ai(c).detach()}return this.each(function(){var s=this.nextSibling,w=this.parentNode;ai(this).remove();s?ai(s).before(c):ai(w).append(c)})}else{return this.pushStack(ai(ai.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(O,N,L){function J(P){return ai.nodeName(P,"table")?P.getElementsByTagName("tbody")[0]||P.appendChild(P.ownerDocument.createElement("tbody")):P}var K,F,G=O[0],s=[],A;if(!ai.support.checkClone&&arguments.length===3&&typeof G==="string"&&al.test(G)){return this.each(function(){ai(this).domManip(O,N,L,true)})}if(ai.isFunction(G)){return this.each(function(P){var Q=ai(this);O[0]=G.call(this,P,N?Q.html():M);Q.domManip(O,N,L)})}if(this[0]){K=G&&G.parentNode;K=ai.support.parentNode&&K&&K.nodeType===11&&K.childNodes.length===this.length?{fragment:K}:a4(O,this,s);A=K.fragment;if(F=A.childNodes.length===1?(A=A.firstChild):A.firstChild){N=N&&ai.nodeName(F,"tr");for(var w=0,c=this.length;w<c;w++){L.call(N?J(this[w],F):this[w],w>0||K.cacheable||this.length>1?A.cloneNode(true):A)}}s.length&&ai.each(s,H)}return this}});ai.fragments={};ai.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,c){ai.fn[s]=function(J){var F=[];J=ai(J);var G=this.length===1&&this[0].parentNode;if(G&&G.nodeType===11&&G.childNodes.length===1&&J.length===1){J[c](this[0]);return this}else{G=0;for(var w=J.length;G<w;G++){var A=(G>0?this.clone(true):this).get();ai.fn[c].apply(ai(J[G]),A);F=F.concat(A)}return this.pushStack(F,s,J.selector)}}});ai.extend({clean:function(O,N,L,J){N=N||S;if(typeof N.createElement==="undefined"){N=N.ownerDocument||N[0]&&N[0].ownerDocument||S}for(var K=[],F=0,G;(G=O[F])!=null;F++){if(typeof G==="number"){G+=""}if(G){if(typeof G==="string"&&!v.test(G)){G=N.createTextNode(G)}else{if(typeof G==="string"){G=G.replace(C,bl);var s=(n.exec(G)||["",""])[1].toLowerCase(),A=aK[s]||aK._default,w=A[0],c=N.createElement("div");for(c.innerHTML=A[1]+G+A[2];w--;){c=c.lastChild}if(!ai.support.tbody){w=ad.test(G);s=s==="table"&&!w?c.firstChild&&c.firstChild.childNodes:A[1]==="<table>"&&!w?c.childNodes:[];for(A=s.length-1;A>=0;--A){ai.nodeName(s[A],"tbody")&&!s[A].childNodes.length&&s[A].parentNode.removeChild(s[A])}}!ai.support.leadingWhitespace&&at.test(G)&&c.insertBefore(N.createTextNode(at.exec(G)[0]),c.firstChild);G=c.childNodes}}if(G.nodeType){K.push(G)}else{K=ai.merge(K,G)}}}if(L){for(F=0;K[F];F++){if(J&&ai.nodeName(K[F],"script")&&(!K[F].type||K[F].type.toLowerCase()==="text/javascript")){J.push(K[F].parentNode?K[F].parentNode.removeChild(K[F]):K[F])}else{K[F].nodeType===1&&K.splice.apply(K,[F+1,0].concat(ai.makeArray(K[F].getElementsByTagName("script"))));L.appendChild(K[F])}}}return K},cleanData:function(L){for(var K,J,F=ai.cache,G=ai.event.special,w=ai.support.deleteExpando,A=0,c;(c=L[A])!=null;A++){if(J=c[ai.expando]){K=F[J];if(K.events){for(var s in K.events){G[s]?ai.event.remove(c,s):aH(c,s,K.handle)}}if(w){delete c[ai.expando]}else{c.removeAttribute&&c.removeAttribute(ai.expando)}delete F[J]}}}});var h=/z-?index|font-?weight|opacity|zoom|line-?height/i,a5=/alpha\([^)]*\)/,aR=/opacity=([^)]*)/,aF=/float/i,ae=/-([a-z])/ig,bg=/([A-Z])/g,a0=/^-?\d+(?:px)?$/i,aJ=/^-?\d/,ag={position:"absolute",visibility:"hidden",display:"block"},z=["Left","Right"],l=["Top","Bottom"],bj=S.defaultView&&S.defaultView.getComputedStyle,am=ai.support.cssFloat?"cssFloat":"styleFloat",x=function(s,c){return c.toUpperCase()};ai.fn.css=function(s,c){return aq(this,s,c,true,function(F,w,A){if(A===M){return ai.curCSS(F,w)}if(typeof A==="number"&&!h.test(w)){A+="px"}ai.style(F,w,A)})};ai.extend({style:function(s,c,F){if(!s||s.nodeType===3||s.nodeType===8){return M}if((c==="width"||c==="height")&&parseFloat(F)<0){F=M}var w=s.style||s,A=F!==M;if(!ai.support.opacity&&c==="opacity"){if(A){w.zoom=1;c=parseInt(F,10)+""==="NaN"?"":"alpha(opacity="+F*100+")";s=w.filter||ai.curCSS(s,"filter")||"";w.filter=a5.test(s)?s.replace(a5,c):c}return w.filter&&w.filter.indexOf("opacity=")>=0?parseFloat(aR.exec(w.filter)[1])/100+"":""}if(aF.test(c)){c=am}c=c.replace(ae,x);if(A){w[c]=F}return w[c]},css:function(s,c,J,F){if(c==="width"||c==="height"){var G,w=c==="width"?z:l;function A(){G=c==="width"?s.offsetWidth:s.offsetHeight;F!=="border"&&ai.each(w,function(){F||(G-=parseFloat(ai.curCSS(s,"padding"+this,true))||0);if(F==="margin"){G+=parseFloat(ai.curCSS(s,"margin"+this,true))||0}else{G-=parseFloat(ai.curCSS(s,"border"+this+"Width",true))||0}})}s.offsetWidth!==0?A():ai.swap(s,ag,A);return Math.max(0,Math.round(G))}return ai.curCSS(s,c,J)},curCSS:function(s,c,G){var A,F=s.style;if(!ai.support.opacity&&c==="opacity"&&s.currentStyle){A=aR.test(s.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return A===""?"1":A}if(aF.test(c)){c=am}if(!G&&F&&F[c]){A=F[c]}else{if(bj){if(aF.test(c)){c="float"}c=c.replace(bg,"-$1").toLowerCase();F=s.ownerDocument.defaultView;if(!F){return null}if(s=F.getComputedStyle(s,null)){A=s.getPropertyValue(c)}if(c==="opacity"&&A===""){A="1"}}else{if(s.currentStyle){G=c.replace(ae,x);A=s.currentStyle[c]||s.currentStyle[G];if(!a0.test(A)&&aJ.test(A)){c=F.left;var w=s.runtimeStyle.left;s.runtimeStyle.left=s.currentStyle.left;F.left=G==="fontSize"?"1em":A||0;A=F.pixelLeft+"px";F.left=c;s.runtimeStyle.left=w}}}}return A},swap:function(s,c,F){var w={};for(var A in c){w[A]=s.style[A];s.style[A]=c[A]}F.call(s);for(A in c){s.style[A]=w[A]}}});if(ai.expr&&ai.expr.filters){ai.expr.filters.hidden=function(s){var c=s.offsetWidth,A=s.offsetHeight,w=s.nodeName.toLowerCase()==="tr";return c===0&&A===0&&!w?true:c>0&&A>0&&!w?false:ai.curCSS(s,"display")==="none"};ai.expr.filters.visible=function(c){return !ai.expr.filters.hidden(c)}}var a3=aG(),aO=/<script(.|\s)*?\/script>/gi,ak=/select|textarea/i,D=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,aB=/=\?(&|$)/,j=/\?/,o=/(\?|&)_=.*?(&|$)/,a=/^(\w+:)?\/\/([^\/?#]+)/,a6=/%20/g,aS=ai.fn.load;ai.fn.extend({load:function(s,c,G){if(typeof s!=="string"){return aS.call(this,s)}else{if(!this.length){return this}}var A=s.indexOf(" ");if(A>=0){var F=s.slice(A,s.length);s=s.slice(0,A)}A="GET";if(c){if(ai.isFunction(c)){G=c;c=null}else{if(typeof c==="object"){c=ai.param(c,ai.ajaxSettings.traditional);A="POST"}}}var w=this;ai.ajax({url:s,type:A,dataType:"html",data:c,complete:function(J,K){if(K==="success"||K==="notmodified"){w.html(F?ai("<div />").append(J.responseText.replace(aO,"")).find(F):J.responseText)}G&&w.each(G,[J.responseText,K,J])}});return this},serialize:function(){return ai.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ai.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ak.test(this.nodeName)||D.test(this.type))}).map(function(s,c){s=ai(this).val();return s==null?null:ai.isArray(s)?ai.map(s,function(w){return{name:c.name,value:w}}):{name:c.name,value:s}}).get()}});ai.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(s,c){ai.fn[c]=function(w){return this.bind(c,w)}});ai.extend({get:function(s,c,A,w){if(ai.isFunction(c)){w=w||A;A=c;c=null}return ai.ajax({type:"GET",url:s,data:c,success:A,dataType:w})},getScript:function(s,c){return ai.get(s,null,c,"script")},getJSON:function(s,c,w){return ai.get(s,c,w,"json")},post:function(s,c,A,w){if(ai.isFunction(c)){w=w||A;A=c;c={}}return ai.ajax({type:"POST",url:s,data:c,success:A,dataType:w})},ajaxSetup:function(c){ai.extend(ai.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:aP.XMLHttpRequest&&(aP.location.protocol!=="file:"||!aP.ActiveXObject)?function(){return new aP.XMLHttpRequest}:function(){try{return new aP.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(aa){function Z(){X.success&&X.success.call(P,K,R,s);X.global&&W("ajaxSuccess",[s,X])}function Y(){X.complete&&X.complete.call(P,s,R);X.global&&W("ajaxComplete",[s,X]);X.global&&!--ai.active&&ai.event.trigger("ajaxStop")}function W(ba,bb){(X.context?ai(X.context):ai.event).trigger(ba,bb)}var X=ai.extend(true,{},ai.ajaxSettings,aa),Q,R,K,P=aa&&aa.context||X,L=X.type.toUpperCase();if(X.data&&X.processData&&typeof X.data!=="string"){X.data=ai.param(X.data,X.traditional)}if(X.dataType==="jsonp"){if(L==="GET"){aB.test(X.url)||(X.url+=(j.test(X.url)?"&":"?")+(X.jsonp||"callback")+"=?")}else{if(!X.data||!aB.test(X.data)){X.data=(X.data?X.data+"&":"")+(X.jsonp||"callback")+"=?"}}X.dataType="json"}if(X.dataType==="json"&&(X.data&&aB.test(X.data)||aB.test(X.url))){Q=X.jsonpCallback||"jsonp"+a3++;if(X.data){X.data=(X.data+"").replace(aB,"="+Q+"$1")}X.url=X.url.replace(aB,"="+Q+"$1");X.dataType="script";aP[Q]=aP[Q]||function(ba){K=ba;Z();Y();aP[Q]=M;try{delete aP[Q]}catch(bb){}c&&c.removeChild(F)}}if(X.dataType==="script"&&X.cache===null){X.cache=false}if(X.cache===false&&L==="GET"){var G=aG(),w=X.url.replace(o,"$1_="+G+"$2");X.url=w+(w===X.url?(j.test(X.url)?"&":"?")+"_="+G:"")}if(X.data&&L==="GET"){X.url+=(j.test(X.url)?"&":"?")+X.data}X.global&&!ai.active++&&ai.event.trigger("ajaxStart");G=(G=a.exec(X.url))&&(G[1]&&G[1]!==location.protocol||G[2]!==location.host);if(X.dataType==="script"&&L==="GET"&&G){var c=S.getElementsByTagName("head")[0]||S.documentElement,F=S.createElement("script");F.src=X.url;if(X.scriptCharset){F.charset=X.scriptCharset}if(!Q){var J=false;F.onload=F.onreadystatechange=function(){if(!J&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){J=true;Z();Y();F.onload=F.onreadystatechange=null;c&&F.parentNode&&c.removeChild(F)}}}c.insertBefore(F,c.firstChild);return M}var A=false,s=X.xhr();if(s){X.username?s.open(L,X.url,X.async,X.username,X.password):s.open(L,X.url,X.async);try{if(X.data||aa&&aa.contentType){s.setRequestHeader("Content-Type",X.contentType)}if(X.ifModified){ai.lastModified[X.url]&&s.setRequestHeader("If-Modified-Since",ai.lastModified[X.url]);ai.etag[X.url]&&s.setRequestHeader("If-None-Match",ai.etag[X.url])}G||s.setRequestHeader("X-Requested-With","XMLHttpRequest");s.setRequestHeader("Accept",X.dataType&&X.accepts[X.dataType]?X.accepts[X.dataType]+", */*":X.accepts._default)}catch(ab){}if(X.beforeSend&&X.beforeSend.call(P,s,X)===false){X.global&&!--ai.active&&ai.event.trigger("ajaxStop");s.abort();return false}X.global&&W("ajaxSend",[s,X]);var V=s.onreadystatechange=function(bb){if(!s||s.readyState===0||bb==="abort"){A||Y();A=true;if(s){s.onreadystatechange=ai.noop}}else{if(!A&&s&&(s.readyState===4||bb==="timeout")){A=true;s.onreadystatechange=ai.noop;R=bb==="timeout"?"timeout":!ai.httpSuccess(s)?"error":X.ifModified&&ai.httpNotModified(s,X.url)?"notmodified":"success";var bm;if(R==="success"){try{K=ai.httpData(s,X.dataType,X)}catch(ba){R="parsererror";bm=ba}}if(R==="success"||R==="notmodified"){Q||Z()}else{ai.handleError(X,s,R,bm)}Y();bb==="timeout"&&s.abort();if(X.async){s=null}}}};try{var T=s.abort;s.abort=function(){s&&T.call(s);V("abort")}}catch(O){}X.async&&X.timeout>0&&setTimeout(function(){s&&!A&&V("timeout")},X.timeout);try{s.send(L==="POST"||L==="PUT"||L==="DELETE"?X.data:null)}catch(N){ai.handleError(X,s,null,N);Y()}X.async||V();return s}},handleError:function(s,c,A,w){if(s.error){s.error.call(s.context||s,c,A,w)}if(s.global){(s.context?ai(s.context):ai.event).trigger("ajaxError",[c,s,w])}},active:0,httpSuccess:function(s){try{return !s.status&&location.protocol==="file:"||s.status>=200&&s.status<300||s.status===304||s.status===1223||s.status===0}catch(c){}return false},httpNotModified:function(s,c){var A=s.getResponseHeader("Last-Modified"),w=s.getResponseHeader("Etag");if(A){ai.lastModified[c]=A}if(w){ai.etag[c]=w}return s.status===304||s.status===0},httpData:function(s,c,F){var w=s.getResponseHeader("content-type")||"",A=c==="xml"||!c&&w.indexOf("xml")>=0;s=A?s.responseXML:s.responseText;A&&s.documentElement.nodeName==="parsererror"&&ai.error("parsererror");if(F&&F.dataFilter){s=F.dataFilter(s,c)}if(typeof s==="string"){if(c==="json"||!c&&w.indexOf("json")>=0){s=ai.parseJSON(s)}else{if(c==="script"||!c&&w.indexOf("javascript")>=0){ai.globalEval(s)}}}return s},param:function(s,c){function G(J,K){if(ai.isArray(K)){ai.each(K,function(L,N){c||/\[\]$/.test(J)?A(J,N):G(J+"["+(typeof N==="object"||ai.isArray(N)?L:"")+"]",N)})}else{!c&&K!=null&&typeof K==="object"?ai.each(K,function(L,N){G(J+"["+L+"]",N)}):A(J,K)}}function A(J,K){K=ai.isFunction(K)?K():K;F[F.length]=encodeURIComponent(J)+"="+encodeURIComponent(K)}var F=[];if(c===M){c=ai.ajaxSettings.traditional}if(ai.isArray(s)||s.jquery){ai.each(s,function(){A(this.name,this.value)})}else{for(var w in s){G(w,s[w])}}return F.join("&").replace(a6,"+")}});var bh={},bd=/toggle|show|hide/,aY=/^([+-]=)?([\d+-.]+)(.*)$/,ar,E=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];ai.fn.extend({show:function(s,c){if(s||s===0){return this.animate(aD("show",3),s,c)}else{s=0;for(c=this.length;s<c;s++){var F=ai.data(this[s],"olddisplay");this[s].style.display=F||"";if(ai.css(this[s],"display")==="none"){F=this[s].nodeName;var w;if(bh[F]){w=bh[F]}else{var A=ai("<"+F+" />").appendTo("body");w=A.css("display");if(w==="none"){w="block"}A.remove();bh[F]=w}ai.data(this[s],"olddisplay",w)}}s=0;for(c=this.length;s<c;s++){this[s].style.display=ai.data(this[s],"olddisplay")||""}return this}},hide:function(s,c){if(s||s===0){return this.animate(aD("hide",3),s,c)}else{s=0;for(c=this.length;s<c;s++){var w=ai.data(this[s],"olddisplay");!w&&w!=="none"&&ai.data(this[s],"olddisplay",ai.css(this[s],"display"))}s=0;for(c=this.length;s<c;s++){this[s].style.display="none"}return this}},_toggle:ai.fn.toggle,toggle:function(s,c){var w=typeof s==="boolean";if(ai.isFunction(s)&&ai.isFunction(c)){this._toggle.apply(this,arguments)}else{s==null||w?this.each(function(){var A=w?s:ai(this).is(":hidden");ai(this)[A?"show":"hide"]()}):this.animate(aD("toggle",3),s,c)}return this},fadeTo:function(s,c,w){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},s,w)},animate:function(s,c,F,w){var A=ai.speed(c,F,w);if(ai.isEmptyObject(s)){return this.each(A.complete)}return this[A.queue===false?"each":"queue"](function(){var J=ai.extend({},A),K,L=this.nodeType===1&&ai(this).is(":hidden"),G=this;for(K in s){var N=K.replace(ae,x);if(K!==N){s[N]=s[K];delete s[K];K=N}if(s[K]==="hide"&&L||s[K]==="show"&&!L){return J.complete.call(this)}if((K==="height"||K==="width")&&this.style){J.display=ai.css(this,"display");J.overflow=this.style.overflow}if(ai.isArray(s[K])){(J.specialEasing=J.specialEasing||{})[K]=s[K][1];s[K]=s[K][0]}}if(J.overflow!=null){this.style.overflow="hidden"}J.curAnim=ai.extend({},s);ai.each(s,function(P,O){var T=new ai.fx(G,J,P);if(bd.test(O)){T[O==="toggle"?L?"show":"hide":O](s)}else{var R=aY.exec(O),V=T.cur(true)||0;if(R){O=parseFloat(R[2]);var Q=R[3]||"px";if(Q!=="px"){G.style[P]=(O||1)+Q;V=(O||1)/T.cur(true)*V;G.style[P]=V+Q}if(R[1]){O=(R[1]==="-="?-1:1)*O+V}T.custom(V,O,Q)}else{T.custom(V,O,"")}}});return true})},stop:function(s,c){var w=ai.timers;s&&this.queue([]);this.each(function(){for(var A=w.length-1;A>=0;A--){if(w[A].elem===this){c&&w[A](true);w.splice(A,1)}}});c||this.dequeue();return this}});ai.each({slideDown:aD("show",1),slideUp:aD("hide",1),slideToggle:aD("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(s,c){ai.fn[s]=function(A,w){return this.animate(c,A,w)}});ai.extend({speed:function(s,c,A){var w=s&&typeof s==="object"?s:{complete:A||!A&&c||ai.isFunction(s)&&s,duration:s,easing:A&&c||c&&!ai.isFunction(c)&&c};w.duration=ai.fx.off?0:typeof w.duration==="number"?w.duration:ai.fx.speeds[w.duration]||ai.fx.speeds._default;w.old=w.complete;w.complete=function(){w.queue!==false&&ai(this).dequeue();ai.isFunction(w.old)&&w.old.call(this)};return w},easing:{linear:function(s,c,A,w){return A+w*s},swing:function(s,c,A,w){return(-Math.cos(s*Math.PI)/2+0.5)*w+A}},timers:[],fx:function(s,c,w){this.options=c;this.elem=s;this.prop=w;if(!c.orig){c.orig={}}}});ai.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(ai.fx.step[this.prop]||ai.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(c){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}return(c=parseFloat(ai.css(this.elem,this.prop,c)))&&c>-10000?c:parseFloat(ai.curCSS(this.elem,this.prop))||0},custom:function(s,c,F){function w(G){return A.step(G)}this.startTime=aG();this.start=s;this.end=c;this.unit=F||this.unit||"px";this.now=this.start;this.pos=this.state=0;var A=this;w.elem=this.elem;if(w()&&ai.timers.push(w)&&!ar){ar=setInterval(ai.fx.tick,13)}},show:function(){this.options.orig[this.prop]=ai.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());ai(this.elem).show()},hide:function(){this.options.orig[this.prop]=ai.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(s){var c=aG(),F=true;if(s||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var w in this.options.curAnim){if(this.options.curAnim[w]!==true){F=false}}if(F){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;s=ai.data(this.elem,"olddisplay");this.elem.style.display=s?s:this.options.display;if(ai.css(this.elem,"display")==="none"){this.elem.style.display="block"}}this.options.hide&&ai(this.elem).hide();if(this.options.hide||this.options.show){for(var A in this.options.curAnim){ai.style(this.elem,A,this.options.orig[A])}}this.options.complete.call(this.elem)}return false}else{A=c-this.startTime;this.state=A/this.options.duration;s=this.options.easing||(ai.easing.swing?"swing":"linear");this.pos=ai.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||s](this.state,A,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};ai.extend(ai.fx,{tick:function(){for(var s=ai.timers,c=0;c<s.length;c++){s[c]()||s.splice(c--,1)}s.length||ai.fx.stop()},stop:function(){clearInterval(ar);ar=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){ai.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(ai.expr&&ai.expr.filters){ai.expr.filters.animated=function(c){return ai.grep(ai.timers,function(s){return c===s.elem}).length}}ai.fn.offset="getBoundingClientRect" in S.documentElement?function(s){var c=this[0];if(s){return this.each(function(F){ai.offset.setOffset(this,s,F)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return ai.offset.bodyOffset(c)}var A=c.getBoundingClientRect(),w=c.ownerDocument;c=w.body;w=w.documentElement;return{top:A.top+(self.pageYOffset||ai.support.boxModel&&w.scrollTop||c.scrollTop)-(w.clientTop||c.clientTop||0),left:A.left+(self.pageXOffset||ai.support.boxModel&&w.scrollLeft||c.scrollLeft)-(w.clientLeft||c.clientLeft||0)}}:function(N){var L=this[0];if(N){return this.each(function(O){ai.offset.setOffset(this,N,O)})}if(!L||!L.ownerDocument){return null}if(L===L.ownerDocument.body){return ai.offset.bodyOffset(L)}ai.offset.initialize();var K=L.offsetParent,G=L,J=L.ownerDocument,A,F=J.documentElement,c=J.body;G=(J=J.defaultView)?J.getComputedStyle(L,null):L.currentStyle;for(var w=L.offsetTop,s=L.offsetLeft;(L=L.parentNode)&&L!==c&&L!==F;){if(ai.offset.supportsFixedPosition&&G.position==="fixed"){break}A=J?J.getComputedStyle(L,null):L.currentStyle;w-=L.scrollTop;s-=L.scrollLeft;if(L===K){w+=L.offsetTop;s+=L.offsetLeft;if(ai.offset.doesNotAddBorder&&!(ai.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(L.nodeName))){w+=parseFloat(A.borderTopWidth)||0;s+=parseFloat(A.borderLeftWidth)||0}G=K;K=L.offsetParent}if(ai.offset.subtractsBorderForOverflowNotVisible&&A.overflow!=="visible"){w+=parseFloat(A.borderTopWidth)||0;s+=parseFloat(A.borderLeftWidth)||0}G=A}if(G.position==="relative"||G.position==="static"){w+=c.offsetTop;s+=c.offsetLeft}if(ai.offset.supportsFixedPosition&&G.position==="fixed"){w+=Math.max(F.scrollTop,c.scrollTop);s+=Math.max(F.scrollLeft,c.scrollLeft)}return{top:w,left:s}};ai.offset={initialize:function(){var s=S.body,c=S.createElement("div"),G,A,F,w=parseFloat(ai.curCSS(s,"marginTop",true))||0;ai.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";s.insertBefore(c,s.firstChild);G=c.firstChild;A=G.firstChild;F=G.nextSibling.firstChild.firstChild;this.doesNotAddBorder=A.offsetTop!==5;this.doesAddBorderForTableAndCells=F.offsetTop===5;A.style.position="fixed";A.style.top="20px";this.supportsFixedPosition=A.offsetTop===20||A.offsetTop===15;A.style.position=A.style.top="";G.style.overflow="hidden";G.style.position="relative";this.subtractsBorderForOverflowNotVisible=A.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=s.offsetTop!==w;s.removeChild(c);ai.offset.initialize=ai.noop},bodyOffset:function(s){var c=s.offsetTop,w=s.offsetLeft;ai.offset.initialize();if(ai.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(ai.curCSS(s,"marginTop",true))||0;w+=parseFloat(ai.curCSS(s,"marginLeft",true))||0}return{top:c,left:w}},setOffset:function(s,c,J){if(/static/.test(ai.curCSS(s,"position"))){s.style.position="relative"}var F=ai(s),G=F.offset(),w=parseInt(ai.curCSS(s,"top",true),10)||0,A=parseInt(ai.curCSS(s,"left",true),10)||0;if(ai.isFunction(c)){c=c.call(s,J,G)}J={top:c.top-G.top+w,left:c.left-G.left+A};"using" in c?c.using.call(s,J):F.css(J)}};ai.fn.extend({position:function(){if(!this[0]){return null}var s=this[0],c=this.offsetParent(),A=this.offset(),w=/^body|html$/i.test(c[0].nodeName)?{top:0,left:0}:c.offset();A.top-=parseFloat(ai.curCSS(s,"marginTop",true))||0;A.left-=parseFloat(ai.curCSS(s,"marginLeft",true))||0;w.top+=parseFloat(ai.curCSS(c[0],"borderTopWidth",true))||0;w.left+=parseFloat(ai.curCSS(c[0],"borderLeftWidth",true))||0;return{top:A.top-w.top,left:A.left-w.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||S.body;c&&!/^body|html$/i.test(c.nodeName)&&ai.css(c,"position")==="static";){c=c.offsetParent}return c})}});ai.each(["Left","Top"],function(s,c){var w="scroll"+c;ai.fn[w]=function(F){var G=this[0],A;if(!G){return null}if(F!==M){return this.each(function(){if(A=p(this)){A.scrollTo(!s?F:ai(A).scrollLeft(),s?F:ai(A).scrollTop())}else{this[w]=F}})}else{return(A=p(G))?"pageXOffset" in A?A[s?"pageYOffset":"pageXOffset"]:ai.support.boxModel&&A.document.documentElement[w]||A.document.body[w]:G[w]}}});ai.each(["Height","Width"],function(s,c){var w=c.toLowerCase();ai.fn["inner"+c]=function(){return this[0]?ai.css(this[0],w,false,"padding"):null};ai.fn["outer"+c]=function(A){return this[0]?ai.css(this[0],w,false,A?"margin":"border"):null};ai.fn[w]=function(A){var F=this[0];if(!F){return A==null?null:this}if(ai.isFunction(A)){return this.each(function(G){var J=ai(this);J[w](A.call(this,G,J[w]()))})}return"scrollTo" in F&&F.document?F.document.compatMode==="CSS1Compat"&&F.document.documentElement["client"+c]||F.document.body["client"+c]:F.nodeType===9?Math.max(F.documentElement["client"+c],F.body["scroll"+c],F.documentElement["scroll"+c],F.body["offset"+c],F.documentElement["offset"+c]):A===M?ai.css(F,w):this.css(w,typeof A==="string"?A:A+"px")}});aP.jQuery=aP.$=ai})(window);(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();var tabListActiveRideId;var tabListActiveRefreshTimer;var updateCountRefreshTimer;var ridePlan;var rideRequests=[];var ridePlans=[];var rides=[];var unratedRidePlans=[];var submitted_rides=[];var parseOffer;var parseSearch;var parseUnmatchedOffer;var parseUnmatchedSearch;var user;var pass;var regStatus=0;var DimitrisLocal="localhost:3000";var DimitrisRemote="168.144.202.152:3000";var DimitrisRemotePrefix="http://";var PeerMenager="168.144.202.152:3002";var PeerManagerPrefix="http://";var usermode=0;var username="";var password="";var DRIVERMODE=0;var RIDERMODE=1;var offerAccessCounter=0;function slidingUITabListClick(a){clearInterval(tabListActiveRefreshTimer);var b=$(a).next(".slide_0");$(a).toggleClass("active");$(a).removeClass("previous");if($(".previous").is(".active")){$(".previous").next(".slide_0").slideToggle("slow");$(".previous").toggleClass("active");$(".previous").removeClass("previous")}if($(a).is(".active")){$(a).addClass("previous");fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches(a.id,b);tabListActiveRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('"+a.id+"', false)",15000);tabListActiveRideId=a.id;b.slideToggle("slow",function(){heightWindowDiffBottom=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop()+$("#"+tabListActiveRideId).parent().height()-window.innerHeight;heightWindowDiffTop=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop();scrollDiff=0;if(heightWindowDiffTop<0){scrollDiff=heightWindowDiffTop}else{if(heightWindowDiffBottom>0){scrollDiff=heightWindowDiffBottom}}scrollTop=0;if($("html,body").scrollTop()+scrollDiff>$("#"+tabListActiveRideId).offset().top){scrollTop=$("#"+tabListActiveRideId).offset().top}else{scrollTop=$("html,body").scrollTop()+scrollDiff}if(scrollDiff!=0){$("html,body").animate({scrollTop:scrollTop},"slow")}})}else{b.slideToggle("slow")}return false}function slidingUIComplTripsTabListClick(a){clearInterval(tabListActiveRefreshTimer);var b=$(a).next(".slide_0");$(a).toggleClass("active");$(a).removeClass("previous");if($(".previous").is(".active")){$(".previous").next(".slide_0").slideToggle("slow");$(".previous").toggleClass("active");$(".previous").removeClass("previous")}if($(a).is(".active")){$(a).addClass("previous");fokus.openride.mobclient.controller.modules.modulemanager.receiveInactiveMatches(a.id,b);tabListActiveRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('"+a.id+"', false)",20000);tabListActiveRideId=a.id;b.slideToggle("slow",function(){heightWindowDiffBottom=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop()+$("#"+tabListActiveRideId).parent().height()-window.innerHeight;heightWindowDiffTop=$("#"+tabListActiveRideId).offset().top-$("html,body").scrollTop();scrollDiff=0;if(heightWindowDiffTop<0){scrollDiff=heightWindowDiffTop}else{if(heightWindowDiffBottom>0){scrollDiff=heightWindowDiffBottom}}if(scrollDiff!=0){$("html,body").animate({scrollTop:$("html,body").scrollTop()+scrollDiff},"slow")}})}else{b.slideToggle("slow")}return false}function setupUITabList(){$(".linkslide_0").click(function(){slidingUITabListClick(this)})}function setupCompletedTripUITabList(){$(".linkslide_0").click(function(){slidingUIComplTripsTabListClick(this)})}function StringBuilder(a){this.strings=new Array("");this.append(a)}StringBuilder.prototype.append=function(a){if(a){this.strings.push(a)}};StringBuilder.prototype.clear=function(){this.strings.length=1};StringBuilder.prototype.toString=function(){return this.strings.join("")};(function(d){d.keyCode={BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38};var b=d.fn.remove;var c=d.browser.mozilla&&(parseFloat(d.browser.version)<1.9);d.ui={version:"@VERSION",plugin:{add:function(f,g,j){var h=d.ui[f].prototype;for(var e in j){h.plugins[e]=h.plugins[e]||[];h.plugins[e].push([g,j[e]])}},call:function(e,g,f){var j=e.plugins[g];if(!j){return}for(var h=0;h<j.length;h++){if(e.options[j[h][0]]){j[h][1].apply(e.element,f)}}}},cssCache:{},css:function(f){if(d.ui.cssCache[f]){return d.ui.cssCache[f]}var g=d('<div class="ui-gen">').addClass(f).css({position:"absolute",top:"-5000px",left:"-5000px",display:"block"}).appendTo("body");d.ui.cssCache[f]=!!((!(/auto|default/).test(g.css("cursor"))||(/^[1-9]/).test(g.css("height"))||(/^[1-9]/).test(g.css("width"))||!(/none/).test(g.css("backgroundImage"))||!(/transparent|rgba\(0, 0, 0, 0\)/).test(g.css("backgroundColor"))));try{d("body").get(0).removeChild(g.get(0))}catch(h){}return d.ui.cssCache[f]},hasScroll:function(j,g){if(d(j).css("overflow")=="hidden"){return false}var f=(g&&g=="left")?"scrollLeft":"scrollTop",h=false;if(j[f]>0){return true}j[f]=1;h=(j[f]>0);j[f]=0;return h}};d.fn.extend({remove:function(){d("*",this).add(this).each(function(){d(this).triggerHandler("remove")});return b.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},ariaRole:function(e){return(e!==undefined?this.attr("role",c?"wairole:"+e:e):(this.attr("role")||"").replace(/^wairole:/,""))},ariaState:function(f,e){return(e!==undefined?this.each(function(g,h){(c?h.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+f,e):d(h).attr("aria-"+f,e))}):this.attr(c?"aaa:"+f:"aria-"+f))}});d.extend(d.expr[":"],{data:function(f,g,e){return d.data(f,e[3])},tabbable:function(g,h,f){var j=g.nodeName.toLowerCase();var e=function(k){function m(n){var o=n.style;return(o.display!="none"&&o.visibility!="hidden")}var l=m(k);(l&&d.each(d.dir(k,"parentNode"),function(){return(l=m(this))}));return l};return(g.tabIndex>=0&&(("a"==j&&g.href)||(/input|select|textarea|button/.test(j)&&"hidden"!=g.type&&!g.disabled))&&e(g))}});function a(h,j,k,g){function f(m){var l=d[h][j][m]||[];return(typeof l=="string"?l.split(/,?\s+/):l)}var e=f("getter");if(g.length==1&&typeof g[0]=="string"){e=e.concat(f("getterSetter"))}return(d.inArray(k,e)!=-1)}d.widget=function(f,e){var g=f.split(".")[0];f=f.split(".")[1];d.fn[f]=function(l){var j=(typeof l=="string"),k=Array.prototype.slice.call(arguments,1);if(j&&l.substring(0,1)=="_"){return this}if(j&&a(g,f,l,k)){var h=d.data(this[0],f);return(h?h[l].apply(h,k):undefined)}return this.each(function(){var m=d.data(this,f);(!m&&!j&&d.data(this,f,new d[g][f](this,l)));(m&&j&&d.isFunction(m[l])&&m[l].apply(m,k))})};d[g]=d[g]||{};d[g][f]=function(k,j){var h=this;this.widgetName=f;this.widgetEventPrefix=d[g][f].eventPrefix||f;this.widgetBaseClass=g+"-"+f;this.options=d.extend({},d.widget.defaults,d[g][f].defaults,d.metadata&&d.metadata.get(k)[f],j);this.element=d(k).bind("setData."+f,function(n,l,m){return h._setData(l,m)}).bind("getData."+f,function(m,l){return h._getData(l)}).bind("remove",function(){return h.destroy()});this._init()};d[g][f].prototype=d.extend({},d.widget.prototype,e);d[g][f].getterSetter="option"};d.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName)},option:function(g,h){var f=g,e=this;if(typeof g=="string"){if(h===undefined){return this._getData(g)}f={};f[g]=h}d.each(f,function(j,k){e._setData(j,k)})},_getData:function(e){return this.options[e]},_setData:function(e,f){this.options[e]=f;if(e=="disabled"){this.element[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled")}},enable:function(){this._setData("disabled",false)},disable:function(){this._setData("disabled",true)},_trigger:function(g,j,h){var f=(g==this.widgetEventPrefix?g:this.widgetEventPrefix+g);j=j||d.event.fix({type:f,target:this.element[0]});return this.element.triggerHandler(f,[j,h],this.options[g])}};d.widget.defaults={disabled:false};d.ui.mouse={_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(f){return e._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(e._preventClickEvent){e._preventClickEvent=false;return false}});if(d.browser.msie){this._mouseUnselectable=this.element.attr("unselectable");this.element.attr("unselectable","on")}this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);(d.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable))},_mouseDown:function(h){(this._mouseStarted&&this._mouseUp(h));this._mouseDownEvent=h;var g=this,j=(h.which==1),f=(typeof this.options.cancel=="string"?d(h.target).parents().add(h.target).filter(this.options.cancel).length:false);if(!j||f||!this._mouseCapture(h)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)){this._mouseStarted=(this._mouseStart(h)!==false);if(!this._mouseStarted){h.preventDefault();return true}}this._mouseMoveDelegate=function(k){return g._mouseMove(k)};this._mouseUpDelegate=function(k){return g._mouseUp(k)};d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);return false},_mouseMove:function(f){if(d.browser.msie&&!f.button){return this._mouseUp(f)}if(this._mouseStarted){this._mouseDrag(f);return false}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,f)!==false);(this._mouseStarted?this._mouseDrag(f):this._mouseUp(f))}return !this._mouseStarted},_mouseUp:function(f){d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=true;this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return(Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance)},_mouseDelayMet:function(f){return this.mouseDelayMet},_mouseStart:function(f){},_mouseDrag:function(f){},_mouseStop:function(f){},_mouseCapture:function(f){return true}};d.ui.mouse.defaults={cancel:null,distance:1,delay:0}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(a){a.widget("ui.tabs",{_init:function(){this._tabify(true)},_setData:function(b,c){if((/^selected/).test(b)){this.select(c)}else{this.options[b]=c;this._tabify()}},length:function(){return this.$tabs.length},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+a.data(b)},ui:function(c,b){return{options:this.options,tab:c,panel:b,index:this.$tabs.index(c)}},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie="ui-tabs-"+a.data(this.element[0]));return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_tabify:function(p){this.$lis=a("li:has(a[href])",this.element);this.$tabs=this.$lis.map(function(){return a("a",this)[0]});this.$panels=a([]);var q=this,c=this.options;this.$tabs.each(function(r,o){if(o.hash&&o.hash.replace("#","")){q.$panels=q.$panels.add(q._sanitizeSelector(o.hash))}else{if(a(o).attr("href")!="#"){a.data(o,"href.tabs",o.href);a.data(o,"load.tabs",o.href);var t=q._tabId(o);o.href="#"+t;var s=a("#"+t);if(!s.length){s=a(c.panelTemplate).attr("id",t).addClass(c.panelClass).insertAfter(q.$panels[r-1]||q.element);s.data("destroy.tabs",true)}q.$panels=q.$panels.add(s)}else{c.disabled.push(r+1)}}});if(p){this.element.addClass(c.navClass);this.$panels.addClass(c.panelClass);if(c.selected===undefined){if(location.hash){this.$tabs.each(function(r,o){if(o.hash==location.hash){c.selected=r;return false}})}else{if(c.cookie){var j=parseInt(q._cookie(),10);if(j&&q.$tabs[j]){c.selected=j}}else{if(q.$lis.filter("."+c.selectedClass).length){c.selected=q.$lis.index(q.$lis.filter("."+c.selectedClass)[0])}}}}c.selected=c.selected===null||c.selected!==undefined?c.selected:0;c.disabled=a.unique(c.disabled.concat(a.map(this.$lis.filter("."+c.disabledClass),function(r,o){return q.$lis.index(r)}))).sort();if(a.inArray(c.selected,c.disabled)!=-1){c.disabled.splice(a.inArray(c.selected,c.disabled),1)}this.$panels.addClass(c.hideClass);this.$lis.removeClass(c.selectedClass);if(c.selected!==null){this.$panels.eq(c.selected).removeClass(c.hideClass);var e=[c.selectedClass];if(c.deselectable){e.push(c.deselectableClass)}this.$lis.eq(c.selected).addClass(e.join(" "));var k=function(){q._trigger("show",null,q.ui(q.$tabs[c.selected],q.$panels[c.selected]))};if(a.data(this.$tabs[c.selected],"load.tabs")){this.load(c.selected,k)}else{k()}}a(window).bind("unload",function(){q.$tabs.unbind(".tabs");q.$lis=q.$tabs=q.$panels=null})}else{c.selected=this.$lis.index(this.$lis.filter("."+c.selectedClass)[0])}if(c.cookie){this._cookie(c.selected,c.cookie)}for(var g=0,n;n=this.$lis[g];g++){a(n)[a.inArray(g,c.disabled)!=-1&&!a(n).hasClass(c.selectedClass)?"addClass":"removeClass"](c.disabledClass)}if(c.cache===false){this.$tabs.removeData("cache.tabs")}var b,h;if(c.fx){if(c.fx.constructor==Array){b=c.fx[0];h=c.fx[1]}else{b=h=c.fx}}function d(o,r){o.css({display:""});if(a.browser.msie&&r.opacity){o[0].style.removeAttribute("filter")}}var l=h?function(o,r){r.animate(h,h.duration||"normal",function(){r.removeClass(c.hideClass);d(r,h);q._trigger("show",null,q.ui(o,r[0]))})}:function(o,r){r.removeClass(c.hideClass);q._trigger("show",null,q.ui(o,r[0]))};var m=b?function(r,o,s){o.animate(b,b.duration||"normal",function(){o.addClass(c.hideClass);d(o,b);if(s){l(r,s,o)}})}:function(r,o,s){o.addClass(c.hideClass);if(s){l(r,s)}};function f(s,u,o,t){var r=[c.selectedClass];if(c.deselectable){r.push(c.deselectableClass)}u.addClass(r.join(" ")).siblings().removeClass(r.join(" "));m(s,o,t)}this.$tabs.unbind(".tabs").bind(c.event+".tabs",function(){var t=a(this).parents("li:eq(0)"),o=q.$panels.filter(":visible"),s=a(q._sanitizeSelector(this.hash));if((t.hasClass(c.selectedClass)&&!c.deselectable)||t.hasClass(c.disabledClass)||a(this).hasClass(c.loadingClass)||q._trigger("select",null,q.ui(this,s[0]))===false){this.blur();return false}c.selected=q.$tabs.index(this);if(c.deselectable){if(t.hasClass(c.selectedClass)){q.options.selected=null;t.removeClass([c.selectedClass,c.deselectableClass].join(" "));q.$panels.stop();m(this,o);this.blur();return false}else{if(!o.length){q.$panels.stop();var r=this;q.load(q.$tabs.index(this),function(){t.addClass([c.selectedClass,c.deselectableClass].join(" "));l(r,s)});this.blur();return false}}}if(c.cookie){q._cookie(c.selected,c.cookie)}q.$panels.stop();if(s.length){var r=this;q.load(q.$tabs.index(this),o.length?function(){f(r,t,o,s)}:function(){t.addClass(c.selectedClass);l(r,s)})}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(a.browser.msie){this.blur()}return false});if(c.event!="click"){this.$tabs.bind("click.tabs",function(){return false})}},add:function(e,d,c){if(c==undefined){c=this.$tabs.length}var g=this.options;var j=a(g.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,d));j.data("destroy.tabs",true);var h=e.indexOf("#")==0?e.replace("#",""):this._tabId(a("a:first-child",j)[0]);var f=a("#"+h);if(!f.length){f=a(g.panelTemplate).attr("id",h).addClass(g.hideClass).data("destroy.tabs",true)}f.addClass(g.panelClass);if(c>=this.$lis.length){j.appendTo(this.element);f.appendTo(this.element[0].parentNode)}else{j.insertBefore(this.$lis[c]);f.insertBefore(this.$panels[c])}g.disabled=a.map(g.disabled,function(l,k){return l>=c?++l:l});this._tabify();if(this.$tabs.length==1){j.addClass(g.selectedClass);f.removeClass(g.hideClass);var b=a.data(this.$tabs[0],"load.tabs");if(b){this.load(c,b)}}this._trigger("add",null,this.ui(this.$tabs[c],this.$panels[c]))},remove:function(b){var d=this.options,e=this.$lis.eq(b).remove(),c=this.$panels.eq(b).remove();if(e.hasClass(d.selectedClass)&&this.$tabs.length>1){this.select(b+(b+1<this.$tabs.length?1:-1))}d.disabled=a.map(a.grep(d.disabled,function(g,f){return g!=b}),function(g,f){return g>=b?--g:g});this._tabify();this._trigger("remove",null,this.ui(e.find("a")[0],c[0]))},enable:function(b){var c=this.options;if(a.inArray(b,c.disabled)==-1){return}var d=this.$lis.eq(b).removeClass(c.disabledClass);if(a.browser.safari){d.css("display","inline-block");setTimeout(function(){d.css("display","block")},0)}c.disabled=a.grep(c.disabled,function(f,e){return f!=b});this._trigger("enable",null,this.ui(this.$tabs[b],this.$panels[b]))},disable:function(c){var b=this,d=this.options;if(c!=d.selected){this.$lis.eq(c).addClass(d.disabledClass);d.disabled.push(c);d.disabled.sort();this._trigger("disable",null,this.ui(this.$tabs[c],this.$panels[c]))}},select:function(b){if(typeof b=="string"){b=this.$tabs.index(this.$tabs.filter("[href$="+b+"]")[0])}this.$tabs.eq(b).trigger(this.options.event+".tabs")},load:function(g,l){var m=this,d=this.options,e=this.$tabs.eq(g),k=e[0],h=l==undefined||l===false,b=e.data("load.tabs");l=l||function(){};if(!b||!h&&a.data(k,"cache.tabs")){l();return}var n=function(o){var p=a(o),q=p.find("*:last");return q.length&&q.is(":not(img)")&&q||p};var c=function(){m.$tabs.filter("."+d.loadingClass).removeClass(d.loadingClass).each(function(){if(d.spinner){n(this).parent().html(n(this).data("label.tabs"))}});m.xhr=null};if(d.spinner){var j=n(k).html();n(k).wrapInner("<em></em>").find("em").data("label.tabs",j).html(d.spinner)}var f=a.extend({},d.ajaxOptions,{url:b,success:function(p,o){a(m._sanitizeSelector(k.hash)).html(p);c();if(d.cache){a.data(k,"cache.tabs",true)}m._trigger("load",null,m.ui(m.$tabs[g],m.$panels[g]));try{d.ajaxOptions.success(p,o)}catch(q){}l()}});if(this.xhr){this.xhr.abort();c()}e.addClass(d.loadingClass);m.xhr=a.ajax(f)},url:function(c,b){this.$tabs.eq(c).removeData("cache.tabs").data("load.tabs",b)},destroy:function(){var b=this.options;this.element.unbind(".tabs").removeClass(b.navClass).removeData("tabs");this.$tabs.each(function(){var c=a.data(this,"href.tabs");if(c){this.href=c}var d=a(this).unbind(".tabs");a.each(["href","load","cache"],function(e,f){d.removeData(f+".tabs")})});this.$lis.add(this.$panels).each(function(){if(a.data(this,"destroy.tabs")){a(this).remove()}else{a(this).removeClass([b.selectedClass,b.deselectableClass,b.disabledClass,b.panelClass,b.hideClass].join(" "))}});if(b.cookie){this._cookie(null,b.cookie)}}});a.extend(a.ui.tabs,{version:"@VERSION",getter:"length",defaults:{deselectable:false,event:"click",disabled:[],cookie:null,spinner:"Loading&#8230;",cache:false,idPrefix:"ui-tabs-",ajaxOptions:null,fx:null,tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>',panelTemplate:"<div></div>",navClass:"ui-tabs-nav",selectedClass:"ui-tabs-selected",deselectableClass:"ui-tabs-deselectable",disabledClass:"ui-tabs-disabled",panelClass:"ui-tabs-panel",hideClass:"ui-tabs-hide",loadingClass:"ui-tabs-loading"}});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(c,f){f=f||false;var b=this,e=this.options.selected;function g(){b.rotation=setInterval(function(){e=++e<b.$tabs.length?e:0;b.select(e)},c)}function d(h){if(!h||h.clientX){clearInterval(b.rotation)}}if(c){g();if(!f){this.$tabs.bind(this.options.event+".tabs",d)}else{this.$tabs.bind(this.options.event+".tabs",function(){d();e=b.options.selected;g()})}}else{d();this.$tabs.unbind(this.options.event+".tabs",d)}}})})(jQuery);if(typeof Namespace=="undefined"){var Namespace={}}if(!Namespace.Manager){Namespace.Manager={}}Namespace.Manager={Register:function(namespace){namespace=namespace.split(".");if(!window[namespace[0]]){window[namespace[0]]={}}var strFullNamespace=namespace[0];for(var i=1;i<namespace.length;i++){strFullNamespace+="."+namespace[i];eval("if(!window."+strFullNamespace+")window."+strFullNamespace+"={};")}}};Namespace.Manager.Register("fokus.openride.mobclient.controller");Namespace.Manager.Register("fokus.openride.mobclient.controller.modules");fokus.openride.mobclient.controller.serverconnector=function(){callbackWrapper=function(a,b){if(typeof a=="string"&&a.indexOf("loginForm")!=-1){location.href="./"}else{if(typeof b=="function"){b(a,"error")}}};return{baseURI:"",POST:function(b,c,d,e,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,data:JSON.stringify(d),success:function(f){callbackWrapper(f,e)},error:function(f){callbackWrapper(f,a)},type:"POST"})},GET:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(e){callbackWrapper(e,d)},error:function(e){callbackWrapper(e,a)},type:"GET"})},PUT:function(b,c,d,e,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,data:JSON.stringify(d),success:function(f){callbackWrapper(f,e)},error:function(f){callbackWrapper(f,a)},type:"PUT"})},PUTaction:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(e){callbackWrapper(e,d)},error:function(e){callbackWrapper(e,a)},type:"PUT"})},DELETE:function(b,c,d,a){$.ajax({url:fokus.openride.mobclient.controller.serverconnector.baseURI+b,async:c,success:function(e){callbackWrapper(e,d)},error:function(e){callbackWrapper(e,a)},type:"DELETE"})}}}();fokus.openride.mobclient.controller.modules.nativemodule=function(){var a;function d(e){a=e}function b(e){a=new Object();a.coords={};a.coords.latitude=e.latitude;a.coords.longitude=e.longitude}function c(){return null}return{getUserLocation:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(d,c)}else{if(window.google&&google.gears){try{var f=google.gears.factory.create("beta.geolocation");f.getCurrentPosition(b,c,{enableHighAccuracy:true,gearsRequestAddress:true})}catch(g){return null}}else{return null}}return a}}}();fokus.openride.mobclient.controller.modules.mapmanager=function(){var G=fokus.openride.mobclient.controller.serverconnector;var C;var q;var aa;var S;var a;var T;var e;var H=17;var V="../img/defaultpinicon.png";var A=40;var y=40;var U="../img/thumbshadow.png";var ad="../img/startred.png";var ac=40;var Z=40;var b="../img/zielred.png";var l=40;var j=40;var v="../img/mapicon2.png";var x=21;var w=30;var P="../img/flagrdicon.png";var N=20;var M=15;var t="../img/waypoint.png";var n=28;var m=40;var K=21;var J=30;var u=23;var s=17;var I=["../img/thumbcol1.png","../img/thumbcol2.png","../img/thumbcol3.png","../img/thumbcol4.png","../img/thumbcol5.png","../img/thumbcol6.png"];var E=["../img/flagcol1.png","../img/flagcol2.png","../img/flagcol3.png","../img/flagcol4.png","../img/flagcol5.png","../img/flagcol6.png"];var X=new Array();var R=0;var ab=0;var L=1;var k=2;var z;var W;var p;var g;var o;var D;var r="";var F="";var c="";var B=false;var h=1;var Q=new google.maps.LatLng(47.66029,9.432982);return{username:"user",currentFormattedAddress:"1",revgeocodedAddr:"",updateAddressInfo:function(af){var ae=this;var ag=document.getElementById(af);if(q){q.geocode({latLng:T},function(ai,ah){if(ah==google.maps.GeocoderStatus.OK){if(ai[0]){ag.value=ai[0].formatted_address;ae.currentFormattedAddress=ai[0].formatted_address}else{ag.value="No address Found!   "}}else{ag.value="No address Found!   "}})}},initialize:function(af,ah,ae){e=ah;var ai=this;q=new google.maps.Geocoder();T=ae;var ag={zoom:13,center:T,disableDefaultUI:true,mapTypeControl:false,navigationControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDoubleClickZoom:true};C=new google.maps.Map(document.getElementById(af),ag);if(R==ab){ai.updateAddressInfo(ah);f("default",T);google.maps.event.addListener(aa,"dragstart",function(){});google.maps.event.addListener(aa,"dragend",function(){O(aa.getPosition());ai.updateAddressInfo(ah)});google.maps.event.addListener(aa,"click",function(){C.setZoom(15)});google.maps.event.addListener(C,"click",function(aj){O(aj.latLng);ai.updateAddressInfo(ah)})}if(R==L){this.drawSimpleRoute()}else{if(R==k){this.drawRouteWithViaPts()}}},setMapMode:function(ae){if(ae>=0){R=ae}else{}},setRoutePath:function(ae){z=ae},setViaStartPoints:function(ae){g=ae},resetViaStartPoints:function(){g=""},setViaDestPoints:function(ae){o=ae},resetViaDestPoints:function(){o=""},getRoutePath:function(){return z},getViaStartPoints:function(){return viaptstartlatlns},getViaDestPoints:function(){return o},fitToBounds:function(ae){C.fitBounds(ae)},parsesimpleroutecoords:function(af){var ae=new Array();var ag=$(af).find("hasroute").text();if(ag!=null&&ag!="undefined"&&typeof ag!="undefined"){if(ag=="true"){$(af).find("coordinates").each(function(){var am=$(this).text();var aq=am.split(" ");for(var al=0;al<aq.length-1;al++){var ah=aq[al];var aj=ah.indexOf(",");var ai=ah.substr(0,aj);var an=ah.substr(aj+1,ah.length-aj+1);var ap=parseFloat(ai);var ao=parseFloat(an);var ak=new google.maps.LatLng(ap,ao);ae.push(ak)}});return ae}else{fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"There was no route found.");return false}}},getPartialRoutes:function(){c=new Array();B=true;if(F.length&&F.length>0){for(var ae=0;ae<F.length;ae++){var ag="";var af="";var al="";var ah="";var ak="";if(ae==0){ak=F[ae].getPosition();ag=z[0].lat();af=z[0].lng();al=ak.lat();ah=ak.lng()}else{if(ae!=0&&ae==F.length-1){ak=F[ae].getPosition();ag=ak.lat();af=ak.lng();al=z[z.length-1].lat();ah=z[z.length-1].lng()}else{var aj=F[ae-1].getPosition();ag=aj.lat();af=aj.lng();ak=F[ae].getPosition();al=ak.lat();ah=ak.lng()}}var ai=this;G.GET("/OpenRideServer-RS/resources/users/"+this.username+"/routes/new,"+ag+","+af+","+al+","+ah,false,function(an){var am=ai.parsesimpleroutecoords(an);if(am!=false){c.push(am)}},function(){B=false;alert("The route could not be generated with this waypoint!")})}if(F.length==1){ak=F[0].getPosition();ag=ak.lat();af=ak.lng();al=z[z.length-1].lat();ah=z[z.length-1].lng()}var ai=this;G.GET("/OpenRideServer-RS/resources/users/"+this.username+"/routes/new,"+ag+","+af+","+al+","+ah,false,function(an){var am=ai.parsesimpleroutecoords(an);if(am!=false){c.push(am)}},function(){B=false;alert("The route could not be generated with this waypoint!")})}},drawPartialRoutes:function(ak){if(B){D=new Array();for(var ai=0;ai<ak.length;ai++){var aj=ak[ai];for(var ah=0;ah<aj.length;ah++){D.push(aj[ah])}}r.setMap(null);r.setPath(D);r.setMap(C);var af=new google.maps.LatLngBounds();var ae=D.length;for(var ag=0;ag<ae;ag++){af.extend(D[ag])}C.fitBounds(af)}else{}},addCorrectionPoint:function(){var aj="";aj=z[z.length-2];var ag=new google.maps.MarkerImage(t,new google.maps.Size(n,m),new google.maps.Point(0,0),new google.maps.Point(n/2+2,(m)));var ai=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var af=new google.maps.Marker({position:aj,map:C,shadow:ai,icon:ag,draggable:true,clickable:false});var ae=af.getPosition();google.maps.event.addListener(af,"dragstart",function(){ae=af.getPosition()});var ah=this;google.maps.event.addListener(af,"dragend",function(){ah.getPartialRoutes();if(B){O(af.getPosition());ah.drawPartialRoutes(c)}else{af.setPosition(ae)}});if(F==""){F=new Array()}F.push(af)},drawSimpleRoute:function(){if(z!="undefined"&&typeof z!="undefined"){if(z.length>=2){r=new google.maps.Polyline({path:z,strokeColor:"#96bd0d",strokeOpacity:1,strokeWeight:2});f("mainstart",z[0]);f("maindst",z[z.length-1]);var ag=new google.maps.LatLngBounds();var ae=z.length;for(var af=0;af<ae;af++){ag.extend(z[af])}C.fitBounds(ag);r.setMap(C)}}else{fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"no route (in draw)")}},drawRouteWithViaPts:function(){this.drawSimpleRoute();if(g!="undefined"&&typeof g!="undefined"){for(var aj=0;aj<g.length;aj++){var af=new google.maps.MarkerImage(I[(aj%I.length)],new google.maps.Size(K,J),new google.maps.Point(0,0),new google.maps.Point(5,J));var ae=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var ai=new google.maps.Marker({position:g[aj],map:C,shadow:ae,icon:af,draggable:false,clickable:false,zIndex:aj});X.push(ai)}}else{}if(o!="undefined"&&typeof o!="undefined"){for(var aj=0;aj<o.length;aj++){var ag=new google.maps.MarkerImage(E[(aj%E.length)],new google.maps.Size(u,s),new google.maps.Point(0,0),new google.maps.Point(5,s));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));var ak=new google.maps.Marker({position:o[aj],map:C,shadow:ah,icon:ag,draggable:false,clickable:false,zIndex:aj});X.push(ak)}}else{}},resetRiderMarkers:function(){for(var ae=0;ae<X.length;ae++){X[ae].setMap(null)}this.resetViaStartPoints();this.resetViaDestPoints();X.length=0},geocodeAddressFromInput:function(af){var ag=this;var ae=document.getElementById(af).value;if(!q){q=new google.maps.Geocoder()}if(q){q.geocode({address:ae},function(ai,ah){if(ah==google.maps.GeocoderStatus.OK){T=ai[0].geometry.location;O(T);ag.updateAddressInfo(af)}else{ae="Geocode was not successful for the following reason: "+ah}})}},insertRevGeocodedAddr:function(ae,af){var ag=new google.maps.LatLng(ae.coords.latitude,ae.coords.longitude);q=new google.maps.Geocoder();if(q){q.geocode({latLng:ag},function(ai,ah){if(ah==google.maps.GeocoderStatus.OK){if(ai[0]){document.getElementById(af).innerHTML="Location:"+ai[0].formatted_address;document.getElementById(af).latln=ai[0].geometry.location.lat()+","+ai[0].geometry.location.lng()}}else{document.getElementById(af).innerHTML="Location: undetermined!";document.getElementById(af).latln="none"}})}document.getElementById(af).innerHTML="Location: undetermined!";document.getElementById(af).latln="none"},setRevGeocodedAddr:function(ah,af){var ag=this;var ae=new google.maps.LatLng(ah,af);if(!q){q=new google.maps.Geocoder()}if(q){q.geocode({latLng:ae},function(aj,ai){if(ai==google.maps.GeocoderStatus.OK){if(aj[0]){ag.revgeocodedAddr=aj[0].formatted_address}}else{ag.revgeocodedAddr="Location: undetermined!"}})}ag.revgeocodedAddr="Location: undetermined!"},getLocationFromString:function(ae){if(!q){q=new google.maps.Geocoder()}if(q){q.geocode({address:ae},function(ag,af){if(af==google.maps.GeocoderStatus.OK){return ag[0].geometry.location}else{return Q}})}},getCenterPosition:function(){return T},getLocationLatFromString:function(ae){this.getLocationFromString(ae).lat()},getLocationLonFromString:function(ae){this.getLocationFromString(ae).lng()},setMapToLocation:function(ae){O(ae);this.updateAddressInfo(e)},zoomIn:function(){var ae=C.getZoom();if(ae<H){C.setZoom(ae+1)}},zoomOut:function(){var ae=C.getZoom();if(ae>0){C.setZoom(ae-1)}}};function d(ag){var af=Q;try{G.GET("/OpenRideServer-RS/resources/users/"+fokus.openride.mobclient.controller.modules.mapmanager.username+"/routes/validate/"+ag.lat()+","+ag.lng(),false,function(ak){var al=ag.lat();var aj=ag.lng();af=new google.maps.LatLng(al,aj)},function(aj,ak,al){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aj,ak,al,"The coordinates were able to validate unfortunately not be delivered. Error: "+ak)})}catch(ai){}finally{var ah=ag.lat();var ae=ag.lng();af=new google.maps.LatLng(ah,ae);return af}}function f(af,ae){if(af=="default"){var ag=new google.maps.MarkerImage(V,new google.maps.Size(A,y),new google.maps.Point(0,0),new google.maps.Point(0,(y)));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));aa=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,draggable:true,clickable:true,zIndex:5})}else{if(af=="mainstart"){var ag=new google.maps.MarkerImage(ad,new google.maps.Size(ac,Z),new google.maps.Point(0,0),new google.maps.Point(ac/2,Z));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(5,35));S=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,draggable:false,clickable:false,zIndex:100});aa=S}else{if(af=="maindst"){var ag=new google.maps.MarkerImage(b,new google.maps.Size(l,j),new google.maps.Point(0,0),new google.maps.Point((l/2),j));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));a=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,draggable:false,clickable:false,zIndex:100})}else{if(af=="viastart"){var ag=new google.maps.MarkerImage(v,new google.maps.Size(x,w),new google.maps.Point(0,0),new google.maps.Point(0,(w)));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));S=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,title:"test_username",draggable:false,clickable:false,zIndex:10});aa=S}else{if(af=="viadst"){var ag=new google.maps.MarkerImage(P,new google.maps.Size(N,M),new google.maps.Point(0,0),new google.maps.Point(0,(M)));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));a=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,draggable:false,clickable:false,zIndex:10})}}}}}}function Y(ae){var af;var ag=new google.maps.MarkerImage(v,new google.maps.Size(x,w),new google.maps.Point(0,0),new google.maps.Point(0,(w)));var ah=new google.maps.MarkerImage(U,new google.maps.Size(29,34),new google.maps.Point(0,0),new google.maps.Point(-6,35));af=new google.maps.Marker({position:ae,map:C,shadow:ah,icon:ag,draggable:true,clickable:false});return af}function O(ae){T=ae;C.setCenter(T);aa.setPosition(T)}}();fokus.openride.mobclient.controller.modules.offer=function(){var a={Offer:[{rideId:-1,ridestartPtLat:52.525798,ridestartPtLon:13.314266,rideendPtLat:52.5225,rideendPtLon:13.4123,ridestartTime:new Date().getMilliseconds(),rideprice:20,rideComment:"Das Fahrtkommentar.",acceptableDetourInMin:10,acceptableDetourInKm:10,acceptableDetourInPercent:10,offeredSeatsNo:4,startptAddress:"Weg 1, 10001 Berlin",endptAddress:"Weg 900, 10002 Berlin"}]};return{validateOfferRequest:function(){return a},setStartLat:function(b){a.Offer[0].ridestartPtLat=b},setStartLon:function(b){a.Offer[0].ridestartPtLon=b},setStartLatLn:function(b){if(b.indexOf(",")!=-1){a.Offer[0].ridestartPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Offer[0].ridestartPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Offer[0].ridestartPtLat=52.525798;a.Offer[0].ridestartPtLon=13.314266}},getStartLat:function(){return a.Offer[0].ridestartPtLat},getStartLon:function(){return a.Offer[0].ridestartPtLon},setStartAddr:function(b){a.Offer[0].startptAddress=b},getStartAddr:function(){return a.Offer[0].startptAddress},setDestLat:function(b){a.Offer[0].rideendPtLat=b},setDestLon:function(b){a.Offer[0].rideendPtLon=b},setDestLatLn:function(b){if(b.indexOf(",")!=-1){a.Offer[0].rideendPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Offer[0].rideendPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Offer[0].rideendPtLat=52.525798;a.Offer[0].rideendPtLon=13.314266}},getDestLat:function(){return a.Offer[0].rideendPtLat},getDestLon:function(){return a.Offer[0].rideendPtLon},setDestAddr:function(b){a.Offer[0].endptAddress=b},getDestAddr:function(){return a.Offer[0].endptAddress},setStartTime:function(b){a.Offer[0].ridestartTime=b.getTime()},getStartTime:function(){return a.Offer[0].ridestartTime},setPrice:function(b){a.Offer[0].rideprice=b},getPrice:function(){return a.Offer[0].rideprice},setComment:function(b){a.Offer[0].rideComment=b},getComment:function(){return a.Offer[0].rideComment},setDetour:function(b){a.Offer[0].acceptableDetourInKm=b},getDetour:function(){return a.Offer[0].acceptableDetourInMin},setCurrency:function(b){a.Offer[0].offeredCurrency=b},getCurrency:function(){return a.Offer[0].offeredCurrency},setOfferedSeatsNo:function(b){a.Offer[0].offeredSeatsNo=b},getOfferedSeatsNo:function(){return a.Offer[0].offeredSeatsNo},setSaveTemplate:function(b){a.Offer[0].savetemplate=b},getSaveTemplate:function(){return a.Offer[0].savetemplate}}}();fokus.openride.mobclient.controller.modules.search=function(){var a={Search:[{ridestartPtLat:52.525798,ridestartPtLon:13.314266,rideendPtLat:52.525798,rideendPtLon:13.314266,ridestartTimeLatest:new Date().getTime(),rideComment:"My dear Comment!",maxwaitingtime:20,searchedSeatsNo:1,savetemplate:false,ridestartTimeEarliest:new Date().getTime(),price:5.12,startptAddress:"Weg 1, 10001 Berlin",endptAddress:"Weg 900, 10002 Berlin"}]};return{validateSearchRequest:function(){return a},setTripName:function(b){a.Search[0].rideName=b},getTripName:function(){return a.Search[0].rideName},setStartLat:function(b){a.Search[0].ridestartPtLat=b},setStartLon:function(b){a.Search[0].ridestartPtLon=b},setStartLatLn:function(b){if(b.indexOf(",")!=-1){a.Search[0].ridestartPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Search[0].ridestartPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Search[0].ridestartPtLat=52.525798;a.Search[0].ridestartPtLon=13.314266}},getStartLat:function(){return a.Search[0].ridestartPtLat},getStartLon:function(){return a.Search[0].ridestartPtLon},setStartAddr:function(b){a.Search[0].startptAddress=b},getStartAddr:function(){return a.Search[0].startptAddress},setDestLat:function(b){a.Search[0].rideendPtLat=b},setDestLon:function(b){a.Search[0].rideendPtLon=b},setDestLatLn:function(b){if(b.indexOf(",")!=-1){a.Search[0].rideendPtLat=parseFloat(b.substr(0,b.indexOf(",")));a.Search[0].rideendPtLon=parseFloat(b.substr(b.indexOf(",")+1,b.length-(b.indexOf(",")+1)))}else{a.Search[0].rideendPtLat=52.525798;a.Search[0].rideendPtLon=13.314266}},getDestLat:function(){return a.Search[0].rideendPtLat},getDestLon:function(){return a.Search[0].rideendPtLon},setDestAddr:function(b){a.Search[0].endptAddress=b},getDestAddr:function(){return a.Search[0].endptAddress},setStartTime:function(b){a.Search[0].ridestartTimeEarliest=b.getTime()},getStartTime:function(){return a.Search[0].ridestartTimeEarliest},setPrice:function(b){a.Search[0].rideprice=b},getPrice:function(){return a.Search[0].rideprice},setMaxWaitingTime:function(b){a.Search[0].maxwaitingtime=b;var c=b*60*1000;a.Search[0].ridestartTimeLatest=a.Search[0].ridestartTimeEarliest+c},getMaxWaitingTime:function(){return a.Search[0].maxwaitingtime},setComment:function(b){a.Search[0].rideComment=b},getComment:function(){return a.Search[0].rideComment},setSearchedSeatsNo:function(b){a.Search[0].searchedSeatsNo=b},getSearchedSeatsNo:function(){return a.Search[0].searchedSeatsNo},setSaveTemplate:function(b){a.Search[0].savetemplate=b},getSaveTemplate:function(){return a.Search[0].savetemplate}}}();fokus.openride.mobclient.controller.modules.favorites=function(){var a={FavoritePointRequest:[{favptAddress:"Bitte Strasse eingben!",favptGeoCoords:"0,0",favptDisplayName:"Bitte Namen eingeben"}]};return{setAddress:function(b){a.FavoritePointRequest[0].favptAddress=b},getAdress:function(){return a.FavoritePointRequest[0].favptAddress},setGeoCoordStr:function(b){a.FavoritePointRequest[0].favptGeoCoords=b},getGeoCoordStr:function(){return a.FavoritePointRequest[0].favptGeoCoords},setGeoCoords:function(c,b){a.FavoritePointRequest[0].favptGeoCoords=c+","+b},setDisplayName:function(b){a.FavoritePointRequest[0].favptDisplayName=b},getDisplayName:function(){return a.FavoritePointRequest[0].favptDisplayName},getFavPt:function(){return a}}}();fokus.openride.mobclient.controller.modules.ratings=function(){var a={GivenRatingRequest:[{riderRouteId:"",givenRating:"",givenRatingComment:""}]};return{setRiderRouteId:function(b){a.GivenRatingRequest[0].riderRouteId=b},getRiderRouteId:function(){return a.GivenRatingRequest[0].riderRouteId},setGivenRating:function(b){a.GivenRatingRequest[0].givenRating=b},getGivenRating:function(){return a.GivenRatingRequest[0].givenRating},setGivenRatingComment:function(b){a.GivenRatingRequest[0].givenRatingComment=b},getGivenRatingComment:function(){return a.GivenRatingRequest[0].givenRatingComment},getGivenRatingRequest:function(){return a}}}();fokus.openride.mobclient.controller.modules.profile=function(){var b={ProfileRequest:[{_id:"",preferences:"",pictures:"",favouritesList:"",firstName:"",lastName:"",dateOfBirth:"",email:"",mobilePhoneNumber:"",motivation:"",fixedPhoneNumber:"",streetAddress:"",zipCode:"",city:"",isSmoker:"",licenseDate:"",carColour:"",carBrand:"",carBuildYear:"",carPlateNo:"",gender:"-",_revision:0,__v:0}]};var c={PreferencesRequest:[{prefIsSmoker:"",prefGender:""}]};var a={PasswordRequest:[{passwordOld:"",password:""}]};return{setAllData:function(d){b.ProfileRequest[0]._id=d._id;b.ProfileRequest[0].preferences=d.preferences;b.ProfileRequest[0].pictures=d.pictures;b.ProfileRequest[0].favouritesList=d.favouritesList;b.ProfileRequest[0].firstName=d.firstName;b.ProfileRequest[0].lastName=d.lastName;b.ProfileRequest[0].dateOfBirth=d.dateOfBirth;b.ProfileRequest[0].email=d.email;b.ProfileRequest[0].mobilePhoneNumber=d.mobilePhoneNumber;b.ProfileRequest[0].motivation=d.motivation;b.ProfileRequest[0].fixedPhoneNumber=d.fixedPhoneNumber;b.ProfileRequest[0].streetAddress=d.streetAddress;b.ProfileRequest[0].zipCode=d.zipCode;b.ProfileRequest[0].city=d.city;b.ProfileRequest[0].isSmoker=d.isSmoker;b.ProfileRequest[0].licenseDate=d.licenseDate;b.ProfileRequest[0].carColour=d.carColour;b.ProfileRequest[0].carBrand=d.carBrand;b.ProfileRequest[0].carBuildYear=d.carBuildYear;b.ProfileRequest[0].carPlateNo=d.carPlateNo;b.ProfileRequest[0].gender=d.gender;b.ProfileRequest[0]._revision=d._revision;b.ProfileRequest[0]._v=d._v},setDateOfBirth:function(d){b.ProfileRequest[0].dateOfBirth=d},getDateOfBirth:function(){return b.ProfileRequest[0].dateOfBirth},setEmail:function(d){b.ProfileRequest[0].email=d},getEmail:function(){return b.ProfileRequest[0].email},setMobilePhoneNumber:function(d){b.ProfileRequest[0].mobilePhoneNumber=d},getMobilePhoneNumber:function(){return b.ProfileRequest[0].mobilePhoneNumber},setFixedPhoneNumber:function(d){b.ProfileRequest[0].fixedPhoneNumber=d},getFixedPhoneNumber:function(){return b.ProfileRequest[0].fixedPhoneNumber},setStreetAddress:function(d){b.ProfileRequest[0].streetAddress=d},getStreetAddress:function(){return b.ProfileRequest[0].streetAddress},setZipCode:function(d){b.ProfileRequest[0].zipCode=""+d},getZipCode:function(){return b.ProfileRequest[0].zipCode},setCity:function(d){b.ProfileRequest[0].city=d},getCity:function(){return b.ProfileRequest[0].city},setIsSmoker:function(d){b.ProfileRequest[0].isSmoker=d},getIsSmkoker:function(){return b.ProfileRequest[0].isSmoker},setLicenseDate:function(d){b.ProfileRequest[0].licenseDate=d},getLicenseDate:function(){return b.ProfileRequest[0].licenseDate},setCarColour:function(d){b.ProfileRequest[0].carColour=d},getCarColour:function(){return b.ProfileRequest[0].carColour},setCarBrand:function(d){b.ProfileRequest[0].carBrand=d},getCarBrand:function(){return b.ProfileRequest[0].carBrand},setCarBuildYear:function(d){b.ProfileRequest[0].carBuildYear=d},getCarBuildYear:function(){return b.ProfileRequest[0].carBuildYear},setCarPlateNo:function(d){b.ProfileRequest[0].carPlateNo=d},getCarPlateNo:function(){return b.ProfileRequest[0].carPlateNo},getProfileRequest:function(){return b.ProfileRequest[0]},setPrefIsSmoker:function(d){c.PreferencesRequest[0].prefIsSmoker=d},getPrefIsSmoker:function(){return c.PreferencesRequest[0].prefIsSmoker},setPrefGender:function(d){c.PreferencesRequest[0].prefGender=d},getPrefGender:function(){return c.PreferencesRequest[0].prefGender},getPreferencesRequest:function(){return c},setPasswordOld:function(d){a.PasswordRequest[0].passwordOld=d},getPasswordOld:function(){return a.PasswordRequest[0].passwordOld},setPassword:function(d){a.PasswordRequest[0].password=d},getPassword:function(){return a.PasswordRequest[0].password},getPasswordRequest:function(){return a}}}();fokus.openride.mobclient.controller.modules.calendar=function(){var a=new Date();var b=new Date();b.setHours(b.getHours()+1);return{date:a,endDate:b,getDate:function(){return this.date},getDateEnd:function(){return this.endDate},getDay:function(){return this.date.getDate()},getMonth:function(){return this.date.getMonth()+1},getYear:function(){return this.date.getFullYear()},getHour:function(){return this.date.getHours()},getMin:function(){return this.date.getMinutes()},getHourEnd:function(){return this.endDate.getHours()},getMinEnd:function(){return this.endDate.getMinutes()},getDateString:function(){return""+this.getDay()+"."+this.getMonth()+"."+this.getYear()+" "+this.getHours()+":"+this.getMinutes()+" Uhr"},setDay:function(c){this.date.setDate(c)},setHour:function(c){this.date.setHours(c)},setMin:function(c){this.date.setMinutes(c)},setMonth:function(c){this.date.setMonth(c)},setYear:function(c){this.date.setYear(c)},increaseYear:function(){this.date.setFullYear(this.date.getFullYear()+1);this.endDate.setFullYear(this.endDate.getFullYear()+1)},decreaseYear:function(){this.date.setFullYear(this.date.getFullYear()-1);this.endDate.setFullYear(this.endDate.getFullYear()-1)},increaseMonth:function(){this.date.setMonth(this.date.getMonth()+1);this.endDate.setMonth(this.endDdate.getMonth()+1)},decreaseMonth:function(){this.date.setMonth(this.date.getMonth()-1);this.endDate.setMonth(this.endDate.getMonth()-1)},increaseDay:function(){this.date.setDate(this.date.getDate()+1);this.endDate.setDate(this.endDate.getDate()+1)},decreaseDay:function(){this.date.setDate(this.date.getDate()-1);this.endDate.setDate(this.endDate.getDate()-1)},increaseHour:function(){this.date.setHours(this.date.getHours()+1)},decreaseHour:function(){this.date.setHours(this.date.getHours()-1)},increaseMin:function(c){if(c<0){c=0}var d=this.date.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.date.getMinutes()+c)%5}while(d!=0)}this.date.setMinutes(this.date.getMinutes()+c)},decreaseMin:function(c){if(c<0){c=0}var d=this.date.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.date.getMinutes()-c)%5}while(d!=0)}this.date.setMinutes(this.date.getMinutes()-c)},increaseHourEnd:function(){this.endDate.setHours(this.endDate.getHours()+1)},decreaseHourEnd:function(){this.endDate.setHours(this.endDate.getHours()-1)},increaseMinEnd:function(c){if(c<0){c=0}var d=this.endDate.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.endDate.getMinutes()+c)%5}while(d!=0)}this.endDate.setMinutes(this.endDate.getMinutes()+c)},decreaseMinEnd:function(c){if(c<0){c=0}var d=this.endDate.getMinutes()%5;if(d!=0){c=0;do{c+=1;d=(this.endDate.getMinutes()-c)%5}while(d!=0)}this.endDate.setMinutes(this.endDate.getMinutes()-c)},reset:function(){this.date=new Date();this.endDate=new Date();this.endDate.setHours(b.getHours()+1)}}}();fokus.openride.mobclient.controller.modules.modulemanager=function(){var R=fokus.openride.mobclient.controller.modules.mapmanager;var k=fokus.openride.mobclient.controller.modules.nativemodule;var u=fokus.openride.mobclient.controller.serverconnector;var U=fokus.openride.mobclient.controller.modules.calendar;var af=fokus.openride.mobclient.controller.modules.profile;usermode=DRIVERMODE;var I="offerstartdropd";var z="offerdestdropd";var p="searchstartdropd";var m="searchdestdropd";var P="offerstartselectcurrpos";var o="offerdestselectcurrpos";var j="searchstartselectcurrpos";var Z="searchdestselectcurrpos";var E="modify";var l="new";var x="";var v="";var ab="newofferUI";var F;var B=["tab01link","tab02link","tab03link","tab04link","tab05link"];var ae=["tabimg01","tabimg02","tabimg03","tabimg04"];var h=["tab01link","tab02link","tab03link","tab04link"];var A=["tab11link","tab12link","tab13link","tab14link"];var ad=["tabimg11","tabimg12","tabimg13","tabimg14"];var g=["tab01link","tab02link","tab03link","tab04link"];var q="";var K="";var D="";var G="";var X={imgsrc:"../img/tab0home_inact_wide.png",imgactivesrc:"../img/tab0home_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/home1green_wide.png",imgactivesrc:"../img/home1white_wide.png",contentdivid:"homeUI",isactive:false},{imgsrc:"../img/tab1profilegreen_wide.png",imgactivesrc:"../img/tab1profilewhite_wide.png",contentdivid:"profileUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var V={imgsrc:"../img/tab0driver_inact_wide.png",imgactivesrc:"../img/tab0driver_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1NeuesAngebot_wide.png",imgactivesrc:"../img/tab1NeuesAngebotActive_wide.png",contentdivid:"newofferUI",isactive:false},{imgsrc:"../img/tab1MeineAngebote_wide.png",imgactivesrc:"../img/tab1MeineAngeboteActive_wide.png",contentdivid:"activeofferUI",isactive:false},{imgsrc:"../img/tab1AlteAngebote_wide.png",imgactivesrc:"../img/tab1AlteAngeboteActive_wide.png",contentdivid:"completedtripsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var T={imgsrc:"../img/tab0thumb_inact_wide.png",imgactivesrc:"../img/tab0ride_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1ratinggreen_wide.png",imgactivesrc:"../img/tab1ratingwhite_wide.png",contentdivid:"ratingsUI",isactive:false},{imgsrc:"../img/tab1openratsgreen_wide.png",imgactivesrc:"../img/tab1openratswhite_wide.png",contentdivid:"openratingsUI",isactive:false},{imgsrc:"../img/tab1receivedratsgreen_wide.png",imgactivesrc:"../img/tab1receivedratswhite_wide.png",contentdivid:"receivedratingsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var S={imgsrc:"../img/tab0star_inact_wide.png",imgactivesrc:"../img/tab0star_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1favlistgreen_wide.png",imgactivesrc:"../img/tab1favlistwhite_wide.png",contentdivid:"favlistUI",isactive:false},{imgsrc:"../img/tab1newfavgreen_wide.png",imgactivesrc:"../img/tab1newfavwhite_wide.png",contentdivid:"newfavoritepickerUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var Q={imgsrc:"../img/tab0euro_inact.png",imgactivesrc:"../img/tab0euro_act.png",isavtive:false,leafs:[{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false}]};var N={imgsrc:"../img/tab0home_inact_wide.png",imgactivesrc:"../img/tab0home_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/home1green_wide.png",imgactivesrc:"../img/home1white_wide.png",contentdivid:"homeUI",isactive:false},{imgsrc:"../img/tab1profilegreen_wide.png",imgactivesrc:"../img/tab1profilewhite_wide.png",contentdivid:"profileUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var M={imgsrc:"../img/tab0rider_inact_wide.png",imgactivesrc:"../img/tab0rider_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1NeuesGesuch_wide.png",imgactivesrc:"../img/tab1NeuesGesuchActive_wide.png",contentdivid:"newsearchUI",isactive:false},{imgsrc:"../img/tab1MeineGesuche_wide.png",imgactivesrc:"../img/tab1MeineGesucheActive_wide.png",contentdivid:"activesearchUI",isactive:false},{imgsrc:"../img/tab1AlteGesuche_wide.png",imgactivesrc:"../img/tab1AlteGesucheActive_wide.png",contentdivid:"completedtripsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var L={imgsrc:"../img/tab0thumb_inact_wide.png",imgactivesrc:"../img/tab0ride_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1ratinggreen_wide.png",imgactivesrc:"../img/tab1ratingwhite_wide.png",contentdivid:"ratingsUI",isactive:false},{imgsrc:"../img/tab1openratsgreen_wide.png",imgactivesrc:"../img/tab1openratswhite_wide.png",contentdivid:"openratingsUI",isactive:false},{imgsrc:"../img/tab1receivedratsgreen_wide.png",imgactivesrc:"../img/tab1receivedratswhite_wide.png",contentdivid:"receivedratingsUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var J={imgsrc:"../img/tab0star_inact_wide.png",imgactivesrc:"../img/tab0star_act_wide.png",isavtive:false,leafs:[{imgsrc:"../img/tab1favlistgreen_wide.png",imgactivesrc:"../img/tab1favlistwhite_wide.png",contentdivid:"favlistUI",isactive:false},{imgsrc:"../img/tab1newfavgreen_wide.png",imgactivesrc:"../img/tab1newfavwhite_wide.png",contentdivid:"newfavoritepickerUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"dummyUI",isactive:false}]};var H={imgsrc:"../img/tab0euro_inact.png",imgactivesrc:"../img/tab0euro_act.png",isavtive:false,leafs:[{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false},{imgsrc:"../img/tab1greentempl.png",imgactivesrc:"../img/tab1whitetempl.png",contentdivid:"accountUI",isactive:false}]};var f=[X,V,T,S];var b=[N,M,L,J];var O;var C=this;var W="";var t="";var n="";var r="";var s="";var aa="";var w="";var ac="";var e="";var y="";var a="";var d=new Array();var Y;var c=this;return{displayedFullScreenMapId:"",username:"nick",offerfavsset:false,searchfavsset:false,modifyfavsset:false,activeofferlistdiv:"activeofferlist",activeofferlisthtml:"",activesearchlistdiv:"activesearchlist",activesearchlisthtml:"",completedtrips:"completedtrips",completedtriplisthtml:"",favoritelistdiv:"favlistUI",favoritelisthtml:"",ratingssummarydiv:"ratingsUI",ratingssummaryhtml:"",openratingslistdiv:"openratingsUI",openratingslisthtml:"",receivedratingslistdiv:"receivedratingsUI",receivedratingslisthtml:"",currentdisplayedview:ab,currentactivenodeindex:0,currentactiveleafindex:0,detailsClicked:false,clone:function(ah){function ag(){}ag.prototype=ah;return new ag()},setupTabs:function(){var ag;if(usermode==DRIVERMODE){ag=f}else{if(usermode==RIDERMODE){ag=b}}for(var ai=0;ai<ae.length;ai++){if(ai<ag.length){if(ai==this.currentactivenodeindex){document.getElementById(ae[ai]).src=ag[ai].imgactivesrc;for(var ah=0;ah<ad.length;ah++){if(ai<ag[ai].leafs.length){if(ah==0){document.getElementById(ad[ah]).src=ag[ai].leafs[ah].imgactivesrc}else{document.getElementById(ad[ah]).src=ag[ai].leafs[ah].imgsrc}}}}else{document.getElementById(ae[ai]).src=ag[ai].imgsrc}}}this.setTabContent(0,0)},setTabContent:function(aj,ai){var ag;if(usermode==DRIVERMODE){ag=f}else{if(usermode==RIDERMODE){ag=b}}if(this.currentactivenodeindex==aj){if(this.currentactiveleafindex!=ai){ag[this.currentactivenodeindex].leafs[this.currentactiveleafindex].isactive=false;document.getElementById(ad[this.currentactiveleafindex]).src=ag[this.currentactivenodeindex].leafs[this.currentactiveleafindex].imgsrc;ag[aj].leafs[ai].isactive=true;document.getElementById(ad[ai]).src=ag[aj].leafs[ai].imgactivesrc}}else{ag[this.currentactivenodeindex].isactive=false;document.getElementById(ae[this.currentactivenodeindex]).src=ag[this.currentactivenodeindex].imgsrc;ag[aj].isactive=true;document.getElementById(ae[aj]).src=ag[aj].imgactivesrc;ag[this.currentactivenodeindex].leafs[this.currentactiveleafindex].isactive=false;document.getElementById(ad[this.currentactiveleafindex]).src=ag[this.currentactivenodeindex].leafs[this.currentactiveleafindex].imgsrc;ag[aj].leafs[ai].isactive=true;document.getElementById(ad[ai]).src=ag[aj].leafs[ai].imgactivesrc;for(var ah=0;ah<ag[aj].leafs.length;ah++){if(ah!=ai){document.getElementById(ad[ah]).src=ag[aj].leafs[ah].imgsrc}}}this.setView(ag[aj].leafs[ai].contentdivid);this.currentactivenodeindex=aj;this.currentactiveleafindex=ai},setActiveOfferList:function(ag){W=JSON.stringify(ag)},setActiveSearchList:function(ag){t=JSON.stringify(ag)},setMatches:function(ag){r=JSON.stringify(ag)},setInactiveOfferMatches:function(ag){aa="undefined";aa=JSON.stringify(ag)},setInactiveSearchMatches:function(ag){s="undefined";s=JSON.stringify(ag)},setRide:function(ag){w=JSON.stringify(ag)},setFavoriteList:function(ag){ac=JSON.stringify(ag)},setRatingsSummary:function(ag){e=JSON.stringify(ag)},setOpenRatingsList:function(ag){y=JSON.stringify(ag)},setReceivedRatingsList:function(ag){a=JSON.stringify(ag)},parsesimpleroute:function(ah){var ag=new Array();var ai=$(ah).find("hasroute").text();if(ai!=null&&ai!="undefined"&&typeof ai!="undefined"){if(ai=="true"){$(ah).find("coordinates").each(function(){var ao=$(this).text();var at=ao.split(" ");for(var an=0;an<at.length-1;an++){var aj=at[an];var al=aj.indexOf(",");var ak=aj.substr(0,al);var ap=aj.substr(al+1,aj.length-al+1);var ar=parseFloat(ak);var aq=parseFloat(ap);var am=new google.maps.LatLng(ar,aq);ag.push(am)}});R.setRoutePath(ag);return true}else{showOverlayDialog("No Route Found!","","OK","","","");return false}}},parseUnmatchedRideRequest:function(an){var ao=new StringBuilder();var ar=new StringBuilder();var am=0;for(var ak=0;ak<rideRequests.length;ak++){var aq=JSON.parse(rideRequests[ak]);var aj="orange";var al=new Date();al.setTime(parseInt((aq.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((aq.depDateTimeWindow.depDateTimeHigh),10));if(ag<=(new Date())){continue}var ai=al.getMonth()+1;var ah=al.getMinutes();if(ah<10){ah="0"+ah}var ap=al.getHours();if(ap<10){ap="0"+ap}ar.append('<li><a name="u100'+ak+'"></a>');ar.append('<h3 class="linkslide_0" id="u100'+ak+'" style="border: 2px '+aj+';">');ar.append(al.getDate()+"."+ai+"."+al.getFullYear()+", "+ap+":"+ah+' Hour<br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+aq.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+aq.destinationCity+"</small></h3>");ar.append('<div class="slide_0"></div>');ar.append("</li>")}if(an==0){C.setriderupdatecount(am);document.getElementById(C.activesearchlistdiv).innerHTML=ar.toString()}else{C.setdriverupdatecount(am);document.getElementById(C.activeofferlistdiv).innerHTML=ar.toString()}setupUITabList()},parseactiveofferlist:function(){var ar=new StringBuilder();var aw=new StringBuilder();var ap=0;user=readCookie("username");offerAccessCounter++;for(var an=0;an<rides.length;an++){var av=JSON.parse(rides[an]);var al="";if(av.driver!=user){continue}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length==0&&av.agreedCommuters.length!=0){al="solid green"}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length!=0){al="dotted green"}if(av.rejectedDriver!=""||av.rejectedCommuters!=""){al="solid red"}var ao=new Date();var ag=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag<=(new Date())){continue}var aj=ao.getMonth()+1;var at=ao.getHours();if(at<10){at="0"+at}var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var au=ag.getHours();if(au<10){au="0"+au}var ak=ag.getMinutes();if(ak<10){ak="0"+ak}aw.append('<li><a name="r'+an+'"></a>');aw.append('<h3 class="linkslide_0" id="r'+an+'" style="border: 2px '+al+';">');var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}var am=av.commuters.toString().replace(",",", ");aw.append(aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure: "+at+":"+ai+" - "+au+":"+ak+'<br /><small style="display: block; margin-left: 50px;"><span style="margin-left: -50px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -50px;">End:</span> '+av.destinationCity+'<br /><span style="margin-left: -50px;">Commuters: <strong style="color:black;">'+av.commuters+"</strong></span> </small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}for(var an=0;an<rideRequests.length;an++){if(!rideRequests.hasOwnProperty(an)){continue}var av=JSON.parse(rideRequests[an]);if(av.potentiallyAgreedRidePlans.length!=0||av.driverAgreedRidePlans.length!=0||av.potentialRidePlans.length!=0||av.agreedRidePlan!=""||av.mode=="commuter"){continue}var al="orange";var ao=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag<=(new Date())){continue}var aj=ao.getMonth()+1;var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var at=ao.getHours();if(at<10){at="0"+at}var au=ag.getHours();if(au<10){au="0"+au}var ak=ag.getMinutes();if(ak<10){ak="0"+ak}var ah=rides.length+an;aw.append('<li><a name="u'+ah+'"></a>');aw.append('<h3 class="linkslide_0" id="u'+ah+'" style="border: 2px '+al+';">');var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}aw.append('<small><style="color: black">'+aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure: "+at+":"+ai+" - "+au+":"+ak+'</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+av.destinationCity+"</small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}C.setdriverupdatecount(ap);document.getElementById(C.activeofferlistdiv).innerHTML=aw.toString();setupUITabList()},parseactivesearcheslist:function(){var ax=JSON.parse(t);var ar=new StringBuilder();var aw=new StringBuilder();var ap=0;user=readCookie("username");for(var an=0;an<rides.length;an++){var av=JSON.parse(rides[an]);var am="";if(av.driver==user){continue}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length==0&&av.agreedCommuters.length!=0){am="solid green"}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length!=0){am="dotted green"}if(av.rejectedDriver!=""||av.rejectedCommuters!=""){am="solid red"}var ao=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag<(new Date())){continue}var aj=ao.getMonth()+1;var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var at=ao.getHours();if(at<10){at="0"+at}var au=ag.getHours();if(au<10){au="0"+au}var al=ag.getMinutes();if(al<10){al="0"+al}var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}var ak=av.driver+" ( + "+av.commuters.length+" commuter)";aw.append('<li><a name="r'+an+'"></a>');aw.append('<h3 class="linkslide_0" id="r'+an+'" style="border: 2px '+am+';">');aw.append(aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure: "+at+":"+ai+" - "+au+":"+al+'<br /><small style="display: block; margin-left: 50px;"><span style="margin-left: -50px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -50px;">End:</span> '+av.destinationCity+'<br /><span style="margin-left: -60px;">Driver: </span>&nbsp;&nbsp;&nbsp;&nbsp;'+ak+" </small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}for(var an=0;an<rideRequests.length;an++){if(!rideRequests.hasOwnProperty(an)){continue}var av=JSON.parse(rideRequests[an]);if(av.potentiallyAgreedRidePlans.length!=0||av.driverAgreedRidePlans.length!=0||av.potentialRidePlans.length!=0||av.agreedRidePlan!=""||av.mode=="driver"){continue}var am="orange";var ao=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag<(new Date())){continue}var aj=ao.getMonth()+1;var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var at=ao.getHours();if(at<10){at="0"+at}var au=ag.getHours();if(au<10){au="0"+au}var al=ag.getMinutes();if(al<10){al="0"+al}var ah=rides.length+an;var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}aw.append('<li><a name="u'+ah+'"></a>');aw.append('<h3 class="linkslide_0" id="u'+ah+'" style="border: 2px '+am+';">');aw.append('<small><style="color: black">'+aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure:"+at+":"+ai+" - "+au+":"+al+'</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+av.destinationCity+"</small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}C.setriderupdatecount(ap);document.getElementById(C.activesearchlistdiv).innerHTML=aw.toString();setupUITabList()},parsecompletedtriplist:function(){var ar=new StringBuilder();var aw=new StringBuilder();var ap=0;for(var an=0;an<rides.length;an++){if(!rides.hasOwnProperty(an)){continue}var av=JSON.parse(rides[an]);var am="";if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length==0&&av.agreedCommuters.length!=0){am="solid green"}if(av.agreedDriver!=""&&av.potentiallyAgreedCommuters.length!=0){am="dotted green"}if(av.rejectedDriver!=""||av.rejectedCommuters!=""){am="solid red"}var ao=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag>(new Date())){continue}var aj=ao.getMonth()+1;var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var at=ao.getHours();if(at<10){at="0"+at}var au=ag.getHours();if(au<10){au="0"+au}var al=ag.getMinutes();if(al<10){al="0"+al}var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}var ak=av.driver+" ( + "+av.commuters.length+" commuter)";aw.append('<li><a name="r'+an+'"></a>');aw.append('<h3 class="linkslide_0" id="r'+an+'" style="border: 2px '+am+';">');aw.append(aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure:"+at+":"+ai+" - "+au+":"+al+'<br /><small style="display: block; margin-left: 50px;"><span style="margin-left: -50px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -50px;">End:</span> '+av.destinationCity+'<br /><span style="margin-left: -60px;">Driver: </span>&nbsp;&nbsp;&nbsp;&nbsp;'+ak+" </small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}for(var an=0;an<rideRequests.length;an++){if(!rideRequests.hasOwnProperty(an)){continue}var av=JSON.parse(rideRequests[an]);if(av.mode=="driver"&&usermode==RIDERMODE){continue}if(av.potentiallyAgreedRidePlans.length!=0||av.driverAgreedRidePlans.length!=0||av.potentialRidePlans.length!=0||av.agreedRidePlan!=""||av.mode=="driver"){continue}var am="orange";var ao=new Date();ao.setTime(parseInt((av.depDateTimeWindow.depDateTimeLow),10));var ag=new Date();ag.setTime(parseInt((av.depDateTimeWindow.depDateTimeHigh),10));if(ag>(new Date())){continue}var aj=ao.getMonth()+1;var ai=ao.getMinutes();if(ai<10){ai="0"+ai}var at=ao.getHours();if(at<10){at="0"+at}var au=ag.getHours();if(au<10){au="0"+au}var al=ag.getMinutes();if(al<10){al="0"+al}var ah=rides.length+an;var aq="";switch(ao.getDay()){case 0:aq="Sunday";break;case 1:aq="Monday";break;case 2:aq="Tuesday";break;case 3:aq="Wendesday";break;case 4:aq="Thursday";break;case 5:aq="Friday";break;case 6:aq="Saturday";break}aw.append('<li><a name="u'+ah+'"></a>');aw.append('<h3 class="linkslide_0" id="u'+ah+'" style="border: 2px '+am+';">');aw.append('<small><style="color: black">'+aq+", "+ao.getDate()+"."+aj+"."+ao.getFullYear()+", <br />Departure: "+at+":"+ai+" - "+au+":"+al+'</small><br /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+av.departureCity+'<br /><span style="margin-left: -34px;">End:</span> '+av.destinationCity+"</small></h3>");aw.append('<div class="slide_0"></div>');aw.append("</li>")}C.setriderupdatecount(ap);document.getElementById(C.completedtrips).innerHTML=aw.toString();setupCompletedTripUITabList()},setupViaPtRoute:function(ag){u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+ag+"/route",false,function(al){var at=new Array();if(typeof(al.list)!="undefined"&&typeof(al.list[0].list[0].Coordinate)!="undefined"){for(var am=0;am<al.list[0].list[0].Coordinate.length;am++){var ar=al.list[0].list[0].Coordinate[am];var ah=ar.latititude;var ap=ar.longitude;var aj=new google.maps.LatLng(ah,ap);at.push(aj)}R.setRoutePath(at)}else{showOverlayDialog("No route found!","","OK","","","");return false}var aq=new Array();if(typeof(al.list[0].list[1].Coordinate)!="undefined"){if(typeof(al.list[0].list[1].Coordinate.length)=="undefined"){al.list[0].list[1].Coordinate=[al.list[0].list[1].Coordinate]}for(var am=0;am<al.list[0].list[1].Coordinate.length;am++){var ar=al.list[0].list[1].Coordinate[am];var ai=ar.latititude;var ak=ar.longitude;var ao=new google.maps.LatLng(ai,ak);aq.push(ao)}R.setViaStartPoints(aq)}else{}var an=new Array();if(al.list[0].list[2]){if(typeof(al.list[0].list[2].Coordinate)!="undefined"){if(typeof(al.list[0].list[2].Coordinate.length)=="undefined"){al.list[0].list[2].Coordinate=[al.list[0].list[2].Coordinate]}for(var am=0;am<al.list[0].list[2].Coordinate.length;am++){var ar=al.list[0].list[2].Coordinate[am];var ai=ar.latititude;var ak=ar.longitude;var ao=new google.maps.LatLng(ai,ak);an.push(ao)}R.setViaDestPoints(an)}else{}}fokus.openride.mobclient.controller.modules.modulemanager.setFullScreenMapView("viaptroutegmapscreencontainer");return true},function(){showOverlayDialog("Route could not be determined. Please check your internet connection!","","OK","","","");return false})},parsematcheslist:function(ao,az){var aB=0;if(aB==0){this.myparselist(ao,az)}else{try{var av=JSON.parse(r)}catch(aC){av="undefined"}var ag=new StringBuilder();this.tmpRide="";if(typeof(av.list)!="undefined"&&typeof(av.list[0].MatchResponse)!="undefined"){if(typeof(av.list[0].MatchResponse.length)=="undefined"){av.list[0].MatchResponse=[av.list[0].MatchResponse]}else{av.list[0].MatchResponse=$(av.list[0].MatchResponse).sort(function(aJ,aI){acc_a=aJ.driverState==1&&aJ.riderState==1;acc_b=aI.driverState==1&&aI.riderState==1;rej_a=fokus.openride.mobclient.controller.modules.modulemanager.isrejectedmatch(aJ.driverState,aJ.riderState);rej_b=fokus.openride.mobclient.controller.modules.modulemanager.isrejectedmatch(aI.driverState,aI.riderState);if((acc_a&&acc_b)||(rej_a&&rej_b)){return 0}if(acc_a){return -1}if(acc_b){return 1}if(rej_a){return 1}if(rej_b){return -1}return 0})}for(var aA=0;aA<av.list[0].MatchResponse.length;aA++){var ai=av.list[0].MatchResponse[aA];this.tmpRide=ai;var aj=new Date(ai.matchExpectedStartTime);var ap=aj.getDate();if(ap<10){ap="0"+ap}var aw=aj.getMonth()+1;if(aw<10){aw="0"+aw}var aH=aj.getFullYear();var ar=aj.getHours();if(ar<10){ar="0"+ar}var an=aj.getMinutes();if(an<10){an="0"+an}var aD=ai.matchPriceCents/100;aD=aD.toFixed(2).replace(".",",");var ax=this.isrejectedmatch(ai.driverState,ai.riderState);var at="#fffacd";if(ai.driverState==1&&ai.riderState==1){at="#f0fff0"}else{if(ax){at="#ffe4e1"}}ag.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');if(!ax){ag.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(usermode==DRIVERMODE){ag.append('    <img src="../../OpenRideWeb/img/profile/'+ai.riderNickname+"_"+ai.riderCustId+'_thumb.jpg" alt="Profilbild von '+ai.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{ag.append('    <img src="../../OpenRideWeb/img/profile/'+ai.driverNickname+"_"+ai.driverCustId+'_thumb.jpg" alt="Profilbild von '+ai.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}ag.append("  </div>")}ag.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+at+'; min-width: 85px;">');ag.append('    <form class="ride">');ag.append(this.getMatchStateInfoControls(ai.rideid,ai.riderRouteId,ai.driverState,ai.riderState,az));ag.append("    </form>");ag.append("  </div>");if(!ax){if(usermode==DRIVERMODE){var ay=ai.matchSharedDistanceMeters/1000;ay=round(ay,2);var aq=ai.matchDetourMeters/1000;aq=round(aq,2);var am=ai.startPtAddress;var ak=ai.endPtAddress;if(am.match("^.*:.*$")){am=am.split(":")[1]}if(ak.match("^.*:.*$")){ak=ak.split(":")[1]}ag.append('  <div style="line-height: 150%; padding-left: 75px;">');ag.append("    <strong>"+ai.riderNickname+"</strong> &ndash;<br />");ag.append("    <small>Estimated drving time: "+ar+":"+an+" Hour, driving distance: "+ay+" km, Detour: "+aq+" km, Best offer: "+round(ai.matchPriceCents/100,2)+" &euro;, Anz. Pers.: "+ai.noOfPassengers);if(typeof(ai.riderMobilePhoneNo)!="undefined"){ag.append(', Mobile: <a href="tel:'+ai.riderMobilePhoneNo+'" class="phone">'+ai.riderMobilePhoneNo+"</a>")}ag.append("</small><small><table>");ag.append("<tr>");ag.append('<td valign="top" align="right" style="color:#666666;">Abholort:</td>');ag.append('<td valign="top">'+am+"</td>");ag.append("</tr>");ag.append("<tr>");ag.append('<td valign="top" align="right" style="color:#666666;">End:</td>');ag.append('<td valign="top">'+ak+"</td>");ag.append("</tr>");ag.append("</table></small>");ag.append("  </div>")}else{ag.append(' <div style="line-height: 140%; padding-left: 75px;">');ag.append("   <strong>"+ai.driverNickname+"</strong> &ndash;<br />");ag.append("   <small>Estimated driving time: "+ar+":"+an+" Hour, driving distance: "+round(ai.matchPriceCents/100,2)+" &euro;");if(typeof(ai.driverMobilePhoneNo)!="undefined"){ag.append('<br />Mobile: <a href="tel:'+ai.driverMobilePhoneNo+'" class="phone">'+ai.driverMobilePhoneNo+"</a>");ag.append("<br />Car: "+ai.driverCarBrand+", "+ai.driverCarColour);if(typeof(ai.driverCarBuildYear)!="undefined"&&ai.driverCarBuildYear!=""){ag.append(", Bj. "+ai.driverCarBuildYear)}if(typeof(ai.driverCarPlateNo)!="undefined"&&ai.driverCarPlateNo!=""){ag.append(", Kennz. "+ai.driverCarPlateNo)}}ag.append('</small><br style="clear: both;" />');ag.append(" </div>")}}else{ag.append(' <div style="line-height: 140%;">');if(usermode==DRIVERMODE){ag.append("   <small><strong>"+ai.riderNickname+"</strong></small>")}else{ag.append("   <small><strong>"+ai.driverNickname+"</strong></small>")}ag.append(" </div>")}ag.append("</div>")}}else{ag.clear();if(usermode==DRIVERMODE){ag.append("<p>Unfortunately, no suitable rider was found.</p>")}else{var aF='javascript:href="http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de"';ag.append("<p>Unfortunately, no suitable driver was found.</p>")}}var ah;var aE=ao.replace("r","");var au="javascript:showOverlayDialog('Are you sure you want to delete this trip?', '', '      yes      ', 'fokus.openride.mobclient.controller.modules.modulemanager.deleteRide("+aE+");', '     no     ', '');";ah="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aE+"');";var aG="fokus.openride.mobclient.controller.modules.modulemanager.modifyRide("+aE+")";if((typeof(this.tmpRide.driverState)=="undefined")&&(typeof(this.tmpRide.riderState)=="undefined")){ag.append("<form>");ag.append('  <div style="padding: 5px 0; text-align: center; clear: both;">');if(usermode==DRIVERMODE){ag.append('    <input type="button" class="rounded compact" value="&Auml;ndern" onclick="'+aG+'" style="width: 72px;" />');ag.append('    <input type="button" class="rounded compact" value="L&ouml;schen" onclick="'+au+'" style="width: 80px;" />');ag.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ah+'" style="width: 130px;" />')}else{ag.append('  <a href="http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de">Alternativ &uuml;ber die &Ouml;PNV-Fahrplanauskunft Ba-W&uuml; search</a><br /><br />');ag.append('    <input type="button" class="rounded compact" value="&Auml;ndern" onclick="'+aG+'" style="width: 141px;" />');ag.append('    <input type="button" class="rounded compact" value="L&ouml;schen" onclick="'+au+'" style="width: 141px;" />');var aF="javascript:window.location.href='http://www.efa-bw.de/nvbw/XSLT_TRIP_REQUEST2?language=de'";ag.append('    <br /><br /><input type="button" class="rounded compact" value="Im &Ouml;PNV suchen" onclick="'+aF+'" style="width: 290px;" />');var al="fokus.openride.mobclient.controller.modules.modulemanager.setFullScreenMapView('searchroutegmapscreencontainer');";ag.append('  <div style="padding: 5px 0; text-align: center;">');ag.append('    <input type="button" class="rounded compact" value="Abholpunkt anzeigen" onclick="'+al+'" style="width: 290px;" />');ag.append("  </div>")}ag.append("  </div>");ag.append("</form>")}else{aE=ao.replace("r","");ah="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aE+"');";if(usermode==DRIVERMODE){ag.append('  <div style="padding: 5px 0; text-align: center;">');ag.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ah+'" style="width: 290px;" />');ag.append("  </div>")}}if(az){F=az}F[0].innerHTML=ag.toString();if(F.prev("h3").is(".updated")){F.prev("h3").removeClass("updated");F.prev("h3").find("span.update").remove();if(usermode==DRIVERMODE){this.reducedriverupdatecount()}else{this.reduceriderupdatecount()}}}},myparselist:function(an,aw){var aq;user=readCookie("username");pass=readCookie("password");var au=false;var az=new StringBuilder();var ai=parseInt(an.substring(1));var av=ai;if(an.charAt(0)=="u"){au=true}else{aq=JSON.parse(rides[av])}var ar="#fffacd";var am="myaccept('"+av+"')";var ak="myreject('"+av+"')";var al="";az.append('<div class="matching-row" style="padding: 12px; border-top: 1px solid #e2e2e2;">');az.append('  <div class="profile-info-short" style="margin: 0 10px 0 0; float: left; text-align: right; ">');az.append("    <small>"+100+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>');az.append("  </div>");az.append('  <div style="margin: -5px -5px 3px 0; padding: 5px 5px 0px 5px; float: right; text-align: center; background: '+ar+'; min-width: 85px;">');az.append('    <form class="ride">');if(!au){var ap=$.inArray(user,aq.potentiallyAgreedCommuters);var ao=$.inArray(user,aq.agreedCommuters);if(usermode==DRIVERMODE&&aq.agreedDriver==""){az.append('<small>Take this ride?</small><br><input type="button" class="rounded compact" value="Accept" onclick="'+am+'" /><br><input type="button" class="rounded compact" value="Reject" onclick="'+ak+'" />')}else{if(usermode==RIDERMODE&&aq.agreedDriver!=""&&ap>-1){az.append('<small>Take this ride?</small><br><input type="button" class="rounded compact" value="Accept" onclick="'+am+'" /><br><input type="button" class="rounded compact" value="Reject" onclick="'+ak+'" />')}else{if(aq.agreedDriver!=""&&aq.potentiallyAgreedCommuters.length==0){az.append("<small>Ride booked! </small>")}else{if((aq.agreedDriver==""&&aq.potentiallyAgreedDriver=="")||(aq.agreedCommuters.length==0&&aq.potentiallyAgreedCommuters.length==0)){az.append("<small>Ride rejected! </small>")}else{if(usermode==DRIVERMODE){az.append("<small>Waiting for confirmation of commuters! </small>")}else{az.append("<small>Waiting for confirmation of driver! </small>")}}}}}}else{aq=JSON.parse(rideRequests[av-rides.length]);az.append("<small>No matches found for this ride! </small><br>");az.append('<input type="button" class="rounded compact" value="Delete Ride" onclick="rideDelete('+av+')" />')}az.append("    </form>");az.append("  </div>");var aj="";if(usermode==DRIVERMODE){aj=aq.commuters}else{aj=aq.driver}if(typeof aj==="undefined"){aj="none"}if(usermode==DRIVERMODE){az.append('  <div style="line-height: 150%; padding-left: 75px;">Commuters:<br/>')}else{az.append('  <div style="line-height: 150%; padding-left: 75px;">Driver:<br/>')}var ag;var ay;aj=aj.toString();var ah=aj.split(",");for(var ax=0;ax<ah.length;ax++){var at=ah[ax];if(at=="none"){az.append('<input type="button" class="rounded compact" value="'+at+'" />');continue}$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/subject/byURI/"+at,async:false,crossDomain:true,username:user,password:pass,beforeSend:function(aA){aA.withCredentials=true;aA.setRequestHeader("Authorization","Basic "+user+":"+pass)},accepts:"application/json",dataType:"json",success:function(aC,aD,aB){if(typeof(aC.currentReputationReport)=="undefined"||(typeof(aC.versionInfo)=="undefined"||aC.versionInfo["previousVersion"]=="none")){az.append('<input type="button" class="rounded compact" onclick="showOverlayDialog(\'Rating For '+at+"', 'No Rating Avialble', 'X', '', '', '');\" value=\""+at+'" />')}else{var aA;$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+at+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aE){aE.withCredentials=true,aE.setRequestHeader("Authorization","Basic "+this.username+":"+pass);aE.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aE.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aF,aG,aE){aA=aF},error:function(aG,aF,aE){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aG,aF,aE,"Unfortunately, your profile information could not be loaded.")}});$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/"+aC.currentReputationReport["uri"],async:false,crossDomain:true,username:user,password:pass,beforeSend:function(aE){aE.withCredentials=true;aE.setRequestHeader("Authorization","Basic "+user+":"+pass)},accepts:"application/json",dataType:"json",success:function(aG,aH,aF){var aE=aA.mobilePhoneNumber;alert(aE);if(usermode==RIDERMODE){az.append('<input type="button" class="rounded compact" onclick="showRatingDialog(\''+at+"',"+aG.json.average_StarRating+","+(aG.json.total_StarRating/aG.json.average_StarRating)+","+aG.json.average_OnTime+","+aG.json.average_Friendly+",'"+aA.mobilePhoneNumber+"','"+aA.carColour+" "+aA.carBrand+'\');" value="'+at+'" />')}else{az.append('<input type="button" class="rounded compact" onclick="showRatingDialog(\''+at+"',"+aG.json.average_StarRating+","+(aG.json.total_StarRating/aG.json.average_StarRating)+","+aG.json.average_OnTime+","+aG.json.average_Friendly+",'"+aA.mobilePhoneNumber+"','undefined undefined');\" value=\""+at+'" />')}},error:function(aG,aF,aE){az.append('<input type="button" class="rounded compact" value="'+at+'" />')}})}},error:function(aC,aB,aA){az.append('<input type="button" class="rounded compact" value="'+at+'" />')}})}az.append("</small><small><table>");if(usermode==DRIVERMODE){az.append("<tr>");az.append('<td valign="top" align="right" style="color:#666666;">Price:</td>');if(typeof(aq.priceBound)=="undefined"){az.append('<td valign="top">'+aq.priceRange[0]+" &#8362;</td>")}else{az.append('<td valign="top">'+aq.priceBound+" &#8362;</td>")}az.append("</tr>")}else{if(usermode==RIDERMODE&&(!au)){az.append("<tr>");az.append('<td valign="top" align="right" style="color:#666666;">Price:</td>');if(typeof(aq.priceBound)=="undefined"){az.append('<td valign="top">'+aq.priceRange[0]+" &#8362;</td>")}else{az.append('<td valign="top">'+aq.priceBound+" &#8362;</td>")}az.append("</tr>")}}az.append("<tr>");az.append('<td valign="top" align="right" style="color:#666666;">Smoking:</td>');az.append('<td valign="top">'+aq.smoking+"</td>");az.append("</tr>");az.append("<tr>");az.append('<td valign="top" align="right" style="color:#666666;">Pets:</td>');az.append('<td valign="top">'+aq.pets+"</td>");az.append("</tr>");az.append("</table></small>");az.append("  </div>");if(aw){F=aw}F[0].innerHTML=az.toString()},parseinactivematcheslist:function(an,ax){var ag=new StringBuilder();this.tmpRide="";if(usermode==DRIVERMODE){var ao="";try{ao=JSON.parse(aa)}catch(aA){ao="undefined"}if(typeof(ao.list)!="undefined"&&typeof(ao.list[0].MatchResponse)!="undefined"){if(typeof(ao.list[0].MatchResponse.length)=="undefined"){ao.list[0].MatchResponse=[ao.list[0].MatchResponse]}for(var az=0;az<ao.list[0].MatchResponse.length;az++){var ai=ao.list[0].MatchResponse[az];this.tmpRide=ai;var aj=new Date(ai.matchExpectedStartTime);var ap=aj.getDate();if(ap<10){ap="0"+ap}var au=aj.getMonth()+1;if(au<10){au="0"+au}var aD=aj.getFullYear();var ar=aj.getHours();if(ar<10){ar="0"+ar}var am=aj.getMinutes();if(am<10){am="0"+am}var aB=ai.matchPriceCents/100;aB=aB.toFixed(2).replace(".",",");var av=this.isrejectedmatch(ai.driverState,ai.riderState);var at="#fffacd";if(ai.driverState==1&&ai.riderState==1){at="#f0fff0"}else{if(av){at="#ffe4e1"}}ag.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');if(ai.riderNickname){ag.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(ai.riderNickname){ag.append('    <img src="../../OpenRideWeb/pictures/profile/'+ai.riderNickname+"_"+ai.riderCustId+'_thumb.jpg" alt="Profilbild von '+ai.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{ag.append('    <img src="../../OpenRideWeb/pictures/profile/'+ai.driverNickname+"_"+ai.driverCustId+'_thumb.jpg" alt="Profilbild von '+ai.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}ag.append("  </div>")}ag.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+at+'; min-width: 85px;">');ag.append('    <form class="ride">');ag.append(this.getRatingStateInfoControls(ai.riderRouteId));ag.append("    </form>");ag.append("  </div>");if(ai.riderNickname){var aw=ai.matchSharedDistanceMeters/1000;aw=round(aw,2);var aq=ai.matchDetourMeters/1000;aq=round(aq,2);var al=ai.startPtAddress;var ak=ai.endPtAddress;if(al.match("^.*:.*$")){al=al.split(":")[1]}if(ak.match("^.*:.*$")){ak=ak.split(":")[1]}ag.append('  <div style="line-height: 150%; padding-left: 75px;">');ag.append("    <strong>"+ai.riderNickname+"</strong> &ndash;<br />");ag.append("    <small>"+ar+":"+am+" Uhr, Mitnahmestrecke: "+aw+" km, Umweg: "+aq+" km, Preisvorschlag: "+round(ai.matchPriceCents/100,2)+" &euro;, Anz. Pers.: "+ai.noOfPassengers);if(typeof(ai.riderMobilePhoneNo)!="undefined"){ag.append(', Handy: <a href="tel:'+ai.riderMobilePhoneNo+'" class="phone">'+ai.riderMobilePhoneNo+"</a>")}ag.append("</small><small><table>");ag.append("<tr>");ag.append('<td valign="top" align="right" style="color:#666666;">Pick-up Point:</td>');ag.append('<td valign="top">'+al+"</td>");ag.append("</tr>");ag.append("<tr>");ag.append('<td valign="top" align="right" style="color:#666666;">End:</td>');ag.append('<td valign="top">'+ak+"</td>");ag.append("</tr>");ag.append("</table></small>");ag.append("  </div>")}else{ag.append(' <div style="line-height: 140%; padding-left: 75px;">');ag.append("   <strong>"+ai.driverNickname+"</strong> &ndash;<br />");ag.append("   <small>"+ar+":"+am+" Uhr");if(typeof(ai.driverMobilePhoneNo)!="undefined"){ag.append('<br />Handy: <a href="tel:'+ai.driverMobilePhoneNo+'" class="phone">'+ai.driverMobilePhoneNo+"</a>");ag.append("<br />Auto: "+ai.driverCarBrand+", "+ai.driverCarColour);if(typeof(ai.driverCarBuildYear)!="undefined"&&ai.driverCarBuildYear!=""){ag.append(", Bj. "+ai.driverCarBuildYear)}if(typeof(ai.driverCarPlateNo)!="undefined"&&ai.driverCarPlateNo!=""){ag.append(", Kennz. "+ai.driverCarPlateNo)}}ag.append('</small><br style="clear: both;" />');ag.append(" </div>")}ag.append("</div>")}}else{}}else{if(usermode==RIDERMODE){var ay="";try{ay=JSON.parse(s)}catch(aA){ay="undefined"}if(typeof(ay.list)!="undefined"&&typeof(ay.list[0].MatchResponse)!="undefined"){if(typeof(ay.list[0].MatchResponse.length)=="undefined"){ay.list[0].MatchResponse=[ay.list[0].MatchResponse]}for(var az=0;az<ay.list[0].MatchResponse.length;az++){var ai=ay.list[0].MatchResponse[az];this.tmpRide=ai;var aj=new Date(ai.matchExpectedStartTime);var ap=aj.getDate();if(ap<10){ap="0"+ap}var au=aj.getMonth()+1;if(au<10){au="0"+au}var aD=aj.getFullYear();var ar=aj.getHours();if(ar<10){ar="0"+ar}var am=aj.getMinutes();if(am<10){am="0"+am}var aB=ai.matchPriceCents/100;aB=aB.toFixed(2).replace(".",",");var av=this.isrejectedmatch(ai.driverState,ai.riderState);var at="#fffacd";if(ai.driverState==1&&ai.riderState==1){at="#f0fff0"}else{if(av){at="#ffe4e1"}}ag.append('<div class="matching-row" style="padding: 5px; border-top: 1px solid #e2e2e2;">');ag.append('  <div class="profile-info-short" style="margin: 0 15px 0 0; float: left; text-align: right;">');if(ai.riderNickname){ag.append('    <img src="../../OpenRideWeb/pictures/profile/'+ai.riderNickname+"_"+ai.riderCustId+'_thumb.jpg" alt="Profilbild von '+ai.riderNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.riderRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}else{ag.append('    <img src="../../OpenRideWeb/pictures/profile/'+ai.driverNickname+"_"+ai.driverCustId+'_thumb.jpg" alt="Profilbild von '+ai.driverNickname+'" style="background: rgb(221, 221, 221); width: 60px; height: 60px; display: block; margin: 0 0 3px 0;" /><small>'+ai.driverRatingsRatioPercent+'% <img src="../img/rated_1.png" style="vertical-align: -3px;" /></small>')}ag.append("  </div>");ag.append('  <div style="margin: -5px -5px 3px 0; padding: 1px 5px 0px 5px; float: right; text-align: center; background: '+at+'; min-width: 85px;">');ag.append('    <form class="ride">');ag.append(this.getRatingStateInfoControls(ai.riderRouteId));ag.append("    </form>");ag.append("  </div>");if(ai.riderNickname){var aw=ai.matchSharedDistanceMeters/1000;aw=round(aw,2);var aq=ai.matchDetourMeters/1000;aq=round(aq,2);ag.append('  <div style="line-height: 150%; padding-left: 75px;">');ag.append("    <strong>"+ai.riderNickname+"</strong> &ndash;<br />");ag.append("    <small>"+ar+":"+am+" Uhr, Strecke: "+aw+" km, Umweg: "+aq+" km, Preisvorschlag: "+round(ai.matchPriceCents/100,2)+" &euro;");if(typeof(ai.riderMobilePhoneNo)!="undefined"){ag.append(', Handy: <a href="tel:'+ai.riderMobilePhoneNo+'" class="phone">'+ai.riderMobilePhoneNo+"</a>")}ag.append('</small><br style="clear: right;" /><small style="display: block; margin-left: 34px;"><span style="margin-left: -34px;">Start:</span> '+ai.startPtAddress+'<br /><span style="margin-left: -34px;">End:</span> '+ai.endPtAddress+"</small>");ag.append("  </div>")}else{ag.append(' <div style="line-height: 140%; padding-left: 75px;">');ag.append("   <strong>"+ai.driverNickname+"</strong> &ndash;<br />");ag.append("   <small>"+ar+":"+am+" Uhr, Preisvorschlag: "+round(ai.matchPriceCents/100,2)+" &euro;");if(typeof(ai.driverMobilePhoneNo)!="undefined"){ag.append('<br />Handy: <a href="tel:'+ai.driverMobilePhoneNo+'" class="phone">'+ai.driverMobilePhoneNo+"</a>");ag.append("<br />Auto: "+ai.driverCarBrand+", "+ai.driverCarColour);if(typeof(ai.driverCarBuildYear)!="undefined"&&ai.driverCarBuildYear!=""){ag.append(", Bj. "+ai.driverCarBuildYear)}if(typeof(ai.driverCarPlateNo)!="undefined"&&ai.driverCarPlateNo!=""){ag.append(", Kennz. "+ai.driverCarPlateNo)}}ag.append('</small><br style="clear: both;" />');ag.append(" </div>")}ag.append("</div>")}}else{ag.clear();ag.append("")}}}var ah;if((typeof(this.tmpRide.driverState)=="undefined")&&(typeof(this.tmpRide.riderState)=="undefined")&&(usermode!=RIDERMODE)){var aC=an.replace("r","");ah="javascript:fokus.openride.mobclient.controller.modules.modulemanager.setupViaPtRoute('"+aC+"');";ag.append("<form>");ag.append('  <div style="padding: 5px 0; text-align: center; clear: both;">');ag.append('    <input type="button" class="rounded compact" value="Route anzeigen" onclick="'+ah+'" style="width: 290px;" />');ag.append("  </div>");ag.append("</form>")}if(ax){F=ax}F[0].innerHTML=ag.toString()},isrejectedmatch:function(ag,ah){return(ag==0||ag==2||ag==3||ah==0||ah==2||ah==3)},getMatchStateInfoControls:function(ai,aj,ah,al,ak){var ag="";if(ah==1&&al==1){ag="<small>Fahrt gebucht!</small>"}else{if(ah==2||al==2){if(usermode==DRIVERMODE){if(ah==2){ag="<small>Storniert</small>"}else{ag="<small>Hat storniert</small>"}}else{if(usermode==RIDERMODE){if(al==2){ag="<small>Storniert</small>"}else{ag="<small>Hat storniert</small>"}}}}else{if(ah==3||al==3){if(usermode==DRIVERMODE){if(ah==3){ag="<small>Ausgebucht</small>"}else{ag="<small>Schon vergeben</small>"}}else{if(usermode==RIDERMODE){if(al==3){ag="<small>Schon vergeben</small>"}else{ag="<small>Ausgebucht</small>"}}}}else{if(ah==0||al==0){if(usermode==DRIVERMODE){if(ah==0){ag="<small>Abgelehnt</small>"}else{ag="<small>Hat abgelehnt</small>"}}else{if(usermode==RIDERMODE){if(al==0){ag="<small>Abgelehnt</small>"}else{ag="<small>Hat abgelehnt</small>"}}}}else{if(usermode==DRIVERMODE){acceptOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+ai+"/matches/"+aj+"/accept', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+ai+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This inquiry is sadly no longer available.')})";rejectOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+ai+"/matches/"+aj+"/reject', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+ai+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This inquiry is sadly no longer available.')})";if(al==1){ag='<small>Will mitfahren</small><br /><input type="button" class="adjustleft" value="Annehmen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{if(ah==1){ag='<small>Angefragt</small><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{ag='<input type="button" value="Anfragen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}}}else{if(usermode==RIDERMODE){acceptOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+aj+"/matches/"+ai+"/accept', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+ai+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This ride offer is sadly no longer available.')})";rejectOnClickAction="fokus.openride.mobclient.controller.serverconnector.PUTaction('/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+aj+"/matches/"+ai+"/reject', false, function() {fokus.openride.mobclient.controller.modules.modulemanager.receiveMatches('r"+ai+"', false)}, function(x,s,e) { fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,s,e,'This ride offer is sadly no longer available.')})";if(al==1){ag='<small>Angefragt</small><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{if(ah==1){ag='<small>Bietet Fahrt an</small><br /><input type="button" value="Buchen" onclick="'+acceptOnClickAction+'" /><br /><input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}else{ag='<input type="button" value="Anfragen" onclick="'+acceptOnClickAction+'" /><br /> <input type="button" value="Ablehnen" onclick="'+rejectOnClickAction+'" />'}}}}}}}}return ag},getRatingStateInfoControls:function(ak){var ah="";try{ah=JSON.parse(y)}catch(al){ah=""}var ag="";rateOnClickAction="fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(2, 1)";if(typeof(ah.list[0].OpenRatingResponse)!="undefined"){if(typeof(ah.list[0].OpenRatingResponse.length)=="undefined"){ah.list[0].OpenRatingResponse=[ah.list[0].OpenRatingResponse]}for(var ai=0;ai<ah.list[0].OpenRatingResponse.length;ai++){var aj=ah.list[0].OpenRatingResponse[ai];if(aj.riderRouteId==ak){ag='<input type="button" value="Bewerten" onclick="'+rateOnClickAction+'" />'}}}return ag},receiveMatches:function(ag,ah){if(usermode==DRIVERMODE){}else{}this.parsematcheslist(ag,ah)},receiveInactiveMatches:function(ag,ah){if(usermode==DRIVERMODE){u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+ag.replace("r","")+"/matches",false,this.setInactiveOfferMatches,function(ai,aj,ak){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ai,aj,ak,"This ride offer is no longer available.")})}else{if(usermode==RIDERMODE){u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+ag.replace("r","")+"/matches",false,this.setInactiveSearchMatches,function(ai,aj,ak){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ai,aj,ak,"This offer is no longer available.")})}}this.parseinactivematcheslist(ag,ah)},receiveUpdates:function(){u.GET("/OpenRideServer-RS/resources/configuration/updates",false,function(ag){fokus.openride.mobclient.controller.modules.modulemanager.setriderupdatecount(ag.UpdateResponse.updatedsearches);fokus.openride.mobclient.controller.modules.modulemanager.setdriverupdatecount(ag.UpdateResponse.updatedoffers)},function(ag,ah,ai){clearInterval(updateCountRefreshTimer);fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ag,ah,ai,"Error receiving update data.")})},getServiceType:function(){return x},setServiceType:function(ag){x=ag},getRideId:function(){return v},deleteModAdrFromBox:function(ai){var ah=document.getElementById(ai);if(ah.length>0){for(var ag=0;ag<ah.length;ag++){if(ah[ag].mod){ah[ag]=null}}}},modifyRide:function(at){var au=this.tmpRide;v=at;var av;var ah;var al;var ap;var ai;var aq;var ao;var ag;var ar;var am;this.deleteModAdrFromBox(I);this.deleteModAdrFromBox(z);this.deleteModAdrFromBox(p);this.deleteModAdrFromBox(m);if(usermode==DRIVERMODE){if(au!=""){at=au.rideid}u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+at,false,this.setRide,function(aw,ax,ay){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aw,ax,ay,"Sorry, the offer to edit could not be loaded from the server.")});var ak=JSON.parse(w).Offer;av=document.createElement("option");ah=document.getElementById(I);av.latln=ak.ridestartPtLat+","+ak.ridestartPtLon;av.innerHTML=ak.startptAddress;av.mod=true;ah.add(av,null);ah.selectedIndex=ah.length-1;al=document.createElement("option");ap=document.getElementById(z);al.latln=ak.rideendPtLat+","+ak.rideendPtLon;al.innerHTML=ak.endptAddress;al.mod=true;ap.add(al,null);ap.selectedIndex=ap.length-1;document.getElementById("offerseatsselect").selectedIndex=ak.offeredSeatsNo-1;switch(ak.rideprice){case 1.8:document.getElementById("offerpriceselect").selectedIndex=0;break;case 1.9:document.getElementById("offerpriceselect").selectedIndex=1;break;case 2:document.getElementById("offerpriceselect").selectedIndex=2;break;case 2.1:document.getElementById("offerpriceselect").selectedIndex=3;break;case 2.2:document.getElementById("offerpriceselect").selectedIndex=4;break;case 2.3:document.getElementById("offerpriceselect").selectedIndex=5;break}ai=new Date(ak.ridestartTime);aq=ai.getDate();if(aq<10){aq="0"+aq}ao=ai.getMonth()+1;if(ao<10){ao="0"+ao}ag=ai.getFullYear();ar=ai.getHours();if(ar<10){ar="0"+ar}am=ai.getMinutes();if(am<10){am="0"+am}document.getElementById("dayLabel").innerHTML=aq;document.getElementById("monthLabel").innerHTML=ao;document.getElementById("yearLabel").innerHTML=ag;document.getElementById("hourLabel").innerHTML=ar;document.getElementById("minuteLabel").innerHTML=am;U.setDay(ai.getDate());U.setMin(ai.getMinutes());U.setHour(ai.getHours());U.setMonth(ai.getMonth());U.setYear(ai.getFullYear())}else{if(au!=""){at=au.riderRouteId}u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+at,false,this.setRide,function(aw,ax,ay){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aw,ax,ay,"Sorry, the ad you want to edit could not be loaded from the server.")});var an=JSON.parse(w).Search;av=document.createElement("option");ah=document.getElementById(p);av.latln=an.ridestartPtLat+","+an.ridestartPtLon;av.innerHTML=an.startptAddress;av.mod=true;ah.add(av,null);ah.selectedIndex=ah.length-1;al=document.createElement("option");ap=document.getElementById(m);al.latln=an.rideendPtLat+","+an.rideendPtLon;al.innerHTML=an.endptAddress;al.mod=true;ap.add(al,null);ap.selectedIndex=ap.length-1;var aj=((an.ridestartTimeLatest-an.ridestartTimeEarliest)/1000)/60;switch(aj){case 10:document.getElementById("searchwaitimeselect").selectedIndex=0;break;case 15:document.getElementById("searchwaitimeselect").selectedIndex=1;break;case 20:document.getElementById("searchwaitimeselect").selectedIndex=2;break;case 30:document.getElementById("searchwaitimeselect").selectedIndex=3;break;case 45:document.getElementById("searchwaitimeselect").selectedIndex=4;break;case 60:document.getElementById("searchwaitimeselect").selectedIndex=5;break;case 120:document.getElementById("searchwaitimeselect").selectedIndex=6;break;case 180:document.getElementById("searchwaitimeselect").selectedIndex=7;break;case 240:document.getElementById("searchwaitimeselect").selectedIndex=8;break}document.getElementById("searchseatsselect").selectedIndex=an.searchedSeatsNo-1;ai=new Date(an.ridestartTimeEarliest);aq=ai.getDate();if(aq<10){aq="0"+aq}ao=ai.getMonth()+1;if(ao<10){ao="0"+ao}ag=ai.getFullYear();ar=ai.getHours();if(ar<10){ar="0"+ar}am=ai.getMinutes();if(am<10){am="0"+am}document.getElementById("searchdayLabel").innerHTML=aq;document.getElementById("searchmonthLabel").innerHTML=ao;document.getElementById("searchyearLabel").innerHTML=ag;document.getElementById("searchhourLabel").innerHTML=ar;document.getElementById("searchminuteLabel").innerHTML=am;U.setDay(ai.getDate());U.setMin(ai.getMinutes());U.setHour(ai.getHours());U.setMonth(ai.getMonth());U.setYear(ai.getFullYear())}x=E;this.setTabContent(1,0)},deleteRide:function(ag){if(usermode==DRIVERMODE){u.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/"+ag,false,showOverlayDialog("Your offer was successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI"),"",""),function(ah,ai,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ah,ai,aj,"Sorry, the offer could not be deleted.")});fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI")}else{u.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/"+ag,false,showOverlayDialog("Your request has been successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI"),"",""),function(ah,ai,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ah,ai,aj,"Unfortunately, this request could not be deleted.")});fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI")}},setFullScreenMapView:function(aj){var al=document.getElementById(aj);document.getElementById("tabmenu").style.display="none";document.getElementById("content").style.display="none";al.style.display="block";var ai=k.getUserLocation();if(ai==null){ai=new google.maps.LatLng(52.525798,13.314266)}else{var am=ai;ai=new google.maps.LatLng(am.coords.latitude,am.coords.longitude)}if(aj=="offerstartgmapscreencontainer"){R.setMapMode(0);R.initialize("offerstartgmap","offerstartgmapaddressinput",ai)}else{if(aj=="offerdestgmapscreencontainer"){R.setMapMode(0);R.initialize("offerdestgmap","offerdestgmapaddressinput",ai)}else{if(aj=="searchstartgmapscreencontainer"){R.setMapMode(0);R.initialize("searchstartgmap","searchstartgmapaddressinput",ai)}else{if(aj=="searchdestgmapscreencontainer"){R.setMapMode(0);R.initialize("searchdestgmap","searchdestgmapaddressinput",ai)}else{if(aj=="offerroutegmapscreencontainer"){R.setMapMode(1);if(!(document.getElementById("dummyaddrinput"))){var ak=document.createElement("div");ak.id="dummyaddrinput"}var ah=R.getRoutePath();var ag;if(ah!=null&&ah!="undefined"){if(ah.length>=2){R.initialize("offerroutegmap","dummyaddrinput",ah[0])}else{showOverlayDialog("Get Directions","<br />The route can not currently be determined! Please check your Internet connection and try again!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aj=="searchroutegmapscreencontainer"){R.setMapMode(1);if(!(document.getElementById("dummyaddrinput"))){var ak=document.createElement("div");ak.id="dummyaddrinput"}var ah=R.getRoutePath();var ag;if(ah!=null&&ah!="undefined"){if(ah.length>=2){R.initialize("searchroutegmap","dummyaddrinput",ah[0])}else{showOverlayDialog("Get Directions","<br />The route can not currently be determined! Please check your Internet connection and try again!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aj=="viaptroutegmapscreencontainer"){R.setMapMode(2);if(!(document.getElementById("dummyaddrinput"))){var ak=document.createElement("div");ak.id="dummyaddrinput"}var ah=R.getRoutePath();var ag;if(ah!=null&&ah!="undefined"){if(ah.length>=2){R.initialize("viaptroutegmap","dummyaddrinput",ah[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aj=="favoritesgmapscreencontainer"){R.setMapMode(0);R.initialize("favoritesgmap","favoritesgmapaddressinput",ai)}}}}}}}}this.displayedFullScreenMapId=aj},returnFromFullscreenMapView:function(){document.getElementById(this.displayedFullScreenMapId).style.display="none";document.getElementById("tabmenu").style.display="block";document.getElementById("content").style.display="block"},parsefavoriteslist:function(ai,an){var ao=JSON.parse(an);var ag="";d=new Array();if(typeof(ao.list[0].FavoritePointResponse)!="undefined"){if(typeof(ao.list[0].FavoritePointResponse.length)=="undefined"){ao.list[0].FavoritePointResponse=[ao.list[0].FavoritePointResponse]}for(var ah=0;ah<ao.list[0].FavoritePointResponse.length;ah++){var al=ao.list[0].FavoritePointResponse[ah];var am=al.favptDisplayName;d.push(am);var aj=al.favptAddress;var ak=al.favptId;ag+="<div class='fav-row' style='border-bottom: 1px solid #ccc; padding: 5px;'><div style='float: right; margin: 2px 0px 0 0;'><input type=\"button\" class=\"rounded compact\" onclick=\"showOverlayDialog('Really want to delete this bookmark?', '', 'Ja', 'fokus.openride.mobclient.controller.modules.modulemanager.deleteFavPt("+ah+");', 'Nein', '');\" value=\"X\" /></div><div style='line-height: 140%'><strong>"+am+"</strong><br />"+aj+"</div></div>"}}else{ag="<span style='font-weight:bold;padding:10px;'>No favorites to show!</span>"}document.getElementById(ai).innerHTML=ag},deleteFavPt:function(ag){u.DELETE("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints/"+encodeURI($("<div />").html(d[ag]).text()),true,function(){fokus.openride.mobclient.controller.modules.modulemanager.setView("favlistUI")},function(ah,ai,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ah,ai,aj,"Unfortunately, the favorite could not be deleted.")})},putprofilepicture:function(){var ag=new FileReader();var ah={};ag.readAsDataURL(document.querySelector("input[type=file]").files[0]);ag.onloadend=function(ai){ah.picture=ai.target.result;ah.type=document.querySelector("input[type=file]").files[0].type;$.ajax({type:"GET",accepts:"application/json",url:"http://168.144.202.152:3002/users/"+username+"/profile/picture",beforeSend:function(aj){aj.withCredentials=true;aj.setRequestHeader("Authorization","Basic "+username+":"+password);aj.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aj.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},dataType:"json",username:username,password:password,crossDomain:true,async:false,success:function(ak,am,aj){var al={};al.pic=ak;al.type=al.pic.type;ah._revision=al.pic._revision+1;ah._id=af.getProfileRequest()._id;$.ajax({type:"PUT",url:"http://"+PeerMenager+"/users/"+username+"/profile/picture",data:JSON.stringify(ah),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,processData:false,beforeSend:function(an){an.withCredentials=true,an.setRequestHeader("Authorization","Basic "+username+":"+password);an.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");an.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ao,ap,an){showOverlayDialog("Personal data was saved successfully!","","OK","","","")},error:function(ap,ao,an){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ap,ao,an,"Unfortunately, your data could not be stored.")}})},error:function(aj,al,ak){alert("Could not retrieve image, setting default picture!")}})};ag.onerror=function(ai){alert("Error "+ai+" occurred! Now what?")};ag.onabort=function(ai){alert("File read cancelled")}},putprofileicture:function(){$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/picture",data:JSON.stringify(af.getProfileRequest()),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ag){ag.withCredentials=true,ag.setRequestHeader("Authorization","Basic "+username+":"+password);ag.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ag.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ah,ai,ag){ah._revision=ah._revision+1;ah.picture=document.getElementById("profilepicturefile").value;$.ajax({type:"PUT",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/picture",data:JSON.stringify(ah),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(aj){aj.withCredentials=true,aj.setRequestHeader("Authorization","Basic "+username+":"+password);aj.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aj.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ak,al,aj){showOverlayDialog("Profile picture was saved successfully!","","OK","","","")},error:function(al,ak,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(al,ak,aj,"Unfortunately, your data could not be stored.")}})},error:function(ai,ah,ag){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ai,ah,ag,"Unfortunately, your data could not be stored.")}})},parseprofilepersonaldata:function(ah){var aj=af.getProfileRequest();Y=af;document.getElementById("profilepersonaldatafirstname").innerHTML=aj.firstName;document.getElementById("profilepersonaldatalastname").innerHTML=aj.lastName;if(aj.gender=="m"){genderString="male"}else{genderString="female"}document.getElementById("profilepersonaldatagender").innerHTML=genderString;var ai;var ag="";if(typeof(aj.dateOfBirth)!="undefined"&&aj.dateOfBirth.indexOf("/")!=-1&&aj.dateOfBirth!="01/01/1800"){ai=new Date(aj.dateOfBirth);ag=ai.toLocaleDateString()}else{ag=""}document.getElementById("profilepersonaldatadateofbirth").value=ag;document.getElementById("profilepersonaldataemail").value=$("<div />").html(aj.email).text();document.getElementById("profilepersonaldatamobilephonenumber").value=aj.mobilePhoneNumber||"";if(aj.streetAddress){document.getElementById("profilepersonaldatastreetaddress").value=$("<div />").html(aj.streetAddress).text()||""}document.getElementById("profilepersonaldatazipcode").value=aj.zipCode||"";if(aj.city){document.getElementById("profilepersonaldatacity").value=$("<div />").html(aj.city).text()||""}if(aj.isSmoker=="n"){isSmokerOption="profilepersonaldataissmoker-no"}else{if(aj.isSmoker=="y"){isSmokerOption="profilepersonaldataissmoker-yes"}else{isSmokerOption="profilepersonaldataissmoker-null"}}document.getElementById(isSmokerOption).checked="checked";if(aj.carColour){document.getElementById("profilepersonaldatacarcolour").value=$("<div />").html(aj.carColour).text()||""}if(aj.carBrand){document.getElementById("profilepersonaldatacarbrand").value=$("<div />").html(aj.carBrand).text()||""}if(aj.carPlateNo){document.getElementById("profilepersonaldatacarplateno").value=$("<div />").html(aj.carPlateNo).text()||""}document.getElementById("profilepersonaldatadateofbirth").value=ag;document.getElementById("profilepersonaldataemail").value=$("<div />").html(aj.email).text();document.getElementById("profilepersonaldatamobilephonenumber").value=aj.mobilePhoneNumber||"";if(aj.streetAddress){document.getElementById("profilepersonaldatastreetaddress").value=$("<div />").html(aj.streetAddress).text()||""}document.getElementById("profilepersonaldatazipcode").value=aj.zipCode||"";if(aj.city){document.getElementById("profilepersonaldatacity").value=$("<div />").html(aj.city).text()||""}if(aj.isSmoker=="n"){isSmokerOption="profilepersonaldataissmoker-no"}else{if(aj.isSmoker=="y"){isSmokerOption="profilepersonaldataissmoker-yes"}else{isSmokerOption="profilepersonaldataissmoker-null"}}document.getElementById(isSmokerOption).checked="checked";if(aj.carColour){document.getElementById("profilepersonaldatacarcolour").value=$("<div />").html(aj.carColour).text()||""}if(aj.carBrand){document.getElementById("profilepersonaldatacarbrand").value=$("<div />").html(aj.carBrand).text()||""}if(aj.carPlateNo){document.getElementById("profilepersonaldatacarplateno").value=$("<div />").html(aj.carPlateNo).text()||""}},validateDate:function(ag){validMonth=false;if(ag.split(".").length==3&&ag.split(".")[1]>0&&ag.split(".")[1]<=12&&ag.split(".")[0]>0&&ag.split(".")[0]<=31&&ag.split(".")[2]>1900){validMonth=true}parsedDate=this.parsedate(ag);if(!validMonth||!parsedDate){return false}else{return parsedDate}},putprofilepersonaldata:function(){if(document.getElementById("profilepersonaldataemail").value==""){showOverlayDialog("Specifying an email address is mandatory.","","OK","","","");return}if(document.getElementById("profilepersonaldatamobilephonenumber").value==""){showOverlayDialog("Specifying a mobile phone number is mandatory.","","OK","","","");return}var ai=new Date("01/01/1800").toLocaleDateString();if(document.getElementById("profilepersonaldatadateofbirth").value!=""){ai=new Date(this.validateDate(document.getElementById("profilepersonaldatadateofbirth").value)).toLocaleDateString();if(!ai|!aj(document.getElementById("profilepersonaldatadateofbirth").value,"DMY")){showOverlayDialog('Please specify a valid date of birth in the format "dd.mm.yyyy". The date must not be in the future.',"","OK","","","");return}}function aj(ao,at){if(at==null){at="MDY"}at=at.toUpperCase();if(at.length!=3){at="MDY"}if((at.indexOf("M")==-1)||(at.indexOf("D")==-1)||(at.indexOf("Y")==-1)){at="MDY"}if(at.substring(0,1)=="Y"){var an=/^\d{2}(\-|\/|\.)\d{1,2}\1\d{1,2}$/;var am=/^\d{4}(\-|\/|\.)\d{1,2}\1\d{1,2}$/}else{if(at.substring(1,2)=="Y"){var an=/^\d{1,2}(\-|\/|\.)\d{2}\1\d{1,2}$/;var am=/^\d{1,2}(\-|\/|\.)\d{4}\1\d{1,2}$/}else{var an=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2}$/;var am=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/}}if((an.test(ao)==false)&&(am.test(ao)==false)){return false}var aq=ao.split(RegExp.$1);if(at.substring(0,1)=="M"){var ap=aq[0]}else{if(at.substring(1,2)=="M"){var ap=aq[1]}else{var ap=aq[2]}}if(at.substring(0,1)=="D"){var au=aq[0]}else{if(at.substring(1,2)=="D"){var au=aq[1]}else{var au=aq[2]}}if(at.substring(0,1)=="Y"){var ar=aq[0]}else{if(at.substring(1,2)=="Y"){var ar=aq[1]}else{var ar=aq[2]}}if(parseFloat(ar)<=50){ar=(parseFloat(ar)+2000).toString()}if(parseFloat(ar)<=99){ar=(parseFloat(ar)+1900).toString()}var al=new Date(parseFloat(ar),parseFloat(ap)-1,parseFloat(au),0,0,0,0);if(parseFloat(au)!=al.getDate()){return false}if(parseFloat(ap)-1!=al.getMonth()){return false}var ak=new Date();if(al.getTime()>=ak.getTime()){return false}return true}var ah="";var ag=fokus.openride.mobclient.controller.modules.profile;af.setDateOfBirth(ai);af.setEmail(document.getElementById("profilepersonaldataemail").value);af.setMobilePhoneNumber(document.getElementById("profilepersonaldatamobilephonenumber").value);af.setStreetAddress(document.getElementById("profilepersonaldatastreetaddress").value);af.setZipCode(document.getElementById("profilepersonaldatazipcode").value||0);af.setCity(document.getElementById("profilepersonaldatacity").value);if(document.getElementById("profilepersonaldataissmoker-yes").checked){isSmokerValue="y"}else{if(document.getElementById("profilepersonaldataissmoker-no").checked){isSmokerValue="n"}else{isSmokerValue="-"}}af.setIsSmoker(isSmokerValue);af.setLicenseDate(ah);af.setCarColour(document.getElementById("profilepersonaldatacarcolour").value||ah);af.setCarBrand(document.getElementById("profilepersonaldatacarbrand").value||ah);af.setCarBuildYear(ah);if((document.getElementById("profilepersonaldatacarcolour").value==""||document.getElementById("profilepersonaldatacarbrand").value=="")&&!(document.getElementById("profilepersonaldatacarcolour").value==""&&document.getElementById("profilepersonaldatacarbrand").value=="")){showOverlayDialog("Fill both Car Color and Car Brand!","","OK","","","");return}af.getProfileRequest()._revision=af.getProfileRequest()._revision+1;$.ajax({type:"PUT",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile",data:JSON.stringify(af.getProfileRequest()),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ak){ak.withCredentials=true,ak.setRequestHeader("Authorization","Basic "+username+":"+password);ak.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ak.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(al,am,ak){showOverlayDialog("Personal data was saved successfully!","","OK","","","")},error:function(am,al,ak){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(am,al,ak,"Unfortunately, your data could not be stored.")}})},parsedate:function(ag){var ah=ag.split(".");if(ah.length!=3){return false}var ai=new Date(ah[2],ah[1]-1,ah[0]);return ai.getTime()},parseprofilepreferences:function(ag){if(typeof(ag.PreferencesResponse)!="undefined"){var ah=ag.PreferencesResponse;if(ah.prefIsSmoker=="y"){isSmokerOption="profileprefissmoker-yes"}else{if(ah.prefIsSmoker=="n"){isSmokerOption="profileprefissmoker-no"}else{isSmokerOption="profileprefissmoker-null"}}document.getElementById(isSmokerOption).checked="checked"}},putprofilepreferences:function(){$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/preferences",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ag){ag.withCredentials=true,ag.setRequestHeader("Authorization","Basic "+username+":"+password);ag.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ag.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ah,aj,ag){ah._revision=ah._revision+1;var ai="";if(document.getElementById("profileprefissmoker-yes").checked){ai="y"}else{if(document.getElementById("profileprefissmoker-no").checked){ai="n"}else{ai="-"}}ah.isSmoker=ai;$.ajax({type:"PUT",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/preferences",data:JSON.stringify(ah),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ak){ak.withCredentials=true,ak.setRequestHeader("Authorization","Basic "+username+":"+password);ak.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ak.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(al,am,ak){showOverlayDialog("Preferences were saved successfully!","","OK","","","")},error:function(am,al,ak){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(am,al,ak,"Unfortunately, your preferences could not be saved.")}})},error:function(ai,ah,ag){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ai,ah,ag,"Unfortunately, your preferences could not be saved.")}})},putprofilepassword:function(){if(document.getElementById("profilepasswordold").value==""||document.getElementById("profilepassword").value==""||document.getElementById("profilepasswordcheck").value==""){showOverlayDialog("The specification of the old and new password is mandatory.","","OK","","","");return}if(document.getElementById("profilepassword").value!=document.getElementById("profilepasswordcheck").value){showOverlayDialog("The passwords do not match.","","OK","","","");return}var ag=fokus.openride.mobclient.controller.modules.profile;ag.setPasswordOld(document.getElementById("profilepasswordold").value);ag.setPassword(document.getElementById("profilepassword").value);af.setPassword(document.getElementById("profilepassword").value);u.PUT("/OpenRideServer-RS/resources/users/"+this.username+"/profile/password",true,ag.getPasswordRequest(),function(){showOverlayDialog("Password successfully changed!","","OK","","","")},function(ah,ai,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ah,ai,aj,"Sorry, your password could not be changed.")});$.ajax({type:"Get",url:PeerManagerPrefix+PeerMenager+"/users/"+username,data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ah){ah.withCredentials=true,ah.setRequestHeader("Authorization","Basic "+username+":"+password);ah.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ah.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ai,aj,ah){ai.password=document.getElementById("profilepassword").value;ai._revision=ai._revision+1;$.ajax({type:"PUT",url:PeerManagerPrefix+PeerMenager+"/users/"+username,data:JSON.stringify(ai),crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ak){ak.withCredentials=true,ak.setRequestHeader("Authorization","Basic "+username+":"+password);ak.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ak.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(al,am,ak){showOverlayDialog("Password successfully changed!","","OK","","","");password=document.getElementById("profilepassword").value;eraseCookie("password");createCookie("password",password,365)},error:function(am,al,ak){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(am,al,ak,"Sorry, your password could not be changed.")}})},error:function(aj,ai,ah){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aj,ai,ah,"Sorry, your password could not be changed.")}})},parseratingssummary:function(ag,aj){var al=0;var ap=0;var ao=0;var ai=0;var an=0;var ak=0;var am="male";var ah="";if(aj!=null){ap=aj.average_OnTime;ai=aj.average_Friendly;an=aj.average_StarRating;ak=aj.total_StarRating/aj.average_StarRating}else{al="N/A";ap="N/A";ao="N/A";ai="N/A";an="N/A"}if(Y.gender=="f"){am="Female"}document.getElementById("ratingsUserName").innerHTML=readCookie("username");document.getElementById("ratingsUserGender").innerHTML=am;if(Y.streetAddress!="undefined"&&Y.streetAddress!=""){ah+=Y.streetAddress}if(Y.city!="undefined"&&Y.city!=""){ah+=", "+Y.city}document.getElementById("ratingsUserLocation").innerHTML=ah;document.getElementById("ratingssummarytotal").innerHTML=an+" (From "+ak+" people)";document.getElementById("ratingssummarypositive").innerHTML=al;document.getElementById("ratingssummarydecent").innerHTML=ap;document.getElementById("ratingssummaryneutral").innerHTML=ao;document.getElementById("ratingssummarymediocre").innerHTML=ai},parseopenratingslist:function(ag,ah){var ai="<h3>Write reviews</h3>";d=new Array();user=readCookie("username");pass=readCookie("password");var ai="Loading...";if(rides.length>0){ai=""}else{ai="You have rated all previous rides."}$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/subject/byURI/"+user,data:"",crossDomain:true,username:user,password:pass,beforeSend:function(aj){aj.setRequestHeader("Authorization","Basic "+user+":"+pass);aj.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(aC,ak){var aq=JSON.parse(aC);var ay=aq.subject_id;var aj=aq.authored_reports;var az=[];if(aj!="undefined"){for(var au in aj){var aD=aj[au];var av=aD.event;var am=av.indexOf("/");var at=av.substring(am+1);if(az.indexOf(parseInt(at))==-1){az.push(parseInt(at));az.push(aD.subjects["subject_uri_1"])}else{az[az.indexOf(parseInt(at))+1]=az[az.indexOf(parseInt(at))+1]+","+aD.subjects["subject_uri_1"]}}}for(var aw=0;aw<rides.length;aw++){if(!rides.hasOwnProperty(aw)){continue}aq=JSON.parse(rides[aw]);if(aq.potentiallyAgreedCommuters.length!=0&&aq.potentiallyAgreedCommuters!=[""]&&aq.potentiallyAgreedCommuters!=[]){continue}var al=[-1,0,-1,0,-1];submitted_rides[aw]=al;var aA=new Date(+aq.depDateTimeWindow.depDateTimeLow);var ax=aA.getHours();if(ax<10){ax="0"+ax}var an=aA.getMinutes();if(an<10){an="0"+an}var aB=""+ax+":"+an+" "+aA.getDate()+"."+aA.getMonth()+1+"."+aA.getFullYear();var ar=aq.commuters;if(aq.driver==user){for(var ap=0;ap<ar.length;ap++){if(az.indexOf(aq.index)!=-1){var ao=az[az.indexOf(aq.index)+1].split(",");if(ao.indexOf(ar[ap])!=-1){continue}}ai+='<div class="open-rating-row" style="border-bottom: 1px solid #ccc; padding: 5px; min-height: 60px; clear: both;" id="openrating'+ay+'">    <div class="profile-info-short" style="float: left; margin: 0 15px 0 0; text-align: right;"><img src="../../OpenRideWeb/img/icon.png" style="width: 60px; height: 60px; display: block; background: #ddd;" /><br> </div>    <div style="line-height: 140%; padding-left: 75px;">        Ride with: '+ar[ap]+' taken on: <div style="color:#96bd0d;"><strong>'+aB+"</strong><br> "+aq.departureCity+" -> "+aq.destinationCity+'<br><br></div>    </div>    <div class="open-rating-buttons" style="line-height: 100%;"><br><br><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Overall: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(0,aw,ap)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Reliability: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(2,aw,ap)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Friendliness: </strong>&nbsp;&nbsp;&nbsp;&nbsp;'+stars(4,aw,ap)+'</div><div align="center" style="color=#96bd0d; font-family: Arial, sans-serif;"><strong><input vertical-align:middle; horizontal-align:middle;  type="button" class="rounded compact" value="Submit" onClick="comment(\''+aq.index+"-"+aw+"#"+5+ar[ap]+"');\"></strong></div>    </div></div>"}}else{ai+='<div class="open-rating-row" style="border-bottom: 1px solid #ccc; padding: 5px; min-height: 60px; clear: both;" id="openrating'+ay+'">    <div class="profile-info-short" style="float: left; margin: 0 15px 0 0; text-align: right;"><img src="../../OpenRideWeb/img/icon.png" style="width: 60px; height: 60px; display: block; background: #ddd;" /><br> </div>    <div style="line-height: 140%; padding-left: 75px;">        Ride with: '+aq.driver+' taken on: <div style="color:#96bd0d;"><strong>'+aB+"</strong><br> "+aq.departureCity+" -> "+aq.destinationCity+'<br><br></div>    </div>    <div class="open-rating-buttons" style="line-height: 100%;"><br><br><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Overall: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(0,aw,0)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Reliability: </strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+stars(2,aw,0)+'</div><div style="color=#96bd0d; font-family: Arial, sans-serif;"><strong>Friendliness: </strong>&nbsp;&nbsp;&nbsp;&nbsp;'+stars(4,aw,0)+'</div><div align="center" style="color=#96bd0d; font-family: Arial, sans-serif;"><strong><input vertical-align:middle; horizontal-align:middle;  type="button" class="rounded compact" value="Submit" onClick="comment(\''+aq.index+"-"+aw+""+5+"');\"></strong></div>    </div></div>"}}if(ai){document.getElementById(ag).innerHTML=ai}},error:function(al,ak,aj){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(al,ak,aj,"Unfortunately, Something went wrong. Please try again later.")}})},postrating:function(ah,ai,ag){var aj=fokus.openride.mobclient.controller.modules.ratings;aj.setRiderRouteId(ah);aj.setGivenRating(ai);aj.setGivenRatingComment(ag);u.POST("/OpenRideServer-RS/resources/users/"+this.username+"/ratings",true,aj.getGivenRatingRequest(),function(){showOverlayDialog("Your review was submitted successfully.","","OK","","","");fokus.openride.mobclient.controller.modules.modulemanager.setView("openratingsUI")},function(ak,al,am){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ak,al,am,"Oops, your vote could not be delivered.")})},parsereceivedratingslist:function(ah,an){var ao=JSON.parse(an);var ag="<h3>Ratings received</h3>";d=new Array();if(typeof(ao.list[0].ReceivedRatingResponse)!="undefined"){if(typeof(ao.list[0].ReceivedRatingResponse.length)=="undefined"){ao.list[0].ReceivedRatingResponse=[ao.list[0].ReceivedRatingResponse]}for(var ai=0;ai<ao.list[0].ReceivedRatingResponse.length;ai++){var al=ao.list[0].ReceivedRatingResponse[ai];var am="";if(al.custRole=="d"){if(al.custGender=="m"){am="Your drivers"}else{if(al.custGender=="f"){am="Your drivers"}}}else{if(al.custRole=="r"){if(al.custGender=="m"){am="Your riders"}else{if(al.custGender=="f"){am="Your riders"}}}}var aj=new Date(al.timestamprealized);var ak="";if(typeof(al.receivedRatingComment)!="undefined"&&al.receivedRatingComment!=""){ak="&bdquo;"+al.receivedRatingComment+"&ldquo;"}else{switch(al.receivedRating){case 1:ak='<span style="color: #aaa; font-style: italic;">Positiv bewertet</span>';break;case 0:ak='<span style="color: #aaa; font-style: italic;">Neutral bewertet</span>';break;case -1:ak='<span style="color: #aaa; font-style: italic;">Negativ bewertet</span>';break}}ag+='<div class="rating-row" style="border-bottom: 1px solid #ccc; padding: 5px; min-height: 60px; clear: both;"><div class="profile-info-short" style="float: left; margin: 0 15px 0 0; text-align: right;"><img src="../../OpenRideWeb/pictures/profile/'+al.custNickname+"_"+al.custId+'_thumb.jpg" alt="Profilbild von '+al.custNickname+'" style="width: 60px; height: 60px; display: block; background: #ddd;" /></div><div style="line-height: 140%; padding-left: 75px;"><strong>'+al.custNickname+"</strong> &ndash; <br />"+am+" am "+aj.getDate()+"."+(aj.getMonth()+1)+"."+aj.getFullYear()+':<br /><img src="../img/rated_'+al.receivedRating+'.png" style="vertical-align: -3px; padding: 0 5px 0 5px;" /> '+ak+"</div></div>"}}else{ag+="<p>No one has written a review for you.</p>"}document.getElementById(ah).innerHTML=ag},setView:function(aA){document.getElementById(this.currentdisplayedview).style.display="none";document.getElementById(aA).style.display="block";var aD=k.getUserLocation();if(aD==null){aD=new google.maps.LatLng(52.525798,13.314266)}else{var an=aD;aD=new google.maps.LatLng(an.coords.latitude,an.coords.longitude)}clearInterval(tabListActiveRefreshTimer);if(aA=="activeofferUI"||aA=="activesearchUI"){clearInterval(updateCountRefreshTimer);updateCountRefreshTimer=0}else{if(!updateCountRefreshTimer){if(updateCountRefreshTimer==0){this.receiveUpdates()}updateCountRefreshTimer=setInterval("fokus.openride.mobclient.controller.modules.modulemanager.receiveUpdates()",15000)}}mode=readCookie("usermode");if(aA=="offerstartpickerUI"){R.setMapMode(0);R.initialize("offerstartmap","offerstartaddrinput",aD)}else{if(aA=="newofferUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));var ai=readCookie("password");$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aF){aF.withCredentials=true,aF.setRequestHeader("Authorization","Basic "+this.username+":"+ai);aF.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aF.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aG,aH,aF){af.setAllData(aG);if(!af.getCarColour()||!af.getCarBrand()){showOverlayDialog("Please complete your car description in your profile before you can set ride offers.","","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(0, 1);","","")}},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, your profile information could not be loaded.")}});if(x=="modify"){document.getElementById("tabimg11").src="../img/tab1AngebotAendernActive_wide.png"}else{document.getElementById("tabimg11").src="../img/tab1NeuesAngebotActive_wide.png"}document.getElementById(P).value="Location: undetermined!";document.getElementById(P).latln="none";document.getElementById(o).value="Location: undetermined!";document.getElementById(o).latln="none";try{R.insertRevGeocodedAddr(k.getUserLocation(),P);R.insertRevGeocodedAddr(k.getUserLocation(),o)}catch(az){}if(!this.detailsClicked){var ap=document.getElementById(I);var ao=ap.length;for(var ay=ao-1;ay>1;ay--){if(!ap[ay].mod){ap[ay]=null}}ap=document.getElementById(z);ao=ap.length;for(var ax=ao-1;ax>1;ax--){if(!ap[ax].mod){ap[ax]=null}}u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints",false,function(aU){var aG=document.getElementById(I);var aI=document.getElementById(z);var aL=aU;if(typeof(aL.list[0].FavoritePointResponse)!="undefined"){if(typeof(aL.list[0].FavoritePointResponse.length)=="undefined"){var aM=aL.list[0].FavoritePointResponse;var aW=aM.favptDisplayName;var aH=aM.favptAddress;var aP=aM.favptGeoCoords;var aN=aM.favptId;var aS=document.createElement("option");var aV=document.createElement("option");aS.innerHTML=aW+": "+aH;aS.latln=aP;aV.innerHTML=aW+": "+aH;aV.latln=aP;aG.add(aS,null);aI.add(aV,null)}else{for(var aQ=0;aQ<aL.list[0].FavoritePointResponse.length;aQ++){var aF=aL.list[0].FavoritePointResponse[aQ];var aO=aF.favptDisplayName;var aT=aF.favptAddress;var aJ=aF.favptGeoCoords;var aX=aF.favptId;var aR=document.createElement("option");var aK=document.createElement("option");aR.innerHTML=aO+": "+aT;aR.latln=aJ;aK.innerHTML=aO+": "+aT;aK.latln=aJ;aI.add(aK,null)}}}else{}},function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Oops, your favorites could not be loaded.")});this.offerfavsset=true}}else{if(aA=="newsearchUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));if(x=="modify"){document.getElementById("tabimg11").src="../img/tab1GesuchAendernActive_wide.png"}else{document.getElementById("tabimg11").src="../img/tab1NeuesGesuchActive_wide.png"}document.getElementById(j).value="Location: undetermined!";document.getElementById(j).latln="none";document.getElementById(Z).value="Location: undetermined!";document.getElementById(Z).latln="none";try{R.insertRevGeocodedAddr(k.getUserLocation(),j);R.insertRevGeocodedAddr(k.getUserLocation(),Z)}catch(az){}if(!this.detailsClicked){ap=document.getElementById(p);ao=ap.length;for(ay=ao-1;ay>1;ay--){if(!ap[ay].mod){ap[ay]=null}}ap=document.getElementById(m);ao=ap.length;for(ax=ao-1;ax>1;ax--){if(!ap[ax].mod){ap[ax]=null}}u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/favoritepoints",false,function(aX){var aQ=document.getElementById(p);var aK=document.getElementById(m);var aJ=aX;if(typeof(aJ.list[0].FavoritePointResponse)!="undefined"){if(typeof(aJ.list[0].FavoritePointResponse.length)=="undefined"){var aL=aJ.list[0].FavoritePointResponse;var aV=aL.favptDisplayName;var aR=aL.favptAddress;var aH=aL.favptGeoCoords;var aG=aL.favptId;var aT=document.createElement("option");var aN=document.createElement("option");aT.innerHTML=aV+": "+aR;aT.latln=aH;aN.innerHTML=aV+": "+aR;aN.latln=aH;aQ.add(aT,null);aK.add(aN,null)}else{for(var aO=0;aO<aJ.list[0].FavoritePointResponse.length;aO++){var aI=aJ.list[0].FavoritePointResponse[aO];var aM=aI.favptDisplayName;var aU=aI.favptAddress;var aP=aI.favptGeoCoords;var aW=aI.favptId;var aS=document.createElement("option");var aF=document.createElement("option");aS.innerHTML=aM+": "+aU;aS.latln=aP;aF.innerHTML=aM+": "+aU;aF.latln=aP;aQ.add(aS,null);aK.add(aF,null)}}}else{}},function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Oops, your favorites could not be loaded.")});this.searchfavsset=true}}else{if(aA=="offerdestpickerUI"){R.setMapMode(0);R.initialize("offerdestmap","offerdestaddrinput",aD)}else{if(aA=="searchstartpickerUI"){R.setMapMode(0);R.initialize("searchstartmap","searchstartaddrinput",aD)}else{if(aA=="searchdestpickerUI"){R.setMapMode(0);R.initialize("searchdestmap","searchdestaddrinput",aD)}else{if(aA=="newfavoritepickerUI"){}else{if(aA=="showofferrouteUI"){R.setMapMode(1);var au=document.createElement("div");au.id="dummyaddrinput";var am=R.getRoutePath();var aC;if(am!=null&&am!="undefined"){if(am.length>=2){R.initialize("offersimpleroutemap","dummyaddrinput",am[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aA=="showsearchrouteUI"){R.setMapMode(1);var au=document.createElement("div");au.id="dummyaddrinput";var am=R.getRoutePath();var aC;if(am!=null&&am!="undefined"){if(am.length>=2){R.initialize("searchsimpleroutemap","dummyaddrinput",am[0])}else{showOverlayDialog("Get Directions","<br />Start and finish must be different!<br />","OK","fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1, 0)","","")}}}else{if(aA=="activeofferUI"){var aj=new Date();var aB=aj.getTimezoneOffset()/60;if(aB>0){aB="-"+aB}else{aB="+"+(-aB)}var ag=aj.getFullYear()+"-"+aj.getMonth()+"-"+aj.getDate()+"T"+aj.getHours()+":"+aj.getMinutes()+":"+aj.getSeconds()+aB;$.ajax({type:"POST",url:"https://provenance.ecs.soton.ac.uk/smartsociety/provbindings/binding/",data:'{"prov":"@prefix prov: <http://www.w3.org/ns/prov#> .@prefix xsd: <http://www.w3.org/2001/XMLSchema#/> .@prefix tmpl: <http://openprovenance.org/tmpl#> .@prefix var: <http://openprovenance.org/var#> .@prefix view: <168.144.152.202/OpenRideServer-RS/view/> .@prefix rideservice: <168.144.152.202/OpenRideServer-RS/> .@prefix rideserver: <168.144.152.202/> .@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .@prefix  usr: <http://168.144.202.152:3000/subject/byURI/> .var:view a prov:Entity; tmpl:value_0 rideservice:view . var:client a prov:Entity; tmpl:value_0 rideserver:OpenRideServer-RS . var:change_view a prov:Entity; tmpl:value_0 view:activeOffersView . var:username a prov:Entity; tmpl:2dvalue_0_0 usr:'+aE+' . var:change_view_start_time a prov:Entity; tmpl:2dvalue_0_0 \\"'+ag+'\\"^^xsd:dateTime . var:change_view_start_end_time a prov:Entity; tmpl:2dvalue_0_0 \\"'+ag+'\\"^^xsd:dateTime .", "binding_name":"ss_change_view_binding_223", "template_name":"ss_change_view"}',crossDomain:true,headers:{"Content-Type":"text/turtle"},contentType:"text/turtle",async:"true",success:function(aF,aG){},error:function(aH,aG,aF){}});fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers",false,this.setActiveOfferList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your listings could not be loaded.")});rides.length=0;parseOffer=this.parseactiveofferlist;var ak=this.parseUnmatchedRideRequest;C=this;var ar=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){aE="agent1";ai="agent1"}else{aE="agent6";ai="agent6"}}else{if(username=="MaxS"){aE="agent2";ai="agent2"}else{aE="agent3";ai="agent3"}}var ah=aE.substring(5,aE.length);var av=parseInt(ah)-1;aE=readCookie("username");ai=readCookie("password");var al=0;var aq=0;$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests",data:"user="+aE,crossDomain:true,username:aE,password:ai,beforeSend:function(aF){aF.setRequestHeader("Authorization","Basic "+aE+":"+ai);aF.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aH,aI){var aG={};aG.data=[];for(var aF in aH.data[0]){aG.data.push({url:aH.data[0][aF],ETag:"",doc:{}})}$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aG),crossDomain:true,username:aE,password:ai,beforeSend:function(aJ){aJ.setRequestHeader("Authorization","Basic "+aE+":"+ai);aJ.withCredentials=true;aJ.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aJ.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aP,aQ,aO){rideRequests=[];var aL={};aL.data=[];var aJ;var aK;var aM=JSON.parse(aP);for(var aN=0;aN<aM.data.length;aN++){aJ=false;rideRequests.push(JSON.stringify(aM.data[aN].doc));if(aM.data[aN].doc.potentialRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentialRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentialRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.potentiallyAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentiallyAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentiallyAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.driverAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.driverAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.driverAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.agreedRidePlan.length!=0){aJ=true;aL.data.push({url:aM.data[aN].doc.agreedRidePlan,ETag:"",doc:{}})}if(aJ){}}$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aL),crossDomain:true,username:aE,password:ai,beforeSend:function(aR){aR.setRequestHeader("Authorization","Basic "+aE+":"+ai);aR.withCredentials=true;aR.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aR.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aU,aV,aT){rides=[];var aR=JSON.parse(aU);for(var aS=0;aS<aR.data.length;aS++){rides.push(JSON.stringify(aR.data[aS].doc))}},error:function(aT,aS,aR){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aT,aS,aR,"Unfortunately, Something went wrong. Please try again later.")}})},error:function(aL,aK,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aL,aK,aJ,"Unfortunately, Something went wrong. Please try again later.")}});parseOffer()},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, Something went wrong. Please try again later.")}});this.parseactiveofferlist()}else{if(aA=="completedtripsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/offers/inactive",false,this.setActiveOfferList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your listings could not be loaded.")});u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches/inactive",false,this.setActiveSearchList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your listings could not be loaded.")});u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings/open",false,this.setOpenRatingsList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your open reviews could not be loaded.")});this.parsecompletedtriplist()}else{if(aA=="activesearchUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/rides/searches",false,this.setActiveSearchList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your application could not be loaded.")});rides.length=0;parseSearch=this.parseactivesearcheslist;parseUnmatchedSearch=this.parseUnmatchedRideRequest;C=this;var ar=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){aE="agent1";ai="agent1"}else{aE="agent6";ai="agent6"}}else{if(username=="MaxS"){aE="agent2";ai="agent2"}else{aE="agent3";ai="agent3"}}ah=aE.substring(5,aE.length);av=parseInt(ah)-1;aE=readCookie("username");ai=readCookie("password");$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests",data:"user="+aE,crossDomain:true,username:aE,password:ai,beforeSend:function(aF){aF.setRequestHeader("Authorization","Basic "+aE+":"+ai);aF.withCredentials=true;aF.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aF.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66");aF.setRequestHeader("UHOPPER_PASSWORD",ai)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aH,aI){var aG={};aG.data=[];for(var aF in aH.data[0]){aG.data.push({url:aH.data[0][aF],ETag:"",doc:{}})}$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aG),crossDomain:true,username:aE,password:ai,beforeSend:function(aJ){aJ.setRequestHeader("Authorization","Basic "+aE+":"+ai);aJ.withCredentials=true;aJ.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aJ.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aP,aQ,aO){rideRequests=[];var aL={};aL.data=[];var aJ=false;var aK;var aM=JSON.parse(aP);for(var aN=0;aN<aM.data.length;aN++){aJ=false;rideRequests.push(JSON.stringify(aM.data[aN].doc));if(aM.data[aN].doc.potentialRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentialRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentialRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.potentiallyAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentiallyAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentiallyAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.driverAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.driverAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.driverAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.agreedRidePlan!=""){aJ=true;aL.data.push({url:aM.data[aN].doc.agreedRidePlan,ETag:"",doc:{}})}if(aJ){}}$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aL),crossDomain:true,username:aE,password:ai,beforeSend:function(aR){aR.setRequestHeader("Authorization","Basic "+aE+":"+ai);aR.withCredentials=true;aR.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aR.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aU,aV,aT){rides=[];var aR=JSON.parse(aU);for(var aS=0;aS<aR.data.length;aS++){rides.push(JSON.stringify(aR.data[aS].doc))}},error:function(aT,aS,aR){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aT,aS,aR,"Unfortunately, Something went wrong. Please try again later.")}});parseSearch()},error:function(aL,aK,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aL,aK,aJ,"Unfortunately, Something went wrong. Please try again later.")}})},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, Something went wrong. Please try again later.")}});this.parseactivesearcheslist()}else{if(aA=="favlistUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"))}else{if(aA=="ratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));var ai=readCookie("password");$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aF){aF.withCredentials=true,aF.setRequestHeader("Authorization","Basic "+this.username+":"+ai);aF.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aF.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,accepts:"application/json",success:function(aG,aH,aF){af.setAllData(aG);fokus.openride.mobclient.controller.modules.modulemanager.parseprofilepersonaldata("fff")},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, your profile information could not be loaded.")}});var aw;if(usermode==DRIVERMODE){if(username=="AviB"){aE="agent1";ai="agent1"}else{aE="agent6";ai="agent6"}}else{if(username=="MaxS"){aE="agent2";ai="agent2"}else{aE="agent3";ai="agent3"}}aE=readCookie("username");ai=readCookie("password");var at=this.parseratingssummary;var au=this.parseratingssummarydiv;$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/subject/byURI/"+aE,data:"",crossDomain:true,username:aE,password:ai,beforeSend:function(aF){aF.setRequestHeader("Authorization","Basic "+aE+":"+ai);aF.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(aG,aI){var aH=JSON.parse(aG);if(aH.versionInfo["previousVersion"]=="none"||typeof(aH.currentReputationReport)=="undefined"){at(au,null)}else{var aF=aH.currentReputationReport["uri"];$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/"+aF,data:"",crossDomain:true,username:aE,password:ai,beforeSend:function(aJ){aJ.setRequestHeader("Authorization","Basic "+aE+":"+ai);aJ.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,accepts:"application/json;",success:function(aK,aL){if(aK!=null&&aK!="undefined"&&aK!=""){var aJ=JSON.parse(aK);at(au,aJ.json)}else{at(au,null)}},error:function(aL,aK,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aL,aK,aJ,"Unfortunately, Something went wrong. Please try again later.")}})}},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, Something went wrong. Please try again later.")}})}else{if(aA=="openratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings/open","false",this.setOpenRatingsList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Unfortunately, your open reviews could not be loaded.")});rides.length=0;C=this;parseOpenRatings=this.parseopenratingslist;var ar=fokus.openride.mobclient.controller.modules.modulemanager.username;if(usermode==DRIVERMODE){if(username=="AviB"){aE="agent1";ai="agent1"}else{aE="agent6";ai="agent6"}}else{if(username=="MaxS"){aE="agent2";ai="agent2"}else{aE="agent3";ai="agent3"}}var ah=aE.substring(5,aE.length);var av=parseInt(ah)-1;aE=readCookie("username");ai=readCookie("password");$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests",data:"user="+aE,crossDomain:true,username:aE,password:ai,beforeSend:function(aF){aF.setRequestHeader("Authorization","Basic "+aE+":"+ai);aF.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,accepts:"application/json;",success:function(aH,aI){var aG={};aG.data=[];for(var aF in aH.data[0]){aG.data.push({url:aH.data[0][aF],ETag:"",doc:{}})}$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests/?action=getSet",data:JSON.stringify(aG),crossDomain:true,username:aE,password:ai,beforeSend:function(aJ){aJ.setRequestHeader("Authorization","Basic "+aE+":"+ai);aJ.withCredentials=true;aJ.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aJ.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aP,aQ,aO){rideRequests=[];var aL={};aL.data=[];var aJ;var aK;var aM=JSON.parse(aP);for(var aN=0;aN<aM.data.length;aN++){aJ=false;rideRequests.push(JSON.stringify(aM.data[aN].doc));if(aM.data[aN].doc.potentialRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentialRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentialRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.potentiallyAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.potentiallyAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.potentiallyAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.driverAgreedRidePlans.length!=0){aJ=true;for(aK=0;aK<aM.data[aN].doc.driverAgreedRidePlans.length;aK++){aL.data.push({url:aM.data[aN].doc.driverAgreedRidePlans[aK],ETag:"",doc:{}})}}if(aM.data[aN].doc.agreedRidePlan.length!=0){aJ=true;aL.data.push({url:aM.data[aN].doc.agreedRidePlan,ETag:"",doc:{}})}if(aJ){}}if(aL.length!=0){$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/?action=getSet",data:JSON.stringify(aL),crossDomain:true,username:aE,password:ai,beforeSend:function(aR){aR.setRequestHeader("Authorization","Basic "+aE+":"+ai);aR.withCredentials=true;aR.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aR.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},contentType:"application/json",async:false,success:function(aU,aV,aT){rides=[];var aR=JSON.parse(aU);for(var aS=0;aS<aR.data.length;aS++){rides.push(JSON.stringify(aR.data[aS].doc))}},error:function(aT,aS,aR){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aT,aS,aR,"Unfortunately, Something went wrong. Please try again later.")}})}parseOpenRatings(C.openratingslistdiv,null)},error:function(aL,aK,aJ){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aL,aK,aJ,"Unfortunately, Something went wrong. Please try again later.")}})},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, Something went wrong. Please try again later.")}});this.parseopenratingslist(this.openratingslistdiv,y)}else{if(aA=="receivedratingsUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/ratings",false,this.setReceivedRatingsList,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Oops, your received rating could not be loaded.")});this.parsereceivedratingslist(this.receivedratingslistdiv,a)}else{if(aA=="profileUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));var ai=readCookie("password");$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+this.username+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:this.username,password:this.password,beforeSend:function(aF){aF.withCredentials=true,aF.setRequestHeader("Authorization","Basic "+this.username+":"+ai);aF.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aF.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aG,aH,aF){af.setAllData(aG);fokus.openride.mobclient.controller.modules.modulemanager.parseprofilepersonaldata("fff")},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, your profile information could not be loaded.")}});u.GET("/OpenRideServer-RS/resources/users/"+this.username+"/profile/preferences",false,this.parseprofilepreferences,function(aF,aG,aH){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aF,aG,aH,"Oops, your settings could not be loaded.")})}else{if(aA=="homeUI"){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));var ai=readCookie("password");var aE=readCookie("username");$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+aE+"/profile",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:aE,password:ai,beforeSend:function(aF){aF.withCredentials=true,aF.setRequestHeader("Authorization","Basic "+aE+":"+ai);aF.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");aF.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(aG,aH,aF){af.setAllData(aG)},error:function(aH,aG,aF){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(aH,aG,aF,"Unfortunately, your profile information could not be loaded.")}});fokus.openride.mobclient.controller.modules.uievents.parseInitData(null)}}}}}}}}}}}}}}}}}}this.currentdisplayedview=aA;this.detailsClicked=false},dummy:function(){return},changeViewAndUserMode:function(ag){fokus.openride.mobclient.controller.modules.uievents.unhideAllTabs();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg14"));switch(ag){case"offers":if(usermode!=DRIVERMODE){fokus.openride.mobclient.controller.modules.modulemanager.changemode()}fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1);break;case"searches":if(usermode!=RIDERMODE){fokus.openride.mobclient.controller.modules.modulemanager.changemode()}fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1);break;case"ratings":fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(2,1);break}},changemode:function(){var ah=document.getElementById("drivermodeimg");var ai=document.getElementById("ridermodeimg");var ag=-1;if(usermode==DRIVERMODE){usermode=RIDERMODE;ah.src="../img/drivermodebtn_inactive.png";ai.src="../img/ridermodebtn_active.png";document.getElementById("usermodeslider").style.marginLeft="0px";document.getElementById("usermodelabel").innerHTML="Rider";document.getElementById("riderupdatecount2").style.display=(document.getElementById("riderupdatecount2").innerHTML!="")?"block":"none";document.getElementById("driverupdatecount2").style.display="none";ag=1}else{if(usermode==RIDERMODE){usermode=DRIVERMODE;ah.src="../img/drivermodebtn_active.png";ai.src="../img/ridermodebtn_inactive.png";document.getElementById("usermodeslider").style.marginLeft="41px";document.getElementById("usermodelabel").innerHTML="Driver";document.getElementById("driverupdatecount2").style.display=(document.getElementById("driverupdatecount2").innerHTML!="")?"block":"none";document.getElementById("riderupdatecount2").style.display="none";ag=0}}createCookie("usermode",ag,365);this.setupTabs();return ag},setriderupdatecount:function(ag){if(!ag>0){ag=""}document.getElementById("riderupdatecount").innerHTML=ag;document.getElementById("riderupdatecount2").innerHTML=ag;document.getElementById("riderupdatecount3").innerHTML=ag;document.getElementById("riderupdatecount").style.display=(ag!="")?"block":"none";if(usermode==RIDERMODE){document.getElementById("riderupdatecount2").style.display=(document.getElementById("riderupdatecount2").innerHTML!="")?"block":"none"}G=ag},reduceriderupdatecount:function(){this.setriderupdatecount(G-1)},setdriverupdatecount:function(ag){if(!ag>0){ag=""}document.getElementById("driverupdatecount").innerHTML=ag;document.getElementById("driverupdatecount2").innerHTML=ag;document.getElementById("driverupdatecount3").innerHTML=ag;document.getElementById("driverupdatecount").style.display=(ag!="")?"block":"none";if(usermode==DRIVERMODE){document.getElementById("driverupdatecount2").style.display=(document.getElementById("driverupdatecount2").innerHTML!="")?"block":"none"}D=ag},reducedriverupdatecount:function(){this.setdriverupdatecount(D-1)},alertajaxerror:function(ak,al,aj,ag){var ai="";var ah=false;switch(al){case"error":switch(ak.status){case 500:ai="The request could not be processed by the server. <br /> If this problem persists, please contact our support team.";ah=false;break;case 502:ai="The request could not be forwarded to the server. <br /> Please try again.";ah=false;break;case 400:ai=ag||"The request was rejected by the server as invalid. Please check your information.";break;case 404:ai=ag||"The request was rejected by the server as invalid.";break;case 422:ai=ag||"The request could not be processed by the server.<br />If this problem presists, please contact our support team.";break;case 401:ai=ag||"The request could not be processed by the server.<br />Please contact our support team.";break;case 403:ai=ag||"The request could not be processed by the server.<br />Please contact our support team.";break;case 0:location.href="./";break}ai=ai+' <br /><br /><small style="color:#999;margin-bottom:-1em;">HTTP status: '+ak.status+"</small>";break;case"parseerror":ai="The server response could not be processed. Please try again later.";break;case"timeout":ai="The request could not be sent to the server. Please check your Internet connection.";break;case"notmodified":ai=ag;break;case"validateError":ai=ag;break}if(ai!=""){if(ah){showOverlayDialog("Error:",ai,"OK","location.reload()","","")}else{showOverlayDialog("Error:",ai,"OK","","","")}}}}}();jQuery.fn.sort=function(){return this.pushStack([].sort.apply(this,arguments),[])};function round(b,a){a=(a==""||a==0?1:Math.pow(10,a));b=Math.round(b*a)/a;return b}function dumpProps(c,b){for(var a in c){if(b){var d=b+"."+a+"\n"+c[a]}else{var d=a+"\n"+c[a]}if(!confirm(d)){return}if(typeof c[a]=="object"){if(b){dumpProps(c[a],b+"."+a)}else{dumpProps(c[a],a)}}}}fokus.openride.mobclient.controller.modules.uievents=function(){var Q=fokus.openride.mobclient.controller.modules.mapmanager;var e=fokus.openride.mobclient.controller.modules.modulemanager;var Y=fokus.openride.mobclient.controller.modules.calendar;var I=fokus.openride.mobclient.controller.modules.calendar;var R=fokus.openride.mobclient.controller.modules.offer;var M=fokus.openride.mobclient.controller.modules.search;var m=fokus.openride.mobclient.controller.modules.nativemodule;var B=fokus.openride.mobclient.controller.serverconnector;var J=fokus.openride.mobclient.controller.modules.favorites;var X=fokus.openride.mobclient.controller.modules.profile;var f={};var E="";var C=true;var V="showofferrouteUI";var N="offerstartdropd";var G="offerdestdropd";var q="searchstartdropd";var n="searchdestdropd";var O="offerstartselectcurrpos";var p="offerdestselectcurrpos";var g="searchstartselectcurrpos";var T="searchdestselectcurrpos";var H="minuteLabelEnd";var w="hourLabelEnd";var z=new Array(w,H);var r="dayLabel";var s="monthLabel";var t="yearLabel";var L="minuteLabel";var W="hourLabel";var l=new Array(r,s,t);var u=new Array(W,L);var U="searchdayLabel";var b="searchmonthLabel";var F="searchyearLabel";var o="searchminuteLabel";var k="searchhourLabel";var j="searchminuteLabelEnd";var y="searchhourLabelEnd";var S=new Array(U,b,F);var d=new Array(k,o);var A=new Array(y,j);var v=r;var c=W;var Z=false;var h=false;var P=false;var K=false;function a(ac,ab){if(ac.length>2){v=ab}else{c=ab}for(var aa=0;aa<ac.length;aa++){if(ac[aa]==ab){document.getElementById(ab).className="labelStyleOnFocus"}else{document.getElementById(ac[aa]).className="labelStyle"}}}function x(ag,af){var aj=Y.getDay();if(aj<10){var ab="0"+aj;document.getElementById(ag[0]).innerHTML=ab}else{document.getElementById(ag[0]).innerHTML=aj}var ac=Y.getMonth();if(ac<10){var ah="0"+ac;document.getElementById(ag[1]).innerHTML=ah}else{document.getElementById(ag[1]).innerHTML=ac}document.getElementById(ag[2]).innerHTML=Y.getYear();var ai,ae;if(af[0].substr(af[0].length-3)=="End"){ai=Y.getHourEnd();ae=Y.getMinEnd()}else{ai=Y.getHour();ae=Y.getMin()}if(ai<10){var ad="0"+ai;document.getElementById(af[0]).innerHTML=ad}else{document.getElementById(af[0]).innerHTML=ai}if(ae<10){var aa="0"+ae;document.getElementById(af[1]).innerHTML=aa}else{document.getElementById(af[1]).innerHTML=ae}}function D(ab){e.setTabContent(1,0);var ac=document.getElementById(ab);var ad=document.createElement("option");ad.innerHTML=Q.currentFormattedAddress;ad.latln=Q.getCenterPosition().lat()+","+Q.getCenterPosition().lng();ad.mod=true;try{ac.add(ad,null);ac.selectedIndex=ac.length-1}catch(aa){}}return{ajaxsuccess:false,validationerror:false,newfavaddrstring:"",parseInitData:function(aa){username=readCookie("username");password=readCookie("password");var ab="";$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/picture",data:"",crossDomain:true,accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ag){ag.withCredentials=true,ag.setRequestHeader("Authorization","Basic "+username+":"+password);ag.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ag.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ah,ai,ag){ab=ah.picture},error:function(ai,ah,ag){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ai,ah,ag,"Unfortunately, initial data could not be loaded.")}});var ae=null;$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile",data:"",crossDomain:true,accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ag){ag.withCredentials=true,ag.setRequestHeader("Authorization","Basic "+username+":"+password);ag.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ag.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ah,ai,ag){ae=ah.motivation},error:function(ai,ah,ag){}});e.username=username;Q.username=username;document.getElementById("usernametag").innerHTML=username;var ad=document.getElementById("profilepicimg");var af=["     ?","   ?","       ","      ","    ","    - "];ad.src=ab;if(ae!=null){if(ae=="1"){var ac=af[Math.floor(Math.random()*af.length)];document.getElementById("motivationmessage").innerHTML=ac+"<hr>"}}document.getElementById("homeinfoopenoffers").innerHTML="0";document.getElementById("homeinfoopenoffers-singular").style.display="inline";document.getElementById("homeinfoopenoffers-plural").style.display="none";document.getElementById("homeinfoopensearches").innerHTML="0";document.getElementById("homeinfoopensearches-singular").style.display="inline";document.getElementById("homeinfoopensearches-plural").style.display="none";document.getElementById("homeinfoopenratings").innerHTML="0";document.getElementById("homeinfoopenratings-plural").style.display="none";document.getElementById("profilepictureform").action="../resources/users/"+username+"/profile/picture";return true},hideUnusedTabs:function(aa){var ab;for(ab in aa){document.getElementById(aa[ab]).setAttribute("class","inactiveTab")}},unhideAllTabs:function(){var ab;var aa=new Array("tabimg11","tabimg12","tabimg13","tabimg14");for(ab in aa){document.getElementById(aa[ab]).setAttribute("class","tablevel1 img")}},timerStart:function(){C=true},refreshTimer:function(){if(C){fokus.openride.mobclient.controller.modules.calendar.reset();x(l,u);x(l,z);x(S,d);x(S,A)}setTimeout("fokus.openride.mobclient.controller.modules.uievents.refreshTimer()",10000)},timerStop:function(){C=false},start:function(){e.setupTabs();this.setUpListeners();x(l,u);x(l,z);if(readCookie("usermode")==1){e.changemode()}document.getElementById("homeUI_loading").style.display="none";document.getElementById("homeUI_live").style.display="block"},setUpListeners:function(){var ba=document.getElementById("homeActiveOffers");ba.onclick=function(){e.changeViewAndUserMode("offers")};document.getElementById("refreshActiveOffers").onclick=function(){e.changeViewAndUserMode("offers")};var af=document.getElementById("homeActiveSearches");af.onclick=function(){e.changeViewAndUserMode("searches")};document.getElementById("refreshActiveSearches").onclick=function(){e.changeViewAndUserMode("searches")};var aN=document.getElementById("homeOpenRatings");aN.onclick=function(){e.changeViewAndUserMode("ratings")};var bb=document.getElementById(r);var aw=document.getElementById(s);var b7=document.getElementById(t);var bJ=document.getElementById(W);var bi=document.getElementById(L);var b0=document.getElementById(w);var aB=document.getElementById(H);bb.onclick=function(){a(l,r)};aw.onclick=function(){a(l,s)};b7.onclick=function(){a(l,t)};bJ.onclick=function(){a(u,W)};bi.onclick=function(){a(u,L)};b0.onclick=function(){a(z,w)};aB.onclick=function(){a(z,H)};var aL=document.getElementById("dateuparrow");var bK=document.getElementById("dateuparrowlink");bK.href="javascript:void(0);";aL.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(v==r){Y.increaseDay()}else{if(v==s){Y.increaseMonth()}else{if(v==t){Y.increaseYear()}}}x(l,u)};var bN=document.getElementById("datedownarrow");var b4=document.getElementById("datedownarrowlink");b4.href="javascript:void(0);";bN.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(v==r){Y.decreaseDay()}else{if(v==s){Y.decreaseMonth()}else{if(v==t){Y.decreaseYear()}}}x(l,u)};var bc=document.getElementById("timeuparrow");var bd=document.getElementById("timeuparrowlink");bd.href="javascript:void(0);";bc.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==W){Y.increaseHour()}else{if(c==L){Y.increaseMin(5)}}x(l,u)};var bh=document.getElementById("timedownarrow");var a9=document.getElementById("timedownarrowlink");a9.href="javascript:void(0);";bh.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==W){Y.decreaseHour()}else{if(c==L){Y.decreaseMin(5)}}x(l,u)};var a8=document.getElementById("timeuparrowEnd");var ag=document.getElementById("timeuparrowlinkEnd");ag.href="javascript:void(0);";a8.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==w){Y.increaseHourEnd()}else{if(c==H){Y.increaseMinEnd(5)}}x(l,z)};var aT=document.getElementById("timedownarrowEnd");var bD=document.getElementById("timedownarrowlinkEnd");bD.href="javascript:void(0);";aT.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==w){Y.decreaseHourEnd()}else{if(c==H){Y.decreaseMinEnd(5)}}x(l,z)};var aK=document.getElementById(U);var b3=document.getElementById(b);var av=document.getElementById(F);var ac=document.getElementById(k);var b5=document.getElementById(o);var ai=document.getElementById(y);var bx=document.getElementById(j);aK.onclick=function(){a(S,U)};b3.onclick=function(){a(S,b)};av.onclick=function(){a(S,F)};ac.onclick=function(){a(d,k)};b5.onclick=function(){a(d,o)};ai.onclick=function(){a(A,y)};bx.onclick=function(){a(A,j)};var bt=document.getElementById("searchdateuparrow");var be=document.getElementById("searchdateuparrowlink");be.href="javascript:void(0);";bt.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(v==U){Y.increaseDay()}else{if(v==b){Y.increaseMonth()}else{if(v==F){Y.increaseYear()}}}x(S,d)};var a7=document.getElementById("searchdatedownarrow");var ao=document.getElementById("searchdatedownarrowlink");ao.href="javascript:void(0);";a7.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(v==U){Y.decreaseDay()}else{if(v==b){Y.decreaseMonth()}else{if(v==F){Y.decreaseYear()}}}x(S,d)};var ad=document.getElementById("searchtimeuparrow");var a4=document.getElementById("searchtimeuparrowlink");a4.href="javascript:void(0);";ad.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==k){Y.increaseHour()}else{if(c==o){Y.increaseMin(5)}}x(S,d)};var aO=document.getElementById("searchtimedownarrow");var bo=document.getElementById("searchtimedownarrowlink");bo.href="javascript:void(0);";aO.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==k){Y.decreaseHour()}else{if(c==o){Y.decreaseMin(5)}}x(S,d)};var ab=document.getElementById("searchtimeuparrowEnd");var aJ=document.getElementById("searchtimeuparrowlinkEnd");aJ.href="javascript:void(0);";ab.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==y){Y.increaseHourEnd()}else{if(c==j){Y.increaseMinEnd(5)}}x(S,A)};var bW=document.getElementById("searchtimedownarrowEnd");var a1=document.getElementById("searchtimedownarrowlinkEnd");a1.href="javascript:void(0);";bW.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStop();if(c==y){Y.decreaseHourEnd()}else{if(c==j){Y.decreaseMinEnd(5)}}x(S,A)};a(l,r);a(u,L);a(z,H);a(S,U);a(d,o);a(A,j);var ak=document.getElementById("newOfferDdArrow");if(ak){ak.onclick=function(){var b8=document.getElementById("newOfferFrom");b8.focus()}}var bg=document.getElementById("newOfferDestDdArrow");if(bg){bg.onclick=function(){var b8=document.getElementById("newOfferDest");b8.focus()}}var aR=document.getElementById("newofferdetaillink");aR.href="javascript:void(0);";aR.onclick=function(){e.setView("newofferdetailsUI");return false};var aX=document.getElementById("newoffersubmit");aX.href="javascript:void(0);";aX.onclick=function(){var b9=1000*60*5;if((Y.getDate().getTime()+b9-new Date().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time is in the past.");return}R.setStartTime(Y.getDate());R.setStartLatLn(document.getElementById(N)[document.getElementById(N).selectedIndex].latln);R.setDestLatLn(document.getElementById(G)[document.getElementById(G).selectedIndex].latln);R.setDetour(30);R.setOfferedSeatsNo(document.getElementById("nrseatsselect").selectedIndex+1);R.setPrice(document.getElementById("priceselect").selectedIndex);R.setCurrency("Euro");R.setComment("No comment");var b8=this;var cg="";$.ajax({type:"GET",url:PeerManagerPrefix+PeerMenager+"/users/"+username+"/profile/preferences",data:"",crossDomain:true,contentType:"application/json; charset=UTF-8",accepts:"application/json",dataType:"json",username:username,password:password,beforeSend:function(ch){ch.withCredentials=true,ch.setRequestHeader("Authorization","Basic "+username+":"+password);ch.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");ch.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},async:false,success:function(ci,cj,ch){cg=ci.isSmoker},error:function(ci,cj,ch){cg="n"}});var ca={};if(Y.getDate().getTime()>Y.getDateEnd().getTime()){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"End time must be later the start time.");return}if(document.getElementById("offerstartcombo")[document.getElementById("offerstartcombo").selectedIndex].text==document.getElementById("offerendcombo")[document.getElementById("offerendcombo").selectedIndex].text){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The source and destination must be different!");return}function cb(){ca.potentialRidePlans=[];ca.potentiallyAgreedRidePlans=[];ca.driverAgreedRidePlans=[];ca.agreedRidePlan="";ca.invalidRidePlans=[];ca.user=username;ca.index=0;ca.__v=0;ca._revision=0;ca._id=0;ca.rideRecord="";if(readCookie("usermode")==1){ca.mode="commuter"}else{ca.mode="driver"}ca.currency=R.getCurrency();ca.pets="No";if(cg=="y"){ca.smoking="Yes"}else{ca.smoking="No"}ca.rideQualityThreshold="0";ca.capacity=document.getElementById("nrseatsselect").selectedIndex+1;ca.departureCity=document.getElementById("offerstartcombo")[document.getElementById("offerstartcombo").selectedIndex].text;ca.destinationCity=document.getElementById("offerendcombo")[document.getElementById("offerendcombo").selectedIndex].text;ca.depDateTimeWindow={};ca.desDateTimeWindow={};ca.depDateTimeWindow.depDateTimeLow=Y.getDate().getTime();ca.depDateTimeWindow.depDateTimeHigh=Y.getDateEnd().getTime();ca.desDateTimeWindow.desDateTimeLow=Y.getDate().getTime()+2592000000;ca.desDateTimeWindow.desDateTimeHigh=Y.getDateEnd().getTime()+2592000000;ca.route="whatever";ca.priceBound=R.getPrice();ca.comments=R.getComment();ca.managedBy=null}var cc;var cf;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";pass="agent1"}else{user="agent6";pass="agent6"}}else{if(username=="MaxS"){user="agent2";pass="agent2"}else{user="agent3";pass="agent3"}}var ce=user.substring(5,user.length);user=readCookie("username");pass=readCookie("password");function cd(){$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests",data:JSON.stringify(ca),crossDomain:true,beforeSend:function(ch){ch.setRequestHeader("Authorization","Basic "+user+":"+pass)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,contentType:"application/json; charset=UTF-8",success:function(ci,cj,ch){cc=JSON.stringify(JSON.parse(ch.response));fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)},error:function(cj,ci,ch){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(cj,ci,ch,"Unfortunately, Something went wrong. Please try again later.")}})}cb();cd()};var a3=document.getElementById("offershowroutepickerlink");a3.href="javascript:void(0);";a3.onclick=function(){var ci=document.getElementById(N)[document.getElementById(N).selectedIndex].latln;var b8=ci.indexOf(",");var ca=ci.substr(0,b8);var cb=ci.substr(b8+1,ci.length-b8+1);var cd=parseFloat(ca);var cj=parseFloat(cb);var ch=document.getElementById(G)[document.getElementById(G).selectedIndex].latln;var ce=ch.indexOf(",");var cf=ch.substr(0,ce);var cg=ch.substr(ce+1,ch.length-ce+1);var b9=parseFloat(cf);var cc=parseFloat(cg);if(cd==b9&&cj==cc){showOverlayDialog("Start and finish may not be identical, please select new!","","OK","","","");return false}B.GET("/OpenRideServer-RS/resources/users/"+username+"/routes/new,"+cd+","+cj+","+b9+","+cc,false,function(ck){var cl=e.parsesimpleroute(ck);if(cl){e.setFullScreenMapView("offerroutegmapscreencontainer")}},function(){showOverlayDialog("The route could not be loaded! Please try again later.","","OK","","","")})};var aI=document.getElementById("searchroutepickerlink");aI.href="javascript:void(0);";aI.onclick=function(){var ci=document.getElementById(q)[document.getElementById(q).selectedIndex].latln;var b8=ci.indexOf(",");var ca=ci.substr(0,b8);var cb=ci.substr(b8+1,ci.length-b8+1);var cd=parseFloat(ca);var cj=parseFloat(cb);var ch=document.getElementById(n)[document.getElementById(n).selectedIndex].latln;var ce=ch.indexOf(",");var cf=ch.substr(0,ce);var cg=ch.substr(ce+1,ch.length-ce+1);var b9=parseFloat(cf);var cc=parseFloat(cg);if(cd==b9&&cj==cc){showOverlayDialog("Start and finish may not be identical, please select new!","","OK","","","");return false}B.GET("/OpenRideServer-RS/resources/users/"+username+"/routes/new,"+cd+","+cj+","+b9+","+cc,false,function(ck){var cl=e.parsesimpleroute(ck);if(cl){e.setFullScreenMapView("searchroutegmapscreencontainer")}},function(){showOverlayDialog("The route could not be loaded! Please try again later.","","OK","","","")})};var al=document.getElementById("offerroutebackbtnlink");al.href="javascript:void(0);";al.onclick=function(){e.setView("newofferUI")};var bZ=document.getElementById("searchroutebackbtnlink");bZ.href="javascript:void(0);";bZ.onclick=function(){e.setView("newsearchUI")};var a0=document.getElementById(N);a0.onchange=function(){if(a0.selectedIndex==0){var b8=m.getUserLocation();Q.insertRevGeocodedAddr(b8,O)}else{if(a0.selectedIndex==1){e.setFullScreenMapView("offerstartgmapscreencontainer")}}if(a0.selectedIndex!=1){R.setStartLatLn(a0[a0.selectedIndex].latln)}};var bz=document.getElementById(G);bz.onchange=function(){if(bz.selectedIndex==0){var b8=m.getUserLocation();Q.insertRevGeocodedAddr(b8,p)}else{if(bz.selectedIndex==1){e.setFullScreenMapView("offerdestgmapscreencontainer")}}if(bz.selectedIndex!=1){R.setDestLatLn(bz[bz.selectedIndex].latln)}};var bH=document.getElementById(q);bH.onchange=function(){if(bH.selectedIndex==0){var b8=m.getUserLocation();Q.insertRevGeocodedAddr(b8,g)}else{if(bH.selectedIndex==1){e.setFullScreenMapView("searchstartgmapscreencontainer")}}if(bH.selectedIndex!=1){M.setStartLatLn(bH[bH.selectedIndex].latln)}};var an=document.getElementById(n);an.onchange=function(){if(an.selectedIndex==0){var b8=m.getUserLocation();Q.insertRevGeocodedAddr(b8,T)}else{if(an.selectedIndex==1){e.setFullScreenMapView("searchdestgmapscreencontainer")}}if(an.selectedIndex!=1){M.setDestLatLn(an[an.selectedIndex].latln)}};var bF=document.getElementById("newsearchdetaillink");bF.href="javascript:void(0);";bF.onclick=function(){e.setView("newsearchdetailsUI");return false};var aG=document.getElementById("newSearchFromDdArrow");if(aG){aG.onclick=function(){var b8=document.getElementById("newSearchFrom");b8.focus()}}var br=document.getElementById("newSearchDestDdArrow");if(br){br.onclick=function(){var b8=document.getElementById("newSearchDest");b8.focus()}}var bn=document.getElementById("newsearchsubmit");bn.href="javascript:void(0);";bn.onclick=function(){var cc=1000*60;if((Y.getDate().getTime()+cc-new Date().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time is in the past.");return}if((Y.getDateEnd().getTime()+cc-Y.getDate().getTime())<0){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The departure time range is invalid.");return}if(document.getElementById("searchstartcombo")[document.getElementById("searchstartcombo").selectedIndex].text==document.getElementById("searchendcombo")[document.getElementById("searchendcombo").selectedIndex].text){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"Please enter different addresses for start and finish.");return}M.setStartTime(Y.getDate());M.setStartLatLn(document.getElementById(q)[document.getElementById(q).selectedIndex].latln);M.setDestLatLn(document.getElementById(n)[document.getElementById(n).selectedIndex].latln);M.setSearchedSeatsNo(document.getElementById("searchseatsselect").selectedIndex+1);M.setStartAddr(document.getElementById(q)[document.getElementById(q).selectedIndex].text);M.setDestAddr(document.getElementById(n)[document.getElementById(n).selectedIndex].text);switch(document.getElementById("searchwaitimeselect").selectedIndex){case 0:M.setMaxWaitingTime(10);break;case 1:M.setMaxWaitingTime(15);break;case 2:M.setMaxWaitingTime(20);break;case 3:M.setMaxWaitingTime(30);break;case 4:M.setMaxWaitingTime(45);break;case 5:M.setMaxWaitingTime(60);break;case 6:M.setMaxWaitingTime(120);break;case 7:M.setMaxWaitingTime(180);break;case 8:M.setMaxWaitingTime(240);break}M.setComment("No comment!");var ce={};if(Y.getDate().getTime()>Y.getDateEnd().getTime()){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"End time must be later the start time.");return}if(document.getElementById("searchstartcombo")[document.getElementById("searchstartcombo").selectedIndex].text==document.getElementById("searchendcombo")[document.getElementById("searchendcombo").selectedIndex].text){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(null,"validateError",null,"The source and destination must be different!");return}function b8(){ce.potentialRidePlans=[];ce.potentiallyAgreedRidePlans=[];ce.driverAgreedRidePlans=[];ce.agreedRidePlan="";ce.invalidRidePlans=[];ce.user=username;ce.index=0;ce.__v=0;ce._revision=0;ce._id="";ce.rideRecord="";if(readCookie("usermode")==1){ce.mode="commuter"}else{ce.mode="driver"}ce.currency="Euro";ce.pets="No";if(X.getPrefIsSmoker()=="y"){ce.smoking="Yes"}else{ce.smoking="No"}ce.rideQualityThreshold="0";ce.capacity="1";ce.departureCity=document.getElementById("searchstartcombo")[document.getElementById("searchstartcombo").selectedIndex].text;ce.destinationCity=document.getElementById("searchendcombo")[document.getElementById("searchendcombo").selectedIndex].text;ce.depDateTimeWindow={};ce.desDateTimeWindow={};ce.depDateTimeWindow.depDateTimeLow=Y.getDate().getTime();ce.depDateTimeWindow.depDateTimeHigh=Y.getDateEnd().getTime();ce.desDateTimeWindow.desDateTimeLow=Y.getDate().getTime()+2592000000;ce.desDateTimeWindow.desDateTimeHigh=Y.getDateEnd().getTime()+2592000000;ce.route="whatever";ce.priceBound="20";ce.comments=M.getComment();ce.managedBy=null}var ca;var cb;if(usermode==DRIVERMODE){if(username=="AviB"){user="agent1";pass="agent1"}else{user="agent6";pass="agent6"}}else{if(username=="MaxS"){user="agent2";pass="agent2"}else{user="agent3";pass="agent3"}}var b9=user.substring(5,user.length);user=readCookie("username");pass=readCookie("password");function cd(){$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests",data:JSON.stringify(ce),crossDomain:true,beforeSend:function(cf){cf.setRequestHeader("Authorization","Basic "+user+":"+pass)},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:false,contentType:"application/json; charset=UTF-8",success:function(cg,ch,cf){ca=JSON.stringify(JSON.parse(cf.response));fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)},error:function(ch,cg,cf){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ch,cg,cf,"Unfortunately, Something went wrong. Please try again later.")}})}b8();cd()};var bL=document.getElementById("resumebtnlink");bL.href="javascript:void(0);";bL.onclick=function(){e.detailsClicked=true;e.setTabContent(1,0)};var bC=document.getElementById("resumebtnlink2");bC.href="javascript:void(0);";bC.onclick=function(){e.detailsClicked=true;e.setTabContent(1,0)};var aQ=document.getElementById("offerstartgmapaddressinput");aQ.onchange=function(){Q.geocodeAddressFromInput("offerstartgmapaddressinput");Q.updateAddressInfo("offerstartgmapaddressinput")};var am=document.getElementById("offerstartgmaplocateadressbtn");am.onclick=function(){Q.geocodeAddressFromInput("offerstartgmapaddressinput");Q.updateAddressInfo("offerstartgmapaddressinput")};var bU=document.getElementById("offerstartgmapbackbtn");bU.onclick=function(){e.returnFromFullscreenMapView()};var ay=document.getElementById("offerstartgmapconfirmadressandbackbtn");ay.onclick=function(){e.detailsClicked=true;D(N);R.setStartLat(Q.getCenterPosition().lat());R.setStartLon(Q.getCenterPosition().lng());e.returnFromFullscreenMapView()};var ax=document.getElementById("offerstartgmapzoominbtn");ax.onclick=function(){Q.zoomIn()};var aa=document.getElementById("offerstartgmapzoomoutbtn");aa.onclick=function(){Q.zoomOut()};var ae=document.getElementById("offerdestgmapaddressinput");ae.onchange=function(){Q.geocodeAddressFromInput("offerdestgmapaddressinput");Q.updateAddressInfo("offerdestgmapaddressinput")};var bS=document.getElementById("offerdestgmaplocateadressbtn");bS.onclick=function(){Q.geocodeAddressFromInput("offerdestgmapaddressinput");Q.updateAddressInfo("offerdestgmapaddressinput")};var aE=document.getElementById("offerdestgmapbackbtn");aE.onclick=function(){e.returnFromFullscreenMapView()};var aM=document.getElementById("offerdestgmapconfirmadressandbackbtn");aM.onclick=function(){e.detailsClicked=true;D(G);R.setDestLat(Q.getCenterPosition().lat());R.setDestLon(Q.getCenterPosition().lng());e.returnFromFullscreenMapView()};var aH=document.getElementById("offerdestgmapzoominbtn");aH.onclick=function(){Q.zoomIn()};var bT=document.getElementById("offerdestgmapzoomoutbtn");bT.onclick=function(){Q.zoomOut()};var bQ=document.getElementById("searchstartgmapaddressinput");bQ.onchange=function(){Q.geocodeAddressFromInput("searchstartgmapaddressinput");Q.updateAddressInfo("searchstartgmapaddressinput")};var aC=document.getElementById("searchstartgmaplocateadressbtn");aC.onclick=function(){Q.geocodeAddressFromInput("searchstartgmapaddressinput");Q.updateAddressInfo("searchstartgmapaddressinput")};var bs=document.getElementById("searchstartgmapbackbtn");bs.onclick=function(){e.returnFromFullscreenMapView()};var aU=document.getElementById("searchstartgmapconfirmadressandbackbtn");aU.onclick=function(){e.detailsClicked=true;D(q);M.setStartLat(Q.getCenterPosition().lat());M.setStartLon(Q.getCenterPosition().lng());e.returnFromFullscreenMapView()};var aD=document.getElementById("searchstartgmapzoominbtn");aD.onclick=function(){Q.zoomIn()};var aW=document.getElementById("searchstartgmapzoomoutbtn");aW.onclick=function(){Q.zoomOut()};var aA=document.getElementById("searchdestgmapaddressinput");aA.onchange=function(){Q.geocodeAddressFromInput("searchdestgmapaddressinput");Q.updateAddressInfo("searchdestgmapaddressinput")};var bI=document.getElementById("searchdestgmaplocateadressbtn");bI.onclick=function(){Q.geocodeAddressFromInput("searchdestgmapaddressinput");Q.updateAddressInfo("searchdestgmapaddressinput")};var bk=document.getElementById("searchdestgmapbackbtn");bk.onclick=function(){e.returnFromFullscreenMapView()};var b1=document.getElementById("searchdestgmapconfirmadressandbackbtn");b1.onclick=function(){e.detailsClicked=true;D(n);M.setDestLat(Q.getCenterPosition().lat());M.setDestLon(Q.getCenterPosition().lng());e.returnFromFullscreenMapView()};var bV=document.getElementById("searchdestgmapzoominbtn");bV.onclick=function(){Q.zoomIn()};var bY=document.getElementById("searchdestgmapzoomoutbtn");bY.onclick=function(){Q.zoomOut()};var bA=document.getElementById("favoritesgmapaddressinput");bA.onchange=function(){Q.geocodeAddressFromInput("favoritesgmapaddressinput");Q.updateAddressInfo("favoritesgmapaddressinput")};var bj=document.getElementById("favoritesgmaplocateadressbtn");bj.onclick=function(){Q.geocodeAddressFromInput("favoritesgmapaddressinput");Q.updateAddressInfo("favoritesgmapaddressinput")};var aZ=document.getElementById("favoritesgmapbackbtn");aZ.onclick=function(){e.returnFromFullscreenMapView();e.setTabContent(3,0)};var aP=document.getElementById("favoritesgmapconfirmadressandbackbtn");aP.onclick=function(){var b8=Q.getCenterPosition().lat()+","+Q.getCenterPosition().lng();J.setGeoCoordStr(b8);showOverlayDialog("Please enter a name for the favorite:","<input id='favnameinput' type='text' style='width: 97.5%; background: url(../img/favstar.png) no-repeat center right' />","Save","return fokus.openride.mobclient.controller.modules.uievents.addFavFromFullscreenMap();","Cancel","")};var bO=document.getElementById("favoritesgmapzoominbtn");bO.onclick=function(){Q.zoomIn()};var au=document.getElementById("favoritesgmapzoomoutbtn");au.onclick=function(){Q.zoomOut()};var ar=document.getElementById("offerroutegmapbackbtn");ar.onclick=function(){e.returnFromFullscreenMapView()};var ap=document.getElementById("offerroutegmapzoominbtn");ap.onclick=function(){Q.zoomIn()};var aS=document.getElementById("offerroutegmapzoomoutbtn");aS.onclick=function(){Q.zoomOut()};var b6=document.getElementById("searchroutegmapbackbtn");b6.onclick=function(){e.returnFromFullscreenMapView()};var at=document.getElementById("searchroutegmapzoominbtn");at.onclick=function(){Q.zoomIn()};var bP=document.getElementById("searchroutegmapzoomoutbtn");bP.onclick=function(){Q.zoomOut()};var bp=document.getElementById("viaptroutegmapbackbtn");bp.onclick=function(){Q.resetRiderMarkers();e.returnFromFullscreenMapView()};var a6=document.getElementById("viaptroutegmapzoominbtn");a6.onclick=function(){Q.zoomIn()};var bR=document.getElementById("viaptroutegmapzoomoutbtn");bR.onclick=function(){Q.zoomOut()};var bf=document.getElementById("offerstartaddrinput");bf.onchange=function(){Q.geocodeAddressFromInput("offerstartaddrinput");Q.updateAddressInfo("offerstartaddrinput")};var bE=document.getElementById("offerdestaddrinput");bE.onchange=function(){Q.geocodeAddressFromInput("offerdestaddrinput");Q.updateAddressInfo("offerdestaddrinput")};var by=document.getElementById("searchstartaddrinput");by.onchange=function(){Q.geocodeAddressFromInput("searchstartaddrinput");Q.updateAddressInfo("searchstartaddrinput")};var ah=document.getElementById("searchdestaddrinput");ah.onchange=function(){Q.geocodeAddressFromInput("searchdestaddrinput");Q.updateAddressInfo("searchdestaddrinput")};var aV=document.getElementById("offerstartconfirm");aV.href="javascript:void(0);";aV.onclick=function(){D(N);R.setStartLat(Q.getCenterPosition().lat());R.setStartLon(Q.getCenterPosition().lng())};var bu=document.getElementById("offerdestconfirm");bu.href="javascript:void(0);";bu.onclick=function(){D(G);R.setDestLat(Q.getCenterPosition().lat());R.setDestLon(Q.getCenterPosition().lng())};var bw=document.getElementById("searchstartconfirm");bw.href="javascript:void(0);";bw.onclick=function(){D(q)};var a5=document.getElementById("searchdestconfirm");a5.href="javascript:void(0);";a5.onclick=function(){D(n)};var bB=document.getElementById("newfavoriteconfirm");bB.href="javascript:void(0);";bB.onclick=function(){var b8=Q.getCenterPosition().lat()+","+Q.getCenterPosition().lng();J.setGeoCoordStr(b8);showOverlayDialog("Please enter a name for the favorite:","<input id='favnameinput' type='text' style='width: 97.5%; background: url(../img/favstar.png) no-repeat center right' />","Favoriten anlegen","fokus.openride.mobclient.controller.modules.uievents.addFav();","Cancel","")};var bv=document.getElementById("offerstartpickerlink");bv.href="javascript:void(0);";bv.onclick=function(){e.setFullScreenMapView("offerstartgmapscreencontainer");var b8=document.getElementById(N).selectedIndex;if(b8>1){var cb=document.getElementById(N)[document.getElementById(N).selectedIndex].latln;var b9=parseFloat(cb.substr(0,cb.indexOf(",")));var cc=parseFloat(cb.substr(cb.indexOf(",")+1,cb.length-(cb.indexOf(",")+1)));var ca=new google.maps.LatLng(b9,cc);Q.setMapToLocation(ca)}};var bm=document.getElementById("offerdestpickerlink");bm.href="javascript:void(0);";bm.onclick=function(){e.setFullScreenMapView("offerdestgmapscreencontainer");var b8=document.getElementById(G).selectedIndex;if(b8>1){var cb=document.getElementById(G)[document.getElementById(G).selectedIndex].latln;var b9=parseFloat(cb.substr(0,cb.indexOf(",")));var cc=parseFloat(cb.substr(cb.indexOf(",")+1,cb.length-(cb.indexOf(",")+1)));var ca=new google.maps.LatLng(b9,cc);Q.setMapToLocation(ca)}};var aq=document.getElementById("searchstartpickerlink");aq.href="javascript:void(0);";aq.onclick=function(){e.setFullScreenMapView("searchstartgmapscreencontainer");var b8=document.getElementById(q).selectedIndex;if(b8>1){var cb=document.getElementById(q)[document.getElementById(q).selectedIndex].latln;var b9=parseFloat(cb.substr(0,cb.indexOf(",")));var cc=parseFloat(cb.substr(cb.indexOf(",")+1,cb.length-(cb.indexOf(",")+1)));var ca=new google.maps.LatLng(b9,cc);Q.setMapToLocation(ca)}};var bG=document.getElementById("searchdestpickerlink");bG.href="javascript:void(0);";bG.onclick=function(){e.setFullScreenMapView("searchdestgmapscreencontainer");var b8=document.getElementById(n).selectedIndex;if(b8>1){var cb=document.getElementById(n)[document.getElementById(n).selectedIndex].latln;var b9=parseFloat(cb.substr(0,cb.indexOf(",")));var cc=parseFloat(cb.substr(cb.indexOf(",")+1,cb.length-(cb.indexOf(",")+1)));var ca=new google.maps.LatLng(b9,cc);Q.setMapToLocation(ca)}};var bq=document.getElementById("tab01link");bq.href="javascript:void(0);";bq.onclick=function(){e.setTabContent(0,0)};var a2=document.getElementById("tab02link");a2.href="javascript:void(0);";a2.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStart();Y.reset();x(l,u);x(l,z);x(S,d);x(S,A);e.deleteModAdrFromBox(N);e.deleteModAdrFromBox(G);e.deleteModAdrFromBox(q);e.deleteModAdrFromBox(n);e.setServiceType("new");e.setTabContent(1,0)};var aF=document.getElementById("tab03link");aF.href="javascript:void(0);";aF.onclick=function(){e.setTabContent(2,0)};var aj=document.getElementById("tab04link");aj.href="javascript:void(0);";aj.onclick=function(){e.setTabContent(3,0)};var bM=document.getElementById("tab11link");bM.href="javascript:void(0);";bM.onclick=function(){fokus.openride.mobclient.controller.modules.uievents.timerStart();Y.reset();x(l,u);x(l,z);x(S,d);x(S,A);e.deleteModAdrFromBox(N);e.deleteModAdrFromBox(G);e.deleteModAdrFromBox(q);e.deleteModAdrFromBox(n);e.setServiceType("new");e.setTabContent(e.currentactivenodeindex,0)};var bl=document.getElementById("tab12link");bl.href="javascript:void(0);";bl.onclick=function(){e.setTabContent(e.currentactivenodeindex,1)};var aY=document.getElementById("tab13link");aY.href="javascript:void(0);";aY.onclick=function(){e.setTabContent(e.currentactivenodeindex,2)};var az=document.getElementById("tab14link");az.href="javascript:void(0);";az.onclick=function(){e.setTabContent(e.currentactivenodeindex,3)};var b2=document.getElementById("usermodelink");b2.href="javascript:void(0);";b2.onclick=function(){var b8=e.changemode();if(b8==0){Y.reset();I.reset();x(l,u);x(l,z);a(l,r);a(u,L);a(z,H)}else{if(b8==1){Y.reset();x(S,d);x(S,A);a(S,U);a(d,o);a(d,j)}}};var bX=document.getElementById("logoutlink");bX.href="javascript:void(0);";bX.onclick=function(){B.PUTaction("/OpenRideServer-RS/resources/configuration/signoff",false);window.location.reload()}},addFav:function(){var aa=document.getElementById("newfavoriteaddrinput").value;J.setAddress(aa);var ab=document.getElementById("favnameinput").value;J.setDisplayName(ab);var ac=Q.getCenterPosition();J.setGeoCoords(ac.lat(),ac.lng());B.POST("/OpenRideServer-RS/resources/users/"+username+"/favoritepoints",false,J.getFavPt(),function(){fokus.openride.mobclient.controller.modules.modulemanager.returnFromFullscreenMapView();showOverlayDialog("New favorite location successfully saved!","","OK","fokus.openride.mobclient.controller.modules.modulemanager.setView('favlistUI');","","")},function(ad,ae,af){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ad,ae,af,"A place with this name already exists.")})},addFavFromFullscreenMap:function(){var aa=document.getElementById("favoritesgmapaddressinput").value;J.setAddress(aa);var ab=document.getElementById("favnameinput").value.search(/^.{1,18}$/);if(ab!=-1){ab=document.getElementById("favnameinput").value;J.setDisplayName(ab);var ac=Q.getCenterPosition();J.setGeoCoords(ac.lat(),ac.lng());B.POST("/OpenRideServer-RS/resources/users/"+username+"/favoritepoints",false,J.getFavPt(),function(){fokus.openride.mobclient.controller.modules.modulemanager.returnFromFullscreenMapView();fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(3,1);showOverlayDialog("New favorite location saved successfully!","","OK","","","")},function(ad,ae,af){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(ad,ae,af,"A place with this name already exists.");return false})}else{showOverlayDialog("The name of the bookmark can be up to 18 characters long.","","OK","","","");return false}},validateDifferentAdr:function(ab){var aa=false;if((ab.getStartLat!=offermodget.DestLat)||(ab.getStartLon!=ab.getDestLon)){aa=true}return aa}}}();var favs=new Array("Kaiserin Augusta Allee 31, Berlin","New York","Helmholtzstra?e 9, Berlin");function bindAutoSuggestEvents(){var b=document.getElementsByName("adrInput");for(i in b){var a=b[i];if(a.type&&a.type.toLowerCase()=="text"){new AutoSuggest(a,favs)}}}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function stars(c,b,e){var d=""+b+"#"+c+"-"+e;var a='      <img src="../../OpenRideWeb/img/rating_off.gif" id="1'+d+'" onMouseOver="mouseOver(\''+1+d+"')\" onMouseOut=\"mouseOut('"+1+d+"')\" onClick=\"fix('"+1+d+'\')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="2'+d+'" onMouseOver="mouseOver(\''+2+d+"')\" onMouseOut=\"mouseOut('"+2+d+"')\" onClick=\"fix('"+2+d+'\')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="3'+d+'" onMouseOver="mouseOver(\''+3+d+"')\" onMouseOut=\"mouseOut('"+3+d+"')\" onClick=\"fix('"+3+d+'\')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="4'+d+'" onMouseOver="mouseOver(\''+4+d+"')\" onMouseOut=\"mouseOut('"+4+d+"')\" onClick=\"fix('"+4+d+'\')"/>    <img src="../../OpenRideWeb/img/rating_off.gif" id="5'+d+'" onMouseOver="mouseOver(\''+5+d+"')\" onMouseOut=\"mouseOut('"+5+d+"')\" onClick=\"fix('"+5+d+"')\"/><br><br>";return a}function mouseOver(d){var h=d.toString();var b=parseInt(h.charAt(0));var f=h.substring(1,h.indexOf("#"));var g=parseInt(f);var e=h.charAt(h.indexOf("#")+1);var a=h.substring(h.indexOf("-")+1);if(submitted_rides[g][e]==-1){for(var c=1;c<b+1;c++){if(document.getElementById(c+f+"#"+e+"-"+a)!=null){document.getElementById(c+f+"#"+e+"-"+a).src="../../OpenRideWeb/img/rating_on.gif"}}}}function mouseOut(d){var h=d.toString();var b=parseInt(h.charAt(0));var f=h.substring(1,h.indexOf("#"));var g=parseInt(f);var e=h.charAt(h.indexOf("#")+1);var a=h.substring(h.indexOf("-")+1);if(submitted_rides[g][e]==-1){for(var c=1;c<b+1;c++){if(document.getElementById(c+f+"#"+e+"-"+a)!=null){document.getElementById(c+f+"#"+e+"-"+a).src="../../OpenRideWeb/img/rating_off.gif"}}}}function fix(d){var g=d.toString();var b=parseInt(g.charAt(0));var f=g.substring(1,g.indexOf("#"));var e=g.charAt(g.indexOf("#")+1);var a=g.substring(g.indexOf("-")+1);for(var c=1;c<6;c++){document.getElementById(c+f+"#"+e+"-"+a).src="../../OpenRideWeb/img/rating_off.gif"}for(var c=1;c<b+1;c++){document.getElementById(c+f+"#"+e+"-"+a).src="../../OpenRideWeb/img/rating_on.gif"}f=parseInt(f);submitted_rides[f][e]=b}function submit(f,d,e){var a=parseInt(d);var c=1+a;var b="agent"+c;user=readCookie("username");pass=readCookie("password");usermode=readCookie("usermode");alert("submit - "+JSON.stringify(f)+" - "+a);$.ajax({type:"GET",url:DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/"+a,data:"",crossDomain:true,username:user,password:pass,beforeSend:function(g){g.setRequestHeader("Authorization","Basic "+user+":"+pass);g.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},async:false,success:function(m,h){var l=JSON.parse(m);var o="driver:"+l.driver+"commuters:"+l.commuters;var p="driver";if(usermode==RIDERMODE){p="commuter"}var s="{";var q=o.indexOf("commuters");var j=0;var g=o.substring(q+10);if(p=="commuter"){s=s+'"subject_'+(j++)+'":{"subject_uri" : "'+o.substring(7,q)+'","quantifier_uri" : "driver"}'}var r=g.split(",");for(var k=0;k<r.length;k++){if(s!="{"&&user!=r[k]){s=s+","}if(user!=r[k]){s=s+'"subject_'+j+'":{"subject_uri" : "'+r[k]+'","quantifier_uri" : "commuter"}';j++}}var u="driver";if(user==l.driver){u="commuter"}var t='{"subject_0":{"subject_uri":"'+e+'", "quantifier_uri" : "'+u+'"}},';s=s+"},";var n='{"application_uri" : "smartshare","event_uri" : "ride/'+a+'","subjects": '+t+'"authors": {"author_0":{"author_uri" : "'+user+'","quantifier_uri" : "'+p+'"}},"feedback": {"StarRating": '+f[0]+',"OnTime": '+f[2]+',"Friendly": '+f[4]+"}}";$.ajax({type:"POST",url:DimitrisRemotePrefix+DimitrisRemote+"/application/1/feedback",data:n,crossDomain:true,username:user,password:pass,contentType:"application/json; charset=utf-8",beforeSend:function(v){v.setRequestHeader("Authorization","Basic "+user+":"+pass);v.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest"},async:false,success:function(v,w){fokus.openride.mobclient.controller.modules.modulemanager.setView("openratingsUI")},error:function(x,w,v){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(x,w,v,"Unfortunately, Something went wrong. Please try again later.")}})},error:function(j,h,g){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(j,h,g,"Unfortunately, Something went wrong. Please try again later.")}})}function comment(c){var h=c.toString();var b=parseInt(h.substring(0,h.indexOf("-")));var e=h.substring(h.indexOf("-")+1,h.indexOf("#"));var d=h.charAt(h.indexOf("#")+1);var g=h.substring(h.indexOf("#")+2);alert(g);var a;var f;if($.inArray(-1,submitted_rides[e])==-1){submit(submitted_rides[e],b,g);submitted_rides[e]=[-1,0,-1,0,-1]}}function rideDelete(b){user=readCookie("username");pass=readCookie("password");var a=0;var c=JSON.parse(rideRequests[b-rides.length]);$.ajax({type:"DELETE",url:DimitrisRemotePrefix+DimitrisRemote+"/rideRequests/"+c.index,async:false,crossDomain:true,username:user,password:pass,beforeSend:function(d){d.withCredentials=true;d.setRequestHeader("Authorization","Basic "+user+":"+pass);d.setRequestHeader("APP_KEY","RIDE-SHARING-CLIENT-APPLICATION");d.setRequestHeader("APP_SECRET","508e8d50-ab80-11e3-a5e2-0800200c9a66")},accepts:"application/json",success:function(e,f,d){if(usermode==DRIVERMODE){showOverlayDialog("Your ride has been successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI"),"","")}else{showOverlayDialog("Your ride has been successfully deleted.","","OK",fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI"),"","")}},error:function(f,e,d){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(f,e,d,"Unfortunately, Something went wrong. Please try again later.")}})}function myaccept(c){user=readCookie("username");pass=readCookie("password");var b=0;var e=JSON.parse(rides[c]);if(usermode==DRIVERMODE&&e.agreedDriver==""){var d=e.potentiallyAgreedDriver;e.agreedDriver=d;e.potentiallyAgreedDriver="";b=parseInt(e._revision);e._revision=b+1;ajaxcall("PUT",DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/"+e.index,e,false,user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)}else{if(usermode==RIDERMODE&&e.agreedDriver!=""){var a=$.inArray(user,e.potentiallyAgreedCommuters);if(a>=0){e.potentiallyAgreedCommuters.splice(a,1)}(e.agreedCommuters).push(user);b=parseInt(e._revision);e._revision=b+1;ajaxcall("PUT",DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/"+e.index,e,false,user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)}}}function myreject(c){user=readCookie("username");pass=readCookie("password");var e=JSON.parse(rides[c]);var b=0;if(usermode==DRIVERMODE){var d=e.potentiallyAgreedDriver;e.potentiallyAgreedDriver="";e.rejectedDriver=d;b=parseInt(e._revision);e._revision=b+1;ajaxcall("PUT",DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/"+e.index,e,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activeofferUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)}else{if(usermode==RIDERMODE){var a=$.inArray(user,e.potentiallyAgreedCommuters);if(a>=0){e.potentiallyAgreedCommuters.splice(a,1)}(e.rejectedCommuters).push(user);b=parseInt(e._revision);e._revision=b+1;ajaxcall("PUT",DimitrisRemotePrefix+DimitrisRemote+"/ridePlans/"+e.index,e,"false",user,pass);fokus.openride.mobclient.controller.modules.modulemanager.setView("activesearchUI");fokus.openride.mobclient.controller.modules.modulemanager.setTabContent(1,1)}}}function fail(c,a,b){fokus.openride.mobclient.controller.modules.modulemanager.alertajaxerror(c,a,b,"Unfortunately, Something went wrong. Please try again later.")}function ajaxcall(f,d,c,b,e,a){$.ajax({type:f,url:d,data:c,crossDomain:true,username:e,password:a,beforeSend:function(g){g.setRequestHeader("Authorization","Basic "+e+":"+a);g.withCredentials=true},headers:{"X-Requested-With":"XMLHttpRequest",Origin:"http://localhost:8080"},dataType:"json",async:b,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(g,h){},error:function(j,h,g){fail(j,h,g)}})}window.onload=function(){fokus.openride.mobclient.controller.modules.uievents.start();fokus.openride.mobclient.controller.modules.uievents.refreshTimer();fokus.openride.mobclient.controller.modules.uievents.hideUnusedTabs(new Array("tabimg13","tabimg14"));window.onresize();bindAutoSuggestEvents();setTimeout(scrollTo,0,0,1);if(!DetectMobileQuick()){document.getElementsByTagName("body")[0].className="desktop"}};window.onresize=function(){adjustContentDimensions()};adjustContentDimensions=function(){document.getElementById("content").style.minHeight=window.innerHeight-88-5+"px"};var isIphone=false;var isTierIphone=false;var isTierRichCss=false;var isTierGenericMobile=false;var engineWebKit="webkit";var deviceAndroid="android";var deviceIphone="iphone";var deviceIpod="ipod";var deviceIpad="ipad";var deviceMacPpc="macintosh";var deviceNuvifone="nuvifone";var deviceSymbian="symbian";var deviceS60="series60";var deviceS70="series70";var deviceS80="series80";var deviceS90="series90";var deviceWinMob="windows ce";var deviceWindows="windows";var deviceIeMob="iemobile";var devicePpc="ppc";var enginePie="wm5 pie";var deviceBB="blackberry";var vndRIM="vnd.rim";var deviceBBStorm="blackberry95";var deviceBBBold="blackberry97";var deviceBBTour="blackberry96";var deviceBBCurve="blackberry89";var devicePalm="palm";var deviceWebOS="webos";var engineBlazer="blazer";var engineXiino="xiino";var deviceKindle="kindle";var vndwap="vnd.wap";var wml="wml";var deviceBrew="brew";var deviceDanger="danger";var deviceHiptop="hiptop";var devicePlaystation="playstation";var deviceNintendoDs="nitro";var deviceNintendo="nintendo";var deviceWii="wii";var deviceXbox="xbox";var deviceArchos="archos";var engineOpera="opera";var engineNetfront="netfront";var engineUpBrowser="up.browser";var engineOpenWeb="openweb";var deviceMidp="midp";var uplink="up.link";var engineTelecaQ="teleca q";var devicePda="pda";var mini="mini";var mobile="mobile";var mobi="mobi";var maemo="maemo";var maemoTablet="tablet";var linux="linux";var qtembedded="qt embedded";var mylocom2="com2";var manuSonyEricsson="sonyericsson";var manuericsson="ericsson";var manuSamsung1="sec-sgh";var manuSony="sony";var manuHtc="htc";var svcDocomo="docomo";var svcKddi="kddi";var svcVodafone="vodafone";var uagent=navigator.userAgent.toLowerCase();function DetectIphone(){if(uagent.search(deviceIphone)>-1){if(DetectIpad()||DetectIpod()){return false}else{return true}}else{return false}}function DetectIpod(){if(uagent.search(deviceIpod)>-1){return true}else{return false}}function DetectIpad(){if(uagent.search(deviceIpad)>-1&&DetectWebkit()){return true}else{return false}}function DetectIphoneOrIpod(){if(uagent.search(deviceIphone)>-1||uagent.search(deviceIpod)>-1){return true}else{return false}}function DetectAndroid(){if(uagent.search(deviceAndroid)>-1){return true}else{return false}}function DetectAndroidWebKit(){if(DetectAndroid()&&DetectWebkit()){return true}else{return false}}function DetectWebkit(){if(uagent.search(engineWebKit)>-1){return true}else{return false}}function DetectS60OssBrowser(){if(DetectWebkit()){if((uagent.search(deviceS60)>-1||uagent.search(deviceSymbian)>-1)){return true}else{return false}}else{return false}}function DetectSymbianOS(){if(uagent.search(deviceSymbian)>-1||uagent.search(deviceS60)>-1||uagent.search(deviceS70)>-1||uagent.search(deviceS80)>-1||uagent.search(deviceS90)>-1){return true}else{return false}}function DetectWindowsMobile(){if(uagent.search(deviceWinMob)>-1||uagent.search(deviceIeMob)>-1||uagent.search(enginePie)>-1){return true}if((uagent.search(devicePpc)>-1)&&!(uagent.search(deviceMacPpc)>-1)){return true}if(uagent.search(manuHtc)>-1&&uagent.search(deviceWindows)>-1){return true}else{return false}}function DetectBlackBerry(){if(uagent.search(deviceBB)>-1){return true}if(uagent.search(vndRIM)>-1){return true}else{return false}}function DetectBlackBerryTouch(){if(uagent.search(deviceBBStorm)>-1){return true}else{return false}}function DetectBlackBerryHigh(){if(DetectBlackBerry()){if(DetectBlackBerryTouch()||uagent.search(deviceBBBold)>-1||uagent.search(deviceBBTour)>-1||uagent.search(deviceBBCurve)>-1){return true}else{return false}}else{return false}}function DetectBlackBerryLow(){if(DetectBlackBerry()){if(DetectBlackBerryHigh()){return false}else{return true}}else{return false}}function DetectPalmOS(){if(uagent.search(devicePalm)>-1||uagent.search(engineBlazer)>-1||uagent.search(engineXiino)>-1){if(DetectPalmWebOS()){return false}else{return true}}else{return false}}function DetectPalmWebOS(){if(uagent.search(deviceWebOS)>-1){return true}else{return false}}function DetectGarminNuvifone(){if(uagent.search(deviceNuvifone)>-1){return true}else{return false}}function DetectSmartphone(){if(DetectIphoneOrIpod()){return true}if(DetectS60OssBrowser()){return true}if(DetectSymbianOS()){return true}if(DetectWindowsMobile()){return true}if(DetectAndroid()){return true}if(DetectBlackBerry()){return true}if(DetectPalmWebOS()){return true}if(DetectPalmOS()){return true}if(DetectGarminNuvifone()){return true}return false}function DetectArchos(){if(uagent.search(deviceArchos)>-1){return true}else{return false}}function DetectBrewDevice(){if(uagent.search(deviceBrew)>-1){return true}else{return false}}function DetectDangerHiptop(){if(uagent.search(deviceDanger)>-1||uagent.search(deviceHiptop)>-1){return true}else{return false}}function DetectMaemoTablet(){if(uagent.search(maemo)>-1){return true}if(uagent.search(maemoTablet)>-1&&uagent.search(linux)){return true}else{return false}}function DetectSonyMylo(){if(uagent.search(manuSony)>-1){if(uagent.search(qtembedded)>-1||uagent.search(mylocom2)>-1){return true}else{return false}}else{return false}}function DetectOperaMobile(){if(uagent.search(engineOpera)>-1){if(uagent.search(mini)>-1||uagent.search(mobi)>-1){return true}else{return false}}else{return false}}function DetectSonyPlaystation(){if(uagent.search(devicePlaystation)){return true}else{return false}}function DetectNintendo(){if(uagent.search(deviceNintendo)>-1||uagent.search(deviceWii)>-1||uagent.search(deviceNintendoDs)>-1){return true}else{return false}}function DetectXbox(){if(uagent.search(deviceXbox)){return true}else{return false}}function DetectGameConsole(){if(DetectSonyPlaystation()){return true}if(DetectNintendo()){return true}if(DetectXbox()){return true}else{return false}}function DetectKindle(){if(uagent.search(deviceKindle)>-1){return true}else{return false}}function DetectMobileQuick(){if(DetectIpad()){return false}if(DetectSmartphone()){return true}if(uagent.search(deviceMidp)>-1||DetectBrewDevice()){return true}if(DetectOperaMobile()){return true}if(uagent.search(engineNetfront)>-1){return true}if(uagent.search(engineUpBrowser)>-1){return true}if(uagent.search(engineOpenWeb)>-1){return true}if(DetectDangerHiptop()){return true}if(DetectMaemoTablet()){return true}if(DetectArchos()){return true}if(uagent.search(devicePda)>-1){return true}if(uagent.search(mobile)>-1){return true}if(DetectKindle()){return true}return false}function DetectMobileLong(){if(DetectMobileQuick()){return true}if(DetectGameConsole()){return true}if(DetectSonyMylo()){return true}if(uagent.search(manuSamsung1)>-1||uagent.search(manuSonyEricsson)>-1||uagent.search(manuericsson)>-1){return true}if(uagent.search(svcDocomo)>-1){return true}if(uagent.search(svcKddi)>-1){return true}if(uagent.search(svcVodafone)>-1){return true}return false}function DetectTierIphone(){if(DetectIphoneOrIpod()){return true}if(DetectAndroid()){return true}if(DetectAndroidWebKit()){return true}if(DetectPalmWebOS()){return true}if(DetectGarminNuvifone()){return true}if(DetectMaemoTablet()){return true}else{return false}}function DetectTierRichCss(){if(DetectMobileQuick()){if(DetectTierIphone()){return false}if(DetectWebkit()){return true}if(DetectS60OssBrowser()){return true}if(DetectBlackBerryHigh()){return true}if(DetectWindowsMobile()){return true}if(uagent.search(engineTelecaQ)>-1){return true}else{return false}}else{return false}}function DetectTierOtherPhones(){if(DetectMobileLong()){if(DetectTierIphone()){return false}if(DetectTierRichCss()){return false}else{return true}}else{return false}};